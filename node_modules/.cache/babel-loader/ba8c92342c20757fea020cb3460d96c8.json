{"remainingRequest":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/babel-loader/lib/index.js!/Users/cristiandan/Desktop/lifestyle-ui/src/core/store/modules/user/user.js","dependencies":[{"path":"/Users/cristiandan/Desktop/lifestyle-ui/src/core/store/modules/user/user.js","mtime":1645805363993},{"path":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/cache-loader/dist/cjs.js","mtime":1637061222564},{"path":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/babel-loader/lib/index.js","mtime":1637061222406}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvVXNlcnMvY3Jpc3RpYW5kYW4vRGVza3RvcC9saWZlc3R5bGUtdWkvbm9kZV9tb2R1bGVzL0B2dWUvYmFiZWwtcHJlc2V0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvY3Jpc3RpYW5kYW4vRGVza3RvcC9saWZlc3R5bGUtdWkvbm9kZV9tb2R1bGVzL0B2dWUvYmFiZWwtcHJlc2V0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCB7IGhhc1Nlc3Npb25JZCBhcyBzZXNzaW9uVXRpbHNIYXNTZXNzaW9uSWQsIGdldFNlc3Npb25JZCBhcyBzZXNzaW9uVXRpbHNHZXRTZXNzaW9uSWQgfSBmcm9tICdAdXRpbHMvc2Vzc2lvblV0aWxzJzsKaW1wb3J0IG11dGF0aW9uVHlwZXMgZnJvbSAnQGNvcmUvaGVscGVycy9zdG9yZUZhY3Rvcmllcy9oZWxwZXJzL211dGF0aW9uVHlwZXMnOwppbXBvcnQgdXNlckFuYWx5dGljcyBmcm9tICcuL3VzZXJBbmFseXRpY3MnOwppbXBvcnQgdXNlckJyb3dzaW5nSGlzdG9yeSBmcm9tICcuL3VzZXJCcm93c2luZ0hpc3RvcnknOwppbXBvcnQgdXNlckZhdm9yaXRlRW50aXRpZXMgZnJvbSAnLi91c2VyRmF2b3JpdGVFbnRpdGllcyc7CmltcG9ydCB1c2VyTG9jYXRpb24gZnJvbSAnLi91c2VyTG9jYXRpb24nOwppbXBvcnQgdXNlclByb2ZpbGUgZnJvbSAnLi91c2VyUHJvZmlsZSc7CnZhciBTVE9SRV9OQU1FID0gJ3VzZXInOwp2YXIgaGFzU2Vzc2lvbiA9IHNlc3Npb25VdGlsc0hhc1Nlc3Npb25JZCgpOwoKaWYgKCFoYXNTZXNzaW9uKSB7CiAgc2Vzc2lvblV0aWxzR2V0U2Vzc2lvbklkKCk7Cn0KCnZhciBzdG9yZSA9IHsKICBuYW1lOiBTVE9SRV9OQU1FLAogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHsKICAgIGZpcnN0QWNjZXNzOiAhaGFzU2Vzc2lvbgogIH0sCiAgbW9kdWxlczogewogICAgYW5hbHl0aWNzOiB1c2VyQW5hbHl0aWNzLAogICAgYnJvd3NpbmdIaXN0b3J5OiB1c2VyQnJvd3NpbmdIaXN0b3J5LAogICAgZmF2b3JpdGVFbnRpdGllczogdXNlckZhdm9yaXRlRW50aXRpZXMsCiAgICBsb2NhdGlvbjogdXNlckxvY2F0aW9uLAogICAgcHJvZmlsZTogdXNlclByb2ZpbGUKICB9LAogIGFjdGlvbnM6IF9kZWZpbmVQcm9wZXJ0eSh7CiAgICBsb2dpbjogZnVuY3Rpb24gbG9naW4oX3JlZiwgZW1haWwpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgZGlzcGF0Y2gsIGNvbW1pdCwgcmVzcG9uc2U7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZGlzcGF0Y2ggPSBfcmVmLmRpc3BhdGNoLCBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCd1c2VyL3Byb2ZpbGUvZ2V0JywgZW1haWwsIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGRpc3BhdGNoKCIiLmNvbmNhdChtdXRhdGlvblR5cGVzLkNMRUFSKSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCd1c2VyL3Byb2ZpbGUvZ2V0U2Vzc2lvbicsIGVtYWlsLCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZGlzcGF0Y2goIiIuY29uY2F0KG11dGF0aW9uVHlwZXMuQ0xFQVIpKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIGZhbHNlKTsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgIGNvbW1pdCgidXNlci9hbmFseXRpY3MvIi5jb25jYXQobXV0YXRpb25UeXBlcy5DTEVBUiksIG51bGwsIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCB0cnVlKTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmMikgewogICAgICB2YXIgZGlzcGF0Y2ggPSBfcmVmMi5kaXNwYXRjaDsKICAgICAgZGlzcGF0Y2gobXV0YXRpb25UeXBlcy5DTEVBUik7CiAgICB9CiAgfSwgbXV0YXRpb25UeXBlcy5DTEVBUiwgZnVuY3Rpb24gKF9yZWYzKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0OwogICAgY29tbWl0KCJ1c2VyL3Byb2ZpbGUvIi5jb25jYXQobXV0YXRpb25UeXBlcy5DTEVBUiksIG51bGwsIHsKICAgICAgcm9vdDogdHJ1ZQogICAgfSk7CiAgICBjb21taXQoInVzZXIvYW5hbHl0aWNzLyIuY29uY2F0KG11dGF0aW9uVHlwZXMuQ0xFQVIpLCBudWxsLCB7CiAgICAgIHJvb3Q6IHRydWUKICAgIH0pOwogICAgY29tbWl0KCJhcHBTdGF0ZS8iLmNvbmNhdChtdXRhdGlvblR5cGVzLkNMRUFSKSwgbnVsbCwgewogICAgICByb290OiB0cnVlCiAgICB9KTsKICB9KSwKICBfcGVyc2lzdGVudDogewogICAgZ2V0RGF0YVRvU2F2ZTogZnVuY3Rpb24gZ2V0RGF0YVRvU2F2ZShzdGF0ZSkgewogICAgICB2YXIgcmV0ID0gewogICAgICAgIGFuYWx5dGljczogdXNlckFuYWx5dGljcy5fcGVyc2lzdGVudC5nZXREYXRhVG9TYXZlKHN0YXRlW1NUT1JFX05BTUVdKSwKICAgICAgICBicm93c2luZ0hpc3Rvcnk6IHVzZXJCcm93c2luZ0hpc3RvcnkuX3BlcnNpc3RlbnQuZ2V0RGF0YVRvU2F2ZShzdGF0ZVtTVE9SRV9OQU1FXSksCiAgICAgICAgbG9jYXRpb246IHVzZXJMb2NhdGlvbi5fcGVyc2lzdGVudC5nZXREYXRhVG9TYXZlKHN0YXRlW1NUT1JFX05BTUVdKSwKICAgICAgICBwcm9maWxlOiB1c2VyUHJvZmlsZS5fcGVyc2lzdGVudC5nZXREYXRhVG9TYXZlKHN0YXRlW1NUT1JFX05BTUVdKQogICAgICB9OwogICAgICByZXR1cm4gcmV0OwogICAgfSwKICAgIGdldERhdGFUb0xvYWQ6IGZ1bmN0aW9uIGdldERhdGFUb0xvYWQoZGF0YSkgewogICAgICB2YXIgcmV0ID0gewogICAgICAgIGFuYWx5dGljczogdXNlckFuYWx5dGljcy5fcGVyc2lzdGVudC5nZXREYXRhVG9Mb2FkKGRhdGEgJiYgZGF0YS5hbmFseXRpY3MgPyBkYXRhLmFuYWx5dGljcyA6IHt9KSwKICAgICAgICBicm93c2luZ0hpc3Rvcnk6IHVzZXJCcm93c2luZ0hpc3RvcnkuX3BlcnNpc3RlbnQuZ2V0RGF0YVRvTG9hZChkYXRhICYmIGRhdGEuYnJvd3NpbmdIaXN0b3J5ID8gZGF0YS5icm93c2luZ0hpc3RvcnkgOiB7fSksCiAgICAgICAgbG9jYXRpb246IHVzZXJMb2NhdGlvbi5fcGVyc2lzdGVudC5nZXREYXRhVG9Mb2FkKGRhdGEgJiYgZGF0YS5sb2NhdGlvbiA/IGRhdGEubG9jYXRpb24gOiB7fSksCiAgICAgICAgcHJvZmlsZTogdXNlclByb2ZpbGUuX3BlcnNpc3RlbnQuZ2V0RGF0YVRvTG9hZChkYXRhICYmIGRhdGEucHJvZmlsZSA/IGRhdGEucHJvZmlsZSA6IHt9KQogICAgICB9OwogICAgICByZXR1cm4gcmV0OwogICAgfQogIH0KfTsKZXhwb3J0IGRlZmF1bHQgc3RvcmU7"},{"version":3,"sources":["/Users/cristiandan/Desktop/lifestyle-ui/src/core/store/modules/user/user.js"],"names":["hasSessionId","sessionUtilsHasSessionId","getSessionId","sessionUtilsGetSessionId","mutationTypes","userAnalytics","userBrowsingHistory","userFavoriteEntities","userLocation","userProfile","STORE_NAME","hasSession","store","name","namespaced","state","firstAccess","modules","analytics","browsingHistory","favoriteEntities","location","profile","actions","login","email","dispatch","commit","root","response","CLEAR","logout","_persistent","getDataToSave","ret","getDataToLoad","data"],"mappings":"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","sourcesContent":["import { hasSessionId as sessionUtilsHasSessionId, getSessionId as sessionUtilsGetSessionId } from '@utils/sessionUtils';\nimport mutationTypes from '@core/helpers/storeFactories/helpers/mutationTypes';\nimport userAnalytics from './userAnalytics';\nimport userBrowsingHistory from './userBrowsingHistory';\nimport userFavoriteEntities from './userFavoriteEntities';\nimport userLocation from './userLocation';\nimport userProfile from './userProfile';\n\nconst STORE_NAME = 'user';\nconst hasSession = sessionUtilsHasSessionId( );\n\nif ( !hasSession ) {\n    sessionUtilsGetSessionId( );\n}\n\n\nconst store = {\n    name: STORE_NAME,\n    namespaced: true,\n    state: {\n        firstAccess: !hasSession\n    },\n    modules: {\n        analytics:              userAnalytics,\n        browsingHistory:        userBrowsingHistory,\n        favoriteEntities:       userFavoriteEntities,\n        location:               userLocation,\n        profile:                userProfile,\n\n    },\n    actions: {\n        async login( { dispatch, commit }, email ) {\n            let response = await dispatch( 'user/profile/get', email, { root: true } );\n            if ( !response ) {\n                dispatch( `${mutationTypes.CLEAR}` );\n                return false;\n            }\n            response = await dispatch( 'user/profile/getSession', email, { root: true } );\n            if ( !response ) {\n                dispatch( `${mutationTypes.CLEAR}` );\n                return false;\n            }\n            commit( `user/analytics/${mutationTypes.CLEAR}`, null, { root: true } );\n\n            return true;\n        },\n        logout( { dispatch } ) {\n            dispatch( mutationTypes.CLEAR );\n        },\n        [ mutationTypes.CLEAR ] ( { commit } ) {\n            commit( `user/profile/${mutationTypes.CLEAR}`, null, { root: true } );\n            commit( `user/analytics/${mutationTypes.CLEAR}`, null, { root: true } );\n            commit( `appState/${mutationTypes.CLEAR}`, null, { root: true } );\n        }\n    },\n    _persistent: {\n        getDataToSave: ( state ) => {\n            const ret =  {\n                analytics: userAnalytics._persistent.getDataToSave( state[STORE_NAME] ),\n                browsingHistory: userBrowsingHistory._persistent.getDataToSave( state[ STORE_NAME ] ),\n                location: userLocation._persistent.getDataToSave( state[ STORE_NAME ] ),\n                profile: userProfile._persistent.getDataToSave( state[STORE_NAME] ),\n            };\n\n            return ret;\n        },\n        getDataToLoad: ( data ) => {\n            const ret = {\n                analytics: userAnalytics._persistent.getDataToLoad( data && data.analytics ? data.analytics : { } ),\n                browsingHistory: userBrowsingHistory._persistent.getDataToLoad( data && data.browsingHistory ? data.browsingHistory : { } ),\n                location: userLocation._persistent.getDataToLoad( data && data.location ? data.location : { } ),\n                profile: userProfile._persistent.getDataToLoad( data && data.profile ? data.profile : { } ),\n            };\n            return ret;\n        }\n    }\n};\nexport default store;"]}]}