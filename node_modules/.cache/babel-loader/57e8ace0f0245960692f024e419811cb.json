{"remainingRequest":"/Users/cristiandan/Desktop/proiect-licenta-front/node_modules/babel-loader/lib/index.js!/Users/cristiandan/Desktop/proiect-licenta-front/src/core/shared/components/attraction/mixins/AttractionCardFavoriteMixin.js","dependencies":[{"path":"/Users/cristiandan/Desktop/proiect-licenta-front/src/core/shared/components/attraction/mixins/AttractionCardFavoriteMixin.js","mtime":1645805363939},{"path":"/Users/cristiandan/Desktop/proiect-licenta-front/node_modules/cache-loader/dist/cjs.js","mtime":1637061222564},{"path":"/Users/cristiandan/Desktop/proiect-licenta-front/node_modules/babel-loader/lib/index.js","mtime":1637061222406}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9Vc2Vycy9jcmlzdGlhbmRhbi9EZXNrdG9wL3Byb2llY3QtbGljZW50YS1mcm9udC9ub2RlX21vZHVsZXMvQHZ1ZS9iYWJlbC1wcmVzZXQtYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgZW50aXR5Q29uc3RhbnRzIGZyb20gJ0Bjb3JlL3V0aWxzL2NvbnN0YW50cy9lbnRpdHknOwppbXBvcnQgY2F0ZWdvcmllc0NvbnN0YW50cyBmcm9tICdAY29yZS91dGlscy9jb25zdGFudHMvY2F0ZWdvcmllcyc7CmltcG9ydCB7IGhhc0luY29ycmVjdENvbnRlbnRTaXplIGFzIGltYWdlVXRpbHNIYXNJbmNvcnJlY3RDb250ZW50U2l6ZSB9IGZyb20gJ0Bjb3JlL3V0aWxzL2ltYWdlVXRpbHMnOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIGl0ZW06IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIHdpdGhUbzogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZXJyb3JMb2FkaW5nSW1hZ2U6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwR2V0dGVycygndXNlci9mYXZvcml0ZUVudGl0aWVzJywgewogICAgaXNFbnRpdHlGYXZvcml0ZTogJ2lzRmF2b3JpdGUnCiAgfSkpLCB7fSwgewogICAgZW50aXR5VHlwZTogZnVuY3Rpb24gZW50aXR5VHlwZSgpIHsKICAgICAgcmV0dXJuIGVudGl0eUNvbnN0YW50cy5UWVBFUy5BVFRSQUNUSU9OOwogICAgfSwKICAgIGltYWdlU3JjOiBmdW5jdGlvbiBpbWFnZVNyYygpIHsKICAgICAgdmFyIGVycm9yTG9hZGluZ0ltYWdlID0gdGhpcy5lcnJvckxvYWRpbmdJbWFnZSwKICAgICAgICAgIGZhbGxiYWNrU3JjID0gdGhpcy5mYWxsYmFja1NyYzsKICAgICAgdmFyIGltYWdlVXJsID0gdGhpcy5pdGVtLmltYWdlVXJsOwoKICAgICAgaWYgKGVycm9yTG9hZGluZ0ltYWdlKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZmFsbGJhY2tTcmM7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGltYWdlVXJsIHx8IGZhbGxiYWNrU3JjOwogICAgICB9CiAgICB9LAogICAgZmFsbGJhY2tTcmM6IGZ1bmN0aW9uIGZhbGxiYWNrU3JjKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGZvdW5kID0gY2F0ZWdvcmllc0NvbnN0YW50cy5MSVNULmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS5JRCA9PT0gX3RoaXMuaXRlbS5jbGFzc2lmaWNhdGlvblNlZ21lbnRJZDsKICAgICAgfSk7CiAgICAgIHJldHVybiBmb3VuZCA/IGZvdW5kLkZBTExCQUNLIDogY2F0ZWdvcmllc0NvbnN0YW50cy5ERUZBVUxUX0ZBTExCQUNLOwogICAgfSwKICAgIHRvOiBmdW5jdGlvbiB0bygpIHsKICAgICAgdmFyIHdpdGhUbyA9IHRoaXMud2l0aFRvLAogICAgICAgICAgaXRlbSA9IHRoaXMuaXRlbTsKICAgICAgcmV0dXJuIHdpdGhUbyA/IHsKICAgICAgICBuYW1lOiAnYXR0cmFjdGlvbicsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBpZDogaXRlbS5pZAogICAgICAgIH0KICAgICAgfSA6IG51bGw7CiAgICB9LAogICAgaXNGYXZvcml0ZTogZnVuY3Rpb24gaXNGYXZvcml0ZSgpIHsKICAgICAgdmFyIGVudGl0eVR5cGUgPSB0aGlzLmVudGl0eVR5cGUsCiAgICAgICAgICBpdGVtID0gdGhpcy5pdGVtOwogICAgICByZXR1cm4gdGhpcy5pc0VudGl0eUZhdm9yaXRlKGVudGl0eVR5cGUsIGl0ZW0uaWQpOwogICAgfQogIH0pLAogIG1ldGhvZHM6IHsKICAgIG9uSW1hZ2VMb2FkRG86IGZ1bmN0aW9uIG9uSW1hZ2VMb2FkRG8oKSB7CiAgICAgIGlmICh0aGlzLml0ZW0uaW1hZ2VVcmwgJiYgdGhpcy5pdGVtLmltYWdlVXJsID09PSB0aGlzLmltYWdlU3JjKSB7CiAgICAgICAgdGhpcy5lcnJvckxvYWRpbmdJbWFnZSA9IGltYWdlVXRpbHNIYXNJbmNvcnJlY3RDb250ZW50U2l6ZSh0aGlzLiRyZWZzLmltYWdlLmltYWdlKTsKICAgICAgfQoKICAgICAgdGhpcy4kZW1pdCgnbG9hZC1pbWFnZScpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/cristiandan/Desktop/proiect-licenta-front/src/core/shared/components/attraction/mixins/AttractionCardFavoriteMixin.js"],"names":["mapGetters","entityConstants","categoriesConstants","hasIncorrectContentSize","imageUtilsHasIncorrectContentSize","props","item","type","Object","required","withTo","Boolean","default","data","errorLoadingImage","computed","isEntityFavorite","entityType","TYPES","ATTRACTION","imageSrc","fallbackSrc","imageUrl","found","LIST","find","ID","classificationSegmentId","FALLBACK","DEFAULT_FALLBACK","to","name","params","id","isFavorite","methods","onImageLoadDo","$refs","image","$emit"],"mappings":";;AAAA,SAASA,UAAT,QAA2B,MAA3B;AACA,OAAOC,eAAP,MAA4B,8BAA5B;AACA,OAAOC,mBAAP,MAAgC,kCAAhC;AACA,SACIC,uBAAuB,IAAIC,iCAD/B,QAEO,wBAFP;AAIA,eAAe;AACXC,EAAAA,KAAK,EAAE;AACHC,IAAAA,IAAI,EAAE;AACFC,MAAAA,IAAI,EAAEC,MADJ;AAEFC,MAAAA,QAAQ,EAAE;AAFR,KADH;AAKHC,IAAAA,MAAM,EAAE;AACJH,MAAAA,IAAI,EAAEI,OADF;AAEJC,MAAAA,OAAO,EAAE;AAFL;AALL,GADI;AAWXC,EAAAA,IAXW,kBAWJ;AACH,WAAO;AACHC,MAAAA,iBAAiB,EAAE;AADhB,KAAP;AAGH,GAfU;AAgBXC,EAAAA,QAAQ,kCACDf,UAAU,CAAE,uBAAF,EAA2B;AACpCgB,IAAAA,gBAAgB,EAAE;AADkB,GAA3B,CADT;AAIJC,IAAAA,UAJI,wBAIS;AACT,aAAOhB,eAAe,CAACiB,KAAhB,CAAsBC,UAA7B;AACH,KANG;AAOJC,IAAAA,QAPI,sBAOO;AAAA,UACCN,iBADD,GACoC,IADpC,CACCA,iBADD;AAAA,UACoBO,WADpB,GACoC,IADpC,CACoBA,WADpB;AAAA,UAECC,QAFD,GAEc,KAAKhB,IAFnB,CAECgB,QAFD;;AAIP,UAAKR,iBAAL,EAAyB;AACrB,eAAO,KAAKO,WAAZ;AACH,OAFD,MAEO;AACH,eAAOC,QAAQ,IAAID,WAAnB;AACH;AACJ,KAhBG;AAiBJA,IAAAA,WAjBI,yBAiBU;AAAA;;AACV,UAAIE,KAAK,GAAGrB,mBAAmB,CAACsB,IAApB,CAAyBC,IAAzB,CAA+B,UAAAnB,IAAI;AAAA,eAAIA,IAAI,CAACoB,EAAL,KAAY,KAAI,CAACpB,IAAL,CAAUqB,uBAA1B;AAAA,OAAnC,CAAZ;AACA,aAAOJ,KAAK,GAAGA,KAAK,CAACK,QAAT,GAAoB1B,mBAAmB,CAAC2B,gBAApD;AACH,KApBG;AAqBJC,IAAAA,EArBI,gBAqBE;AAAA,UACMpB,MADN,GACuB,IADvB,CACMA,MADN;AAAA,UACcJ,IADd,GACuB,IADvB,CACcA,IADd;AAEF,aAAOI,MAAM,GAAG;AAAEqB,QAAAA,IAAI,EAAC,YAAP;AAAqBC,QAAAA,MAAM,EAAE;AAAEC,UAAAA,EAAE,EAAE3B,IAAI,CAAC2B;AAAX;AAA7B,OAAH,GAAoD,IAAjE;AACH,KAxBG;AA0BJC,IAAAA,UA1BI,wBA0BU;AAAA,UACFjB,UADE,GACmB,IADnB,CACFA,UADE;AAAA,UACUX,IADV,GACmB,IADnB,CACUA,IADV;AAGV,aAAO,KAAKU,gBAAL,CAAuBC,UAAvB,EAAmCX,IAAI,CAAC2B,EAAxC,CAAP;AACH;AA9BG,IAhBG;AAgDXE,EAAAA,OAAO,EAAE;AACLC,IAAAA,aADK,2BACY;AACb,UAAK,KAAK9B,IAAL,CAAUgB,QAAV,IAAsB,KAAKhB,IAAL,CAAUgB,QAAV,KAAuB,KAAKF,QAAvD,EAAkE;AAC9D,aAAKN,iBAAL,GAAyBV,iCAAiC,CAAE,KAAKiC,KAAL,CAAWC,KAAX,CAAiBA,KAAnB,CAA1D;AACH;;AACD,WAAKC,KAAL,CAAY,YAAZ;AACH;AANI;AAhDE,CAAf","sourcesContent":["import { mapGetters } from 'vuex';\nimport entityConstants from '@core/utils/constants/entity';\nimport categoriesConstants from '@core/utils/constants/categories';\nimport {\n    hasIncorrectContentSize as imageUtilsHasIncorrectContentSize\n} from '@core/utils/imageUtils';\n\nexport default { \n    props: {\n        item: {\n            type: Object,\n            required: true\n        },\n        withTo: {\n            type: Boolean,\n            default: true\n        }\n    },\n    data() {\n        return {\n            errorLoadingImage: false\n        };\n    },\n    computed: {\n        ...mapGetters( 'user/favoriteEntities', {\n            isEntityFavorite: 'isFavorite'\n        } ),\n        entityType() {\n            return entityConstants.TYPES.ATTRACTION;\n        },\n        imageSrc() {\n            const { errorLoadingImage, fallbackSrc } = this;\n            const { imageUrl } = this.item;\n\n            if ( errorLoadingImage ) {\n                return this.fallbackSrc;\n            } else {\n                return imageUrl || fallbackSrc;\n            }\n        },\n        fallbackSrc() {\n            let found = categoriesConstants.LIST.find( item => item.ID === this.item.classificationSegmentId );\n            return found ? found.FALLBACK : categoriesConstants.DEFAULT_FALLBACK ;\n        },\n        to( ) {\n            const { withTo, item } = this;\n            return withTo ? { name:'attraction', params: { id: item.id } } : null;\n        },\n        \n        isFavorite( ) {\n            const { entityType, item } = this;\n\n            return this.isEntityFavorite( entityType, item.id );\n        }\n    },\n    methods: {\n        onImageLoadDo( ) {\n            if ( this.item.imageUrl && this.item.imageUrl === this.imageSrc ) {\n                this.errorLoadingImage = imageUtilsHasIncorrectContentSize( this.$refs.image.image );\n            }\n            this.$emit( 'load-image' );\n        }\n    }\n};"]}]}