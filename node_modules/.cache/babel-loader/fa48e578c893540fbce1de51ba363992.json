{"remainingRequest":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/babel-loader/lib/index.js!/Users/cristiandan/Desktop/lifestyle-ui/src/tenants/ticketmaster/app/models/BundleProductsHotelReservationModel.js","dependencies":[{"path":"/Users/cristiandan/Desktop/lifestyle-ui/src/tenants/ticketmaster/app/models/BundleProductsHotelReservationModel.js","mtime":1645805365933},{"path":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/cache-loader/dist/cjs.js","mtime":1637061222564},{"path":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/babel-loader/lib/index.js","mtime":1637061222406}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMvY3Jpc3RpYW5kYW4vRGVza3RvcC9saWZlc3R5bGUtdWkvbm9kZV9tb2R1bGVzL0B2dWUvYmFiZWwtcHJlc2V0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9Vc2Vycy9jcmlzdGlhbmRhbi9EZXNrdG9wL2xpZmVzdHlsZS11aS9ub2RlX21vZHVsZXMvQHZ1ZS9iYWJlbC1wcmVzZXQtYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL1VzZXJzL2NyaXN0aWFuZGFuL0Rlc2t0b3AvbGlmZXN0eWxlLXVpL25vZGVfbW9kdWxlcy9AdnVlL2JhYmVsLXByZXNldC1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IGNsb25lRGVlcCBmcm9tICdsb2Rhc2gvY2xvbmVEZWVwJzsKaW1wb3J0IEd1ZXN0cyBmcm9tICcuL0d1ZXN0c01vZGVsJzsKaW1wb3J0IEhvdGVsUmVzZXJ2YXRpb25Nb2RlbCBmcm9tICcuL0hvdGVsUmVzZXJ2YXRpb25Nb2RlbCc7Cgp2YXIgQnVuZGxlUHJvZHVjdHNIb3RlbFJlc2VydmF0aW9uTW9kZWwgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEJ1bmRsZVByb2R1Y3RzSG90ZWxSZXNlcnZhdGlvbk1vZGVsKCkgewogICAgdmFyIGhvdGVsID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBuZXcgSG90ZWxSZXNlcnZhdGlvbk1vZGVsKCk7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJ1bmRsZVByb2R1Y3RzSG90ZWxSZXNlcnZhdGlvbk1vZGVsKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImhvdGVsIiwgbnVsbCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJxdWFudGl0eSIsIHsKICAgICAgcm9vbXNDb3VudDogMCwKICAgICAgZ3Vlc3RzOiBuZXcgR3Vlc3RzKCksCiAgICAgIG5pZ2h0czogMAogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJzdGFydERhdGVUaW1lIiwgbmV3IERhdGUoKSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJlbmREYXRlVGltZSIsIG5ldyBEYXRlKCkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAidG90YWxzIiwgewogICAgICBiYXNlUHJpY2U6IDAsCiAgICAgIGJhc2VQcmljZVdpdGhvdXREaXNjb3VudDogMAogICAgfSk7CgogICAgdGhpcy5ob3RlbCA9IGhvdGVsOwoKICAgIGlmICh0aGlzLmhvdGVsICYmIHRoaXMuaG90ZWwucm9vbXMubGVuZ3RoKSB7CiAgICAgIHZhciBhY2NvbW1vZGF0aW9uID0gdGhpcy5ob3RlbC5yb29tc1swXS5hY2NvbW1vZGF0aW9uOwogICAgICB0aGlzLnF1YW50aXR5LnJvb21zQ291bnQgPSBhY2NvbW1vZGF0aW9uLnJvb21zQ291bnQ7CiAgICAgIHRoaXMucXVhbnRpdHkuZ3Vlc3RzID0gYWNjb21tb2RhdGlvbi5ndWVzdHM7CiAgICAgIHRoaXMuc3RhcnREYXRlVGltZSA9IGFjY29tbW9kYXRpb24uc3RhcnREYXRlVGltZTsKICAgICAgdGhpcy5lbmREYXRlVGltZSA9IGFjY29tbW9kYXRpb24uZW5kRGF0ZVRpbWU7CiAgICAgIHRoaXMucXVhbnRpdHkubmlnaHRzID0gYWNjb21tb2RhdGlvbi5uaWdodHM7CiAgICB9CgogICAgdGhpcy50b3RhbHMuYmFzZVByaWNlID0gMDsKICAgIHRoaXMudG90YWxzLmJhc2VQcmljZVdpdGhvdXREaXNjb3VudCA9IDA7CiAgICB0aGlzLnVwZGF0ZVRvdGFsKCk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoQnVuZGxlUHJvZHVjdHNIb3RlbFJlc2VydmF0aW9uTW9kZWwsIFt7CiAgICBrZXk6ICJzZXRTZWxlY3RlZFJvb20iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFNlbGVjdGVkUm9vbShyb29tKSB7CiAgICAgIHRoaXMuaG90ZWwuc2VsZWN0ZWRSb29tID0gcm9vbTsKICAgICAgdGhpcy51cGRhdGVUb3RhbCgpOwogICAgfQogIH0sIHsKICAgIGtleTogInVwZGF0ZVRvdGFsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVUb3RhbCgpIHsKICAgICAgaWYgKHRoaXMuaGFzVmFsdWUoKSAmJiB0aGlzLmhvdGVsLnNlbGVjdGVkUm9vbSkgewogICAgICAgIHZhciByb29tQmFzZVByaWNlID0gdGhpcy5ob3RlbC5zZWxlY3RlZFJvb20ucmF0ZS50b3RhbHMuYmFzZVByaWNlOwogICAgICAgIHZhciByb29tc0NvdW50ID0gdGhpcy5xdWFudGl0eS5yb29tc0NvdW50OwogICAgICAgIHZhciBwYWNrYWdlT2ZmZXIgPSB0aGlzLmdldFBhY2thZ2VPZmZlcigpOwoKICAgICAgICBpZiAocGFja2FnZU9mZmVyKSB7CiAgICAgICAgICB0aGlzLnRvdGFscy5iYXNlUHJpY2UgPSBwYWNrYWdlT2ZmZXIuYmFzZVByaWNlOwogICAgICAgICAgdGhpcy50b3RhbHMuYmFzZVByaWNlV2l0aG91dERpc2NvdW50ID0gcGFja2FnZU9mZmVyLmJhc2VQcmljZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy50b3RhbHMuYmFzZVByaWNlID0gcm9vbUJhc2VQcmljZSAqIHJvb21zQ291bnQ7CiAgICAgICAgICB0aGlzLnRvdGFscy5iYXNlUHJpY2VXaXRob3V0RGlzY291bnQgPSByb29tQmFzZVByaWNlICogcm9vbXNDb3VudDsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc1BhY2thZ2VPZmZlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNQYWNrYWdlT2ZmZXIoKSB7CiAgICAgIHJldHVybiB0aGlzLmhhc1ZhbHVlKCkgJiYgdGhpcy5ob3RlbC5zZWxlY3RlZFJvb20gJiYgdGhpcy5ob3RlbC5zZWxlY3RlZFJvb20ucmF0ZS5wYWNrYWdlT2ZmZXIgJiYgdGhpcy5ob3RlbC5zZWxlY3RlZFJvb20ucmF0ZS5wYWNrYWdlT2ZmZXIuaWQ7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0UGFja2FnZU9mZmVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQYWNrYWdlT2ZmZXIoKSB7CiAgICAgIGlmICh0aGlzLmlzUGFja2FnZU9mZmVyKCkpIHsKICAgICAgICByZXR1cm4gdGhpcy5ob3RlbC5zZWxlY3RlZFJvb20ucmF0ZS5wYWNrYWdlT2ZmZXI7CiAgICAgIH0gZWxzZSBmYWxzZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJoYXNWYWx1ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFzVmFsdWUoKSB7CiAgICAgIHJldHVybiB0aGlzLmhvdGVsICYmIHRoaXMuaG90ZWwuaWQgIT09IG51bGw7CiAgICB9CiAgfSwgewogICAga2V5OiAiX2Nsb25lIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfY2xvbmUoKSB7CiAgICAgIHJldHVybiBuZXcgQnVuZGxlUHJvZHVjdHNIb3RlbFJlc2VydmF0aW9uTW9kZWwoY2xvbmVEZWVwKHRoaXMuaG90ZWwpLCB0aGlzLnF1YW50aXR5LnJvb21zQ291bnQsIHRoaXMucXVhbnRpdHkuZ3Vlc3RzLCB0aGlzLnN0YXJ0RGF0ZVRpbWUgfHwgbmV3IERhdGUoKSwgdGhpcy5lbmREYXRlVGltZSB8fCBuZXcgRGF0ZSgpKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBCdW5kbGVQcm9kdWN0c0hvdGVsUmVzZXJ2YXRpb25Nb2RlbDsKfSgpOwoKZXhwb3J0IHsgQnVuZGxlUHJvZHVjdHNIb3RlbFJlc2VydmF0aW9uTW9kZWwgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"sources":["/Users/cristiandan/Desktop/lifestyle-ui/src/tenants/ticketmaster/app/models/BundleProductsHotelReservationModel.js"],"names":["cloneDeep","Guests","HotelReservationModel","BundleProductsHotelReservationModel","hotel","roomsCount","guests","nights","Date","basePrice","basePriceWithoutDiscount","rooms","length","accommodation","quantity","startDateTime","endDateTime","totals","updateTotal","room","selectedRoom","hasValue","roomBasePrice","rate","packageOffer","getPackageOffer","id","isPackageOffer"],"mappings":"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","sourcesContent":["import cloneDeep from 'lodash/cloneDeep';\nimport Guests from './GuestsModel';\nimport HotelReservationModel from './HotelReservationModel';\n\n\nexport default class BundleProductsHotelReservationModel {\n    hotel = null\n    quantity = {\n        roomsCount: 0,\n        guests: new Guests( ),\n        nights: 0,\n    }\n    startDateTime = new Date( );\n    endDateTime = new Date( );\n    totals = {\n        basePrice: 0,\n        basePriceWithoutDiscount: 0\n    }\n\n    constructor( hotel = new HotelReservationModel( ) ) {\n        this.hotel = hotel;\n        if ( this.hotel && this.hotel.rooms.length ) {\n            const accommodation = this.hotel.rooms[ 0 ].accommodation;\n\n            this.quantity.roomsCount = accommodation.roomsCount;\n            this.quantity.guests = accommodation.guests;\n            this.startDateTime = accommodation.startDateTime;\n            this.endDateTime = accommodation.endDateTime;\n            this.quantity.nights = accommodation.nights;\n        }\n\n        this.totals.basePrice = 0;\n        this.totals.basePriceWithoutDiscount = 0;\n\n        this.updateTotal( );\n    }\n\n    setSelectedRoom( room ) {\n        this.hotel.selectedRoom = room;\n        this.updateTotal( );\n    }\n\n    updateTotal( ) {\n        if ( this.hasValue( ) && this.hotel.selectedRoom ) {\n            const roomBasePrice = this.hotel.selectedRoom.rate.totals.basePrice;\n            const roomsCount = this.quantity.roomsCount;\n            const packageOffer = this.getPackageOffer( );\n\n            if ( packageOffer ) {\n                this.totals.basePrice = packageOffer.basePrice;\n                this.totals.basePriceWithoutDiscount = packageOffer.basePrice;\n            } else {\n                this.totals.basePrice = roomBasePrice *  roomsCount;\n                this.totals.basePriceWithoutDiscount = roomBasePrice * roomsCount;\n\n            }\n        }\n    }\n\n    isPackageOffer( ) {\n        return this.hasValue( ) && this.hotel.selectedRoom && this.hotel.selectedRoom.rate.packageOffer && this.hotel.selectedRoom.rate.packageOffer.id;\n    }\n\n    getPackageOffer( ) {\n        if ( this.isPackageOffer( ) ) {\n            return this.hotel.selectedRoom.rate.packageOffer;\n        }\n        else false;\n    }\n\n    hasValue( ) {\n        return this.hotel && this.hotel.id !== null;\n    }\n\n    _clone( ) {\n        return new BundleProductsHotelReservationModel(\n            cloneDeep( this.hotel ),\n            this.quantity.roomsCount,\n            this.quantity.guests,\n            this.startDateTime || new Date( ),\n            this.endDateTime || new Date( ),\n        );\n    }\n}\n"]}]}