{"remainingRequest":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/babel-loader/lib/index.js!/Users/cristiandan/Desktop/lifestyle-ui/src/tenants/ticketmaster/app/store/modules/user/user.js","dependencies":[{"path":"/Users/cristiandan/Desktop/lifestyle-ui/src/tenants/ticketmaster/app/store/modules/user/user.js","mtime":1645805365976},{"path":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/cache-loader/dist/cjs.js","mtime":1637061222564},{"path":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/babel-loader/lib/index.js","mtime":1637061222406}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvVXNlcnMvY3Jpc3RpYW5kYW4vRGVza3RvcC9saWZlc3R5bGUtdWkvbm9kZV9tb2R1bGVzL0B2dWUvYmFiZWwtcHJlc2V0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvY3Jpc3RpYW5kYW4vRGVza3RvcC9saWZlc3R5bGUtdWkvbm9kZV9tb2R1bGVzL0B2dWUvYmFiZWwtcHJlc2V0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCB7IGhhc1Nlc3Npb25JZCBhcyBzZXNzaW9uVXRpbHNIYXNTZXNzaW9uSWQsIGdldFNlc3Npb25JZCBhcyBzZXNzaW9uVXRpbHNHZXRTZXNzaW9uSWQgfSBmcm9tICdAdXRpbHMvc2Vzc2lvblV0aWxzJzsKaW1wb3J0IG11dGF0aW9uVHlwZXMgZnJvbSAnQGNvcmUvaGVscGVycy9zdG9yZUZhY3Rvcmllcy9oZWxwZXJzL211dGF0aW9uVHlwZXMnOwppbXBvcnQgTG9nU2VydmljZSBmcm9tICdAc2VydmljZXMvTG9nU2VydmljZSc7CmltcG9ydCB1c2VyUHJvZmlsZSBmcm9tICcuL3VzZXJQcm9maWxlJzsKdmFyIFNUT1JFX05BTUUgPSAndXNlcic7CnZhciBoYXNTZXNzaW9uID0gc2Vzc2lvblV0aWxzSGFzU2Vzc2lvbklkKCk7CgppZiAoIWhhc1Nlc3Npb24pIHsKICBzZXNzaW9uVXRpbHNHZXRTZXNzaW9uSWQoKTsKfQoKdmFyIHN0b3JlID0gewogIG5hbWU6IFNUT1JFX05BTUUsCiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogewogICAgZmlyc3RBY2Nlc3M6ICFoYXNTZXNzaW9uCiAgfSwKICBtb2R1bGVzOiB7CiAgICBwcm9maWxlOiB1c2VyUHJvZmlsZQogIH0sCiAgYWN0aW9uczogX2RlZmluZVByb3BlcnR5KHsKICAgIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmLCBlbWFpbCkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBkaXNwYXRjaCwgY29tbWl0LCByZXNwb25zZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBkaXNwYXRjaCA9IF9yZWYuZGlzcGF0Y2gsIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ3VzZXIvcHJvZmlsZS9nZXQnLCBlbWFpbCwgewogICAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZGlzcGF0Y2goJ2NsZWFyJyk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCd1c2VyL3Byb2ZpbGUvZ2V0U2Vzc2lvbicsIGVtYWlsLCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZGlzcGF0Y2goJ2NsZWFyJyk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICBjb21taXQoInVzZXIvYW5hbHl0aWNzLyIuY29uY2F0KG11dGF0aW9uVHlwZXMuQ0xFQVIpLCBudWxsLCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgdHJ1ZSk7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoX3JlZjIpIHsKICAgICAgdmFyIGRpc3BhdGNoID0gX3JlZjIuZGlzcGF0Y2g7CiAgICAgIGRpc3BhdGNoKG11dGF0aW9uVHlwZXMuQ0xFQVIpOwogICAgfQogIH0sIG11dGF0aW9uVHlwZXMuQ0xFQVIsIGZ1bmN0aW9uIChfcmVmMykgewogICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdDsKICAgIGNvbW1pdCgidXNlci9wcm9maWxlLyIuY29uY2F0KG11dGF0aW9uVHlwZXMuQ0xFQVIpLCBudWxsLCB7CiAgICAgIHJvb3Q6IHRydWUKICAgIH0pOwogIH0pLAogIF9wZXJzaXN0ZW50OiB7CiAgICBnZXREYXRhVG9TYXZlOiBmdW5jdGlvbiBnZXREYXRhVG9TYXZlKHN0YXRlKSB7CiAgICAgIHZhciByZXQgPSB7CiAgICAgICAgcHJvZmlsZTogdXNlclByb2ZpbGUuX3BlcnNpc3RlbnQuZ2V0RGF0YVRvU2F2ZShzdGF0ZVtTVE9SRV9OQU1FXSkKICAgICAgfTsKICAgICAgcmV0dXJuIHJldDsKICAgIH0sCiAgICBnZXREYXRhVG9Mb2FkOiBmdW5jdGlvbiBnZXREYXRhVG9Mb2FkKGRhdGEpIHsKICAgICAgdHJ5IHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgcHJvZmlsZTogdXNlclByb2ZpbGUuX3BlcnNpc3RlbnQuZ2V0RGF0YVRvTG9hZChkYXRhLnByb2ZpbGUpCiAgICAgICAgfTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIExvZ1NlcnZpY2UuZXJyb3IoIlZ1ZXggc3RhdGUgY2Fubm90IGJlIGxvYWRlZDogVXNlcjogIi5jb25jYXQoZS5tZXNzYWdlKSk7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgIH0KICB9Cn07CmV4cG9ydCBkZWZhdWx0IHN0b3JlOw=="},{"version":3,"sources":["/Users/cristiandan/Desktop/lifestyle-ui/src/tenants/ticketmaster/app/store/modules/user/user.js"],"names":["hasSessionId","sessionUtilsHasSessionId","getSessionId","sessionUtilsGetSessionId","mutationTypes","LogService","userProfile","STORE_NAME","hasSession","store","name","namespaced","state","firstAccess","modules","profile","actions","login","email","dispatch","commit","root","response","CLEAR","logout","_persistent","getDataToSave","ret","getDataToLoad","data","e","error","message"],"mappings":";;;AACA,SAASA,YAAY,IAAIC,wBAAzB,EAAmDC,YAAY,IAAIC,wBAAnE,QAAmG,qBAAnG;AACA,OAAOC,aAAP,MAA0B,oDAA1B;AACA,OAAOC,UAAP,MAAuB,sBAAvB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AAEA,IAAMC,UAAU,GAAG,MAAnB;AACA,IAAMC,UAAU,GAAGP,wBAAwB,EAA3C;;AAEA,IAAK,CAACO,UAAN,EAAmB;AACfL,EAAAA,wBAAwB;AAC3B;;AAGD,IAAMM,KAAK,GAAG;AACVC,EAAAA,IAAI,EAAEH,UADI;AAEVI,EAAAA,UAAU,EAAE,IAFF;AAGVC,EAAAA,KAAK,EAAE;AACHC,IAAAA,WAAW,EAAE,CAACL;AADX,GAHG;AAMVM,EAAAA,OAAO,EAAE;AACLC,IAAAA,OAAO,EAAiBT;AADnB,GANC;AASVU,EAAAA,OAAO;AACGC,IAAAA,KADH,uBACgCC,KADhC,EACwC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA5BC,gBAAAA,QAA4B,QAA5BA,QAA4B,EAAlBC,MAAkB,QAAlBA,MAAkB;AAAA;AAAA,uBAClBD,QAAQ,CAAE,kBAAF,EAAsBD,KAAtB,EAA6B;AAAEG,kBAAAA,IAAI,EAAE;AAAR,iBAA7B,CADU;;AAAA;AACnCC,gBAAAA,QADmC;;AAAA,oBAEjCA,QAFiC;AAAA;AAAA;AAAA;;AAGnCH,gBAAAA,QAAQ,CAAE,OAAF,CAAR;AAHmC,iDAI5B,KAJ4B;;AAAA;AAAA;AAAA,uBAMtBA,QAAQ,CAAE,yBAAF,EAA6BD,KAA7B,EAAoC;AAAEG,kBAAAA,IAAI,EAAE;AAAR,iBAApC,CANc;;AAAA;AAMvCC,gBAAAA,QANuC;;AAAA,oBAOjCA,QAPiC;AAAA;AAAA;AAAA;;AAQnCH,gBAAAA,QAAQ,CAAE,OAAF,CAAR;AARmC,iDAS5B,KAT4B;;AAAA;AAWvCC,gBAAAA,MAAM,0BAAoBhB,aAAa,CAACmB,KAAlC,GAA2C,IAA3C,EAAiD;AAAEF,kBAAAA,IAAI,EAAE;AAAR,iBAAjD,CAAN;AAXuC,iDAahC,IAbgC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAc1C,KAfE;AAgBHG,IAAAA,MAhBG,yBAgBoB;AAAA,UAAbL,QAAa,SAAbA,QAAa;AACnBA,MAAAA,QAAQ,CAAEf,aAAa,CAACmB,KAAhB,CAAR;AACH;AAlBE,KAmBDnB,aAAa,CAACmB,KAnBb,mBAmBoC;AAAA,QAAXH,MAAW,SAAXA,MAAW;AACnCA,IAAAA,MAAM,wBAAkBhB,aAAa,CAACmB,KAAhC,GAAyC,IAAzC,EAA+C;AAAEF,MAAAA,IAAI,EAAE;AAAR,KAA/C,CAAN;AACH,GArBE,CATG;AAgCVI,EAAAA,WAAW,EAAE;AACTC,IAAAA,aAAa,EAAE,uBAAEd,KAAF,EAAa;AACxB,UAAMe,GAAG,GAAI;AACTZ,QAAAA,OAAO,EAAET,WAAW,CAACmB,WAAZ,CAAwBC,aAAxB,CAAuCd,KAAK,CAACL,UAAD,CAA5C;AADA,OAAb;AAIA,aAAOoB,GAAP;AACH,KAPQ;AAQTC,IAAAA,aAAa,EAAE,uBAAEC,IAAF,EAAY;AACvB,UAAI;AACA,eAAO;AACHd,UAAAA,OAAO,EAAET,WAAW,CAACmB,WAAZ,CAAwBG,aAAxB,CAAuCC,IAAI,CAACd,OAA5C;AADN,SAAP;AAGH,OAJD,CAIE,OAAQe,CAAR,EAAY;AACVzB,QAAAA,UAAU,CAAC0B,KAAX,8CAAyDD,CAAC,CAACE,OAA3D;AACA,eAAO,IAAP;AACH;AACJ;AAjBQ;AAhCH,CAAd;AAoDA,eAAevB,KAAf","sourcesContent":["\nimport { hasSessionId as sessionUtilsHasSessionId, getSessionId as sessionUtilsGetSessionId } from '@utils/sessionUtils';\nimport mutationTypes from '@core/helpers/storeFactories/helpers/mutationTypes';\nimport LogService from '@services/LogService';\nimport userProfile from './userProfile';\n\nconst STORE_NAME = 'user';\nconst hasSession = sessionUtilsHasSessionId( );\n\nif ( !hasSession ) {\n    sessionUtilsGetSessionId( );\n}\n\n\nconst store = {\n    name: STORE_NAME,\n    namespaced: true,\n    state: {\n        firstAccess: !hasSession\n    },\n    modules: {\n        profile:                userProfile,\n    },\n    actions: {\n        async login( { dispatch, commit }, email ) {\n            let response = await dispatch( 'user/profile/get', email, { root: true } );\n            if ( !response ) {\n                dispatch( 'clear' );\n                return false;\n            }\n            response = await dispatch( 'user/profile/getSession', email, { root: true } );\n            if ( !response ) {\n                dispatch( 'clear' );\n                return false;\n            }\n            commit( `user/analytics/${mutationTypes.CLEAR}`, null, { root: true } );\n\n            return true;\n        },\n        logout( { dispatch } ) {\n            dispatch( mutationTypes.CLEAR );\n        },\n        [ mutationTypes.CLEAR ] ( { commit } ) {\n            commit( `user/profile/${mutationTypes.CLEAR}`, null, { root: true } );\n        }\n    },\n    _persistent: {\n        getDataToSave: ( state ) => {\n            const ret =  {\n                profile: userProfile._persistent.getDataToSave( state[STORE_NAME] ),\n            };\n\n            return ret;\n        },\n        getDataToLoad: ( data ) => {\n            try {\n                return {\n                    profile: userProfile._persistent.getDataToLoad( data.profile ),\n                };\n            } catch ( e ) {\n                LogService.error( `Vuex state cannot be loaded: User: ${ e.message }` );\n                return null;\n            }\n        }\n    }\n};\nexport default store;"]}]}