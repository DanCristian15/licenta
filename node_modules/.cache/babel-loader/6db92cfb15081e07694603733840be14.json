{"remainingRequest":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/babel-loader/lib/index.js!/Users/cristiandan/Desktop/lifestyle-ui/src/core/utils/storageUtils.js","dependencies":[{"path":"/Users/cristiandan/Desktop/lifestyle-ui/src/core/utils/storageUtils.js","mtime":1645805364011},{"path":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/cache-loader/dist/cjs.js","mtime":1637061222564},{"path":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/babel-loader/lib/index.js","mtime":1637061222406}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGFwcENvbnN0YW50cyBmcm9tICcuL2NvbnN0YW50cy9hcHAnOwppbXBvcnQgeyBpc1NhbWVWZXJzaW9uIGFzIGFwcFV0aWxzSXNTYW1lVmVyc2lvbiB9IGZyb20gJy4vYXBwVXRpbHMnOwpleHBvcnQgZnVuY3Rpb24gc2F2ZVNldHRpbmcoc2V0dGluZywgdmFsdWUsIHR0bCkgewogIGlmICh0dGwpIHsKICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpOwogICAgdmFsdWUgPSB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgX2V4cGlyZTogbm93LmdldFRpbWUoKSArIHR0bAogICAgfTsKICB9CgogIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHNldHRpbmcsIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGdldFNldHRpbmcoc2V0dGluZykgewogIHRyeSB7CiAgICB2YXIgc3RvcmVkVmFsdWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShzZXR0aW5nKTsKCiAgICBpZiAoIXN0b3JlZFZhbHVlKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIHZhciB2YWx1ZSA9IEpTT04ucGFyc2Uoc3RvcmVkVmFsdWUpOwogICAgdmFyIG5vdyA9IG5ldyBEYXRlKCk7CgogICAgaWYgKHZhbHVlLl9leHBpcmUgJiYgbm93LmdldFRpbWUoKSA+IHZhbHVlLl9leHBpcmUpIHsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oc2V0dGluZyk7CiAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIHJldHVybiB2YWx1ZTsKICB9IGNhdGNoIChlKSB7CiAgICByZXR1cm4gbnVsbDsKICB9Cn0KZXhwb3J0IGZ1bmN0aW9uIHNhdmVTZXR0aW5nV2l0aEFwcFZlcnNpb24oc2V0dGluZywgdmFsdWUpIHsKICBzYXZlU2V0dGluZyhzZXR0aW5nLCB7CiAgICB2ZXJzaW9uOiBhcHBDb25zdGFudHMuVkVSU0lPTiwKICAgIHZhbHVlOiB2YWx1ZQogIH0pOwp9CmV4cG9ydCBmdW5jdGlvbiBnZXRTZXR0aW5nU2FtZUFwcFZlcnNpb24oc2V0dGluZykgewogIHZhciB2ZXJzaW9uTGV2ZWwgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDI7CiAgdmFyIGRhdGEgPSBnZXRTZXR0aW5nKHNldHRpbmcpOwogIHJldHVybiBkYXRhICYmIGRhdGEudmVyc2lvbiAmJiBhcHBVdGlsc0lzU2FtZVZlcnNpb24oZGF0YS52ZXJzaW9uLCB2ZXJzaW9uTGV2ZWwpID8gZGF0YS52YWx1ZSA6IG51bGw7Cn0="},{"version":3,"sources":["/Users/cristiandan/Desktop/lifestyle-ui/src/core/utils/storageUtils.js"],"names":["appConstants","isSameVersion","appUtilsIsSameVersion","saveSetting","setting","value","ttl","now","Date","_expire","getTime","localStorage","setItem","JSON","stringify","getSetting","storedValue","getItem","parse","removeItem","e","saveSettingWithAppVersion","version","VERSION","getSettingSameAppVersion","versionLevel","data"],"mappings":"AAAA,OAAOA,YAAP,MAAyB,iBAAzB;AACA,SACIC,aAAa,IAAIC,qBADrB,QAEO,YAFP;AAIA,OAAO,SAASC,WAAT,CAAsBC,OAAtB,EAA+BC,KAA/B,EAAsCC,GAAtC,EAA4C;AAC/C,MAAKA,GAAL,EAAW;AACP,QAAMC,GAAG,GAAG,IAAIC,IAAJ,EAAZ;AACAH,IAAAA,KAAK,GAAG;AACJA,MAAAA,KAAK,EAAEA,KADH;AAEJI,MAAAA,OAAO,EAAEF,GAAG,CAACG,OAAJ,KAAgBJ;AAFrB,KAAR;AAIH;;AACDK,EAAAA,YAAY,CAACC,OAAb,CAAsBR,OAAtB,EAA+BS,IAAI,CAACC,SAAL,CAAgBT,KAAhB,CAA/B;AACH;AAED,OAAO,SAASU,UAAT,CAAsBX,OAAtB,EAAgC;AACnC,MAAI;AACA,QAAMY,WAAW,GAAGL,YAAY,CAACM,OAAb,CAAsBb,OAAtB,CAApB;;AACA,QAAK,CAACY,WAAN,EAAoB;AAChB,aAAO,IAAP;AACH;;AACD,QAAMX,KAAK,GAAGQ,IAAI,CAACK,KAAL,CAAYF,WAAZ,CAAd;AACA,QAAMT,GAAG,GAAG,IAAIC,IAAJ,EAAZ;;AAEA,QAAKH,KAAK,CAACI,OAAN,IAAiBF,GAAG,CAACG,OAAJ,KAAgBL,KAAK,CAACI,OAA5C,EAAsD;AAClDE,MAAAA,YAAY,CAACQ,UAAb,CAAyBf,OAAzB;AACA,aAAO,IAAP;AACH;;AAED,WAAOC,KAAP;AACH,GAdD,CAcE,OAAQe,CAAR,EAAY;AACV,WAAO,IAAP;AACH;AACJ;AAED,OAAO,SAASC,yBAAT,CAAqCjB,OAArC,EAA8CC,KAA9C,EAAsD;AACzDF,EAAAA,WAAW,CAAEC,OAAF,EAAW;AAAEkB,IAAAA,OAAO,EAAEtB,YAAY,CAACuB,OAAxB;AAAiClB,IAAAA,KAAK,EAALA;AAAjC,GAAX,CAAX;AACH;AAED,OAAO,SAASmB,wBAAT,CAAoCpB,OAApC,EAAgE;AAAA,MAAnBqB,YAAmB,uEAAJ,CAAI;AACnE,MAAMC,IAAI,GAAGX,UAAU,CAAGX,OAAH,CAAvB;AAEA,SAAOsB,IAAI,IAAIA,IAAI,CAACJ,OAAb,IAAwBpB,qBAAqB,CAAEwB,IAAI,CAACJ,OAAP,EAAgBG,YAAhB,CAA7C,GAA8EC,IAAI,CAACrB,KAAnF,GAA2F,IAAlG;AACH","sourcesContent":["import appConstants from './constants/app';\r\nimport {\r\n    isSameVersion as appUtilsIsSameVersion\r\n} from './appUtils';\r\n\r\nexport function saveSetting( setting, value, ttl ) {\r\n    if ( ttl ) {\r\n        const now = new Date();\r\n        value = {\r\n            value: value,\r\n            _expire: now.getTime() + ttl,\r\n        };\r\n    }\r\n    localStorage.setItem( setting, JSON.stringify( value ) );\r\n}\r\n\r\nexport function getSetting ( setting ) {\r\n    try {\r\n        const storedValue = localStorage.getItem( setting );\r\n        if ( !storedValue ) {\r\n            return null;\r\n        }\r\n        const value = JSON.parse( storedValue );\r\n        const now = new Date();\r\n\r\n        if ( value._expire && now.getTime() > value._expire ) {\r\n            localStorage.removeItem( setting );\r\n            return null;\r\n        }\r\n\r\n        return value;\r\n    } catch ( e ) {\r\n        return null;\r\n    }\r\n}\r\n\r\nexport function saveSettingWithAppVersion ( setting, value ) {\r\n    saveSetting( setting, { version: appConstants.VERSION, value } );\r\n}\r\n\r\nexport function getSettingSameAppVersion ( setting, versionLevel = 2 ) {\r\n    const data = getSetting ( setting );\r\n\r\n    return data && data.version && appUtilsIsSameVersion( data.version, versionLevel ) ? data.value : null;\r\n}"]}]}