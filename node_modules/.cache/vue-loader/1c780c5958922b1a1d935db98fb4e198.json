{"remainingRequest":"/Users/cristiandan/Desktop/proiect-licenta-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cristiandan/Desktop/proiect-licenta-front/src/core/views/event/TheEvent/EventReservation.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/cristiandan/Desktop/proiect-licenta-front/src/core/views/event/TheEvent/EventReservation.vue","mtime":1645805364022},{"path":"/Users/cristiandan/Desktop/proiect-licenta-front/node_modules/cache-loader/dist/cjs.js","mtime":1637061222564},{"path":"/Users/cristiandan/Desktop/proiect-licenta-front/node_modules/babel-loader/lib/index.js","mtime":1637061222406},{"path":"/Users/cristiandan/Desktop/proiect-licenta-front/node_modules/cache-loader/dist/cjs.js","mtime":1637061222564},{"path":"/Users/cristiandan/Desktop/proiect-licenta-front/node_modules/vue-loader/lib/index.js","mtime":1637061260528}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IGlzRW1wdHkgZnJvbSAnbG9kYXNoL2lzRW1wdHknOwppbXBvcnQgeyBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCc7CmltcG9ydCBXYXJuQmVmb3JlTGVhdmUgZnJvbSAnQGNvcmUvbWl4aW5zL1dhcm5CZWZvcmVMZWF2ZSc7CmltcG9ydCB6SW5kZXggZnJvbSAnQHNjc3MvbWl4aW5zL196LWluZGV4LWV4cG9ydC1qcy5zY3NzJzsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdFdmVudFJlc2VydmF0aW9uJywKICAgIG1peGluczogWwogICAgICAgIFdhcm5CZWZvcmVMZWF2ZQogICAgXSwKICAgIHByb3BzOiB7CiAgICAgICAgcGF5bG9hZDogewogICAgICAgICAgICB0eXBlOiBPYmplY3QsCiAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+ICgge30gKQogICAgICAgIH0KICAgIH0sCiAgICBpMThuT3B0aW9uczogewogICAgICAgIG5hbWVzcGFjZXM6ICdtYWluJywKICAgICAgICBrZXlQcmVmaXg6ICd2aWV3cy5ldmVudC50aGVFdmVudCcKICAgIH0sCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGJ1c0V2ZW50UHJvZ3Jlc3NTdGVwOiBuZXcgVnVlKCApLAogICAgICAgIH07CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIC4uLm1hcEFjdGlvbnMoIHsKICAgICAgICAgICAgYWRkSXRlbVRvQ2FydCAgICAgICAgICAgICAgICAgICA6ICdjYXJ0L2FkZEl0ZW0nLAogICAgICAgICAgICBpbnN0YW50RGVsZXRlQ3VycmVudENhcnQgICAgICAgIDogJ2NhcnQvaW5zdGFudERlbGV0ZUN1cnJlbnRDYXJ0JwogICAgICAgIH0gKSwKICAgICAgICBzaG93UHJvZ3Jlc3NBbmltYXRpb25Nb2RhbCggcGF5bG9hZCApIHsKICAgICAgICAgICAgbGV0IGNhcnRJZDsKCiAgICAgICAgICAgIHRoaXMuJG1vZGFsLnNob3coCiAgICAgICAgICAgICAgICBpbXBvcnQgKCAnQGNvcmUvc2hhcmVkL2NvbXBvbmVudHMvbW9kYWxzL1Byb2dyZXNzU3RlcEFuaW1hdGlvbk1vZGFsLnZ1ZScgKSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy4kdCggJ3Byb2dyZXNzU3RlcEFuaW1hdGlvbk1vZGFsLnRpdGxlJyApLAogICAgICAgICAgICAgICAgICAgIGxhYmVsczogWyAKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kdCggJ3Byb2dyZXNzU3RlcEFuaW1hdGlvbk1vZGFsLmxhYmVscy5zdGVwMUF2YWlsYWJpbGl0eScgKSwgCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHQoICdwcm9ncmVzc1N0ZXBBbmltYXRpb25Nb2RhbC5sYWJlbHMuc3RlcDJSZXNlcnZpbmcnICksIAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiR0KCAncHJvZ3Jlc3NTdGVwQW5pbWF0aW9uTW9kYWwubGFiZWxzLnN0ZXAzQWRkaW5nVG9DYXJ0JyApCiAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICBidXNFdmVudDogdGhpcy5idXNFdmVudFByb2dyZXNzU3RlcAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBzdHlsZTogYHotaW5kZXg6ICR7ekluZGV4LmhpZ2hlc3R9YCwKICAgICAgICAgICAgICAgICAgICAnbm8tY2xpY2stYW5pbWF0aW9uJzogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBwZXJzaXN0ZW50OiB0cnVlLAogICAgICAgICAgICAgICAgICAgIHNjcm9sbGFibGU6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIGZ1bGxzY3JlZW46IHRydWUsCiAgICAgICAgICAgICAgICAgICAgJ2hpZGUtb3ZlcmxheSc6IHRydWUKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgb3BlbjogYXN5bmMgKCApID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idXNFdmVudFByb2dyZXNzU3RlcC4kZW1pdCggJ2dvLXRvLXN0ZXAnLCAzICk7CgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndhcm5CZWZvcmVMZWF2ZU1lc3NhZ2UgPSB0aGlzLiR0KCAnX2NvbW1vbjptZXNzYWdlcy5sZWF2ZVJvdXRlRHVyaW5nUmVzZXJ2YXRpb25Db25maXJtJyApOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcmNlV2FybkJlZm9yZUxlYXZlTWl4aW4oICk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhcnRJZCA9IGF3YWl0IHRoaXMuYWRkSXRlbVRvQ2FydCggcGF5bG9hZCApOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVuYmluZFdhcm5CZWZvcmVZb3VMZWF2ZU1peGluKCApOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGNhcnRJZCApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdGhpcy5fZGVzdHJveWVkICkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFudERlbGV0ZUN1cnJlbnRDYXJ0KCApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idXNFdmVudFByb2dyZXNzU3RlcC4kZW1pdCggJ2dvLXRvLWVuZCcgKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnVzRXZlbnRQcm9ncmVzc1N0ZXAuJGVtaXQoICdjbG9zZScgKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgYmVmb3JlQ2xvc2U6ICggKSA9PiB7IAogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGNhcnRJZCApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdGhpcy5fZGVzdHJveWVkICkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFudERlbGV0ZUN1cnJlbnRDYXJ0KCApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSggeyBuYW1lOiAnY2FydENoZWNrb3V0JywgcGFyYW1zOiB7IGNhcnRJZCB9IH0gKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKCB7IG5hbWU6ICdldmVudCcsIHBhcmFtczogeyBpZDogdGhpcy4kcm91dGUucGFyYW1zLmlkIH0gfSApOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApOwogICAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVkKCkgewogICAgICAgIGlmICggIWlzRW1wdHkoIHRoaXMucGF5bG9hZCApICkgewogICAgICAgICAgICB0aGlzLnNob3dQcm9ncmVzc0FuaW1hdGlvbk1vZGFsKCB0aGlzLnBheWxvYWQgKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSggeyBuYW1lOiAnZXZlbnQnLCBwYXJhbXM6IHsgaWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy5pZCB9IH0gKTsKICAgICAgICB9CiAgICB9LAogICAgZGVzdHJveWVkKCApIHsKICAgICAgICB0aGlzLl9kZXN0cm95ZWQgPSB0cnVlOwogICAgfQp9Owo="},{"version":3,"sources":["EventReservation.vue"],"names":[],"mappings":";;;;;AAKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EventReservation.vue","sourceRoot":"src/core/views/event/TheEvent","sourcesContent":["<template>\n    <div></div>\n</template>\n\n<script>\n    import Vue from 'vue';\n    import isEmpty from 'lodash/isEmpty';\n    import { mapActions } from 'vuex';\n    import WarnBeforeLeave from '@core/mixins/WarnBeforeLeave';\n    import zIndex from '@scss/mixins/_z-index-export-js.scss';\n\n    export default {\n        name: 'EventReservation',\n        mixins: [\n            WarnBeforeLeave\n        ],\n        props: {\n            payload: {\n                type: Object,\n                default: () => ( {} )\n            }\n        },\n        i18nOptions: {\n            namespaces: 'main',\n            keyPrefix: 'views.event.theEvent'\n        },\n        data() {\n            return {\n                busEventProgressStep: new Vue( ),\n            };\n        },\n        methods: {\n            ...mapActions( {\n                addItemToCart                   : 'cart/addItem',\n                instantDeleteCurrentCart        : 'cart/instantDeleteCurrentCart'\n            } ),\n            showProgressAnimationModal( payload ) {\n                let cartId;\n\n                this.$modal.show(\n                    import ( '@core/shared/components/modals/ProgressStepAnimationModal.vue' ),\n                    {\n                        title: this.$t( 'progressStepAnimationModal.title' ),\n                        labels: [ \n                            this.$t( 'progressStepAnimationModal.labels.step1Availability' ), \n                            this.$t( 'progressStepAnimationModal.labels.step2Reserving' ), \n                            this.$t( 'progressStepAnimationModal.labels.step3AddingToCart' )\n                        ],\n                        busEvent: this.busEventProgressStep\n                    },\n                    {\n                        style: `z-index: ${zIndex.highest}`,\n                        'no-click-animation': true,\n                        persistent: true,\n                        scrollable: false,\n                        fullscreen: true,\n                        'hide-overlay': true\n                    },\n                    {\n                        open: async ( ) => {\n                            this.busEventProgressStep.$emit( 'go-to-step', 3 );\n\n                            this.warnBeforeLeaveMessage = this.$t( '_common:messages.leaveRouteDuringReservationConfirm' );\n                            this.forceWarnBeforeLeaveMixin( );\n                            cartId = await this.addItemToCart( payload );\n                            this.unbindWarnBeforeYouLeaveMixin( );\n                            if ( cartId ) {\n                                if ( this._destroyed ) {\n                                    this.instantDeleteCurrentCart( );\n                                }\n                                this.busEventProgressStep.$emit( 'go-to-end' );\n                            } else {\n                                this.busEventProgressStep.$emit( 'close' );\n                            }\n                        },\n                        beforeClose: ( ) => { \n                            if ( cartId ) {\n                                if ( this._destroyed ) {\n                                    this.instantDeleteCurrentCart( );\n                                } else {\n                                    this.$router.replace( { name: 'cartCheckout', params: { cartId } } );\n                                }\n                            } else {\n                                this.$router.replace( { name: 'event', params: { id: this.$route.params.id } } );\n                            }\n                        }\n                    }\n                );\n            }\n        },\n        created() {\n            if ( !isEmpty( this.payload ) ) {\n                this.showProgressAnimationModal( this.payload );\n            } else {\n                this.$router.replace( { name: 'event', params: { id: this.$route.params.id } } );\n            }\n        },\n        destroyed( ) {\n            this._destroyed = true;\n        }\n    };\n</script>"]}]}