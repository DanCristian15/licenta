{"remainingRequest":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cristiandan/Desktop/lifestyle-ui/src/tenants/ticketmaster/app/views/event/TheEvent.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/cristiandan/Desktop/lifestyle-ui/src/tenants/ticketmaster/app/views/event/TheEvent.vue","mtime":1645805365988},{"path":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/cache-loader/dist/cjs.js","mtime":1637061222564},{"path":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/babel-loader/lib/index.js","mtime":1637061222406},{"path":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/cache-loader/dist/cjs.js","mtime":1637061222564},{"path":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/vue-loader/lib/index.js","mtime":1637061260528}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBIZWFkZXIgZnJvbSAnQHRlbmFudC9hcHAvbGF5b3V0cy9jb21wb25lbnRzL0hlYWRlci52dWUnOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBkZWJvdW5jZSBmcm9tICdsb2Rhc2gvZGVib3VuY2UnOwppbXBvcnQgaXNFcXVhbCBmcm9tICdsb2Rhc2gvaXNFcXVhbCc7CmltcG9ydCBjbG9uZURlZXAgZnJvbSAnbG9kYXNoL2Nsb25lRGVlcCc7CmltcG9ydCB7IG1hcEFjdGlvbnMsIG1hcFN0YXRlLCBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IHJlZGlyZWN0VG9Ib21lIGFzIHRlbmFudFJlZGlyZWN0VG9Ib21lIH0gZnJvbSAnQHRlbmFudC9hcHAvdXRpbHMvdGVuYW50VXJsc2xVdGlscyc7CmltcG9ydCBldmVudENvbnN0YW50cyBmcm9tICdAY29yZS91dGlscy9jb25zdGFudHMvZXZlbnQnOwppbXBvcnQgYXBpQ29uc3RhbnRzIGZyb20gJ0Bjb3JlL3V0aWxzL2NvbnN0YW50cy9hcGknOwppbXBvcnQgbGlzdENvbnN0YW50cyBmcm9tICdAY29yZS91dGlscy9jb25zdGFudHMvbGlzdCc7CmltcG9ydCB7CiAgICBpc0FmdGVyIGFzIGRhdGVVdGlsc0lzQWZ0ZXIsCiAgICBkaWZmZXJlbmNlSW5TZWNvbmRzIGFzIGRhdGVVdGlsc0RpZmZlcmVuY2VJblNlY29uZHMKfSBmcm9tICdAY29yZS91dGlscy9kYXRlVXRpbHMnOwppbXBvcnQgewogICAgaGFzVGlja2V0QXZhaWxhYmxlIGFzIGV2ZW50VXRpbHNIYXNUaWNrZXRBdmFpbGFibGUKfSBmcm9tICdAY29yZS91dGlscy9ldmVudFV0aWxzJzsKaW1wb3J0IHsgZ2V0RnJvbUFwaVJlc3BvbnNlIGFzIG5vdGlmaWNhdGlvblV0aWxzR2V0RnJvbUFwaVJlc3BvbnNlIH0gZnJvbSAnQGNvcmUvdXRpbHMvbm90aWZpY2F0aW9uVXRpbHMnOwppbXBvcnQgYXN5bmNQYXJhbGxlbCBmcm9tICdAY29yZS91dGlscy9hc3luY1BhcmFsbGVsJzsKaW1wb3J0IEVudGl0eU5vdEZvdW5kUmVkaXJlY3Q0MDQgZnJvbSAnQGNvcmUvbWl4aW5zL0VudGl0eU5vdEZvdW5kUmVkaXJlY3Q0MDQnOwppbXBvcnQgRGF0YUxvYWRpbmcgZnJvbSAnQGNvcmUvc2hhcmVkL2NvbXBvbmVudHMvbG9hZGluZy9EYXRhTG9hZGluZy52dWUnOwppbXBvcnQgQXBpQ2FuY2VsU2VydmljZSBmcm9tICdAc2VydmljZXMvQXBpQ2FuY2VsU2VydmljZSc7CmltcG9ydCBFdmVudEJhbm5lciBmcm9tICcuL1RoZUV2ZW50L0V2ZW50QmFubmVyLnZ1ZSc7CmltcG9ydCBFdmVudFRpY2tldExpc3QgZnJvbSAnLi9UaGVFdmVudC9FdmVudFRpY2tldExpc3QudnVlJzsKaW1wb3J0IEV2ZW50VGlja2V0RmlsdGVyIGZyb20gJy4vVGhlRXZlbnQvRXZlbnRUaWNrZXRGaWx0ZXIudnVlJzsKaW1wb3J0IEV2ZW50VGlja2V0SW1hZ2UgZnJvbSAnLi9UaGVFdmVudC9FdmVudFRpY2tldEltYWdlLnZ1ZSc7CmltcG9ydCBFdmVudFZlbnVlSW1hZ2UgZnJvbSAnLi9UaGVFdmVudC9FdmVudFZlbnVlSW1hZ2UudnVlJzsKaW1wb3J0IEhlYWx0aENoZWNrQ29uZmlybWF0aW9uTW9kYWwgZnJvbSAnLi9UaGVFdmVudC9IZWFsdGhDaGVja0NvbmZpcm1hdGlvbk1vZGFsL0hlYWx0aENoZWNrQ29uZmlybWF0aW9uTW9kYWwnOwppbXBvcnQgU2VjdGlvbnNMaXN0IGZyb20gJy4vVGhlRXZlbnQvU2VjdGlvbnNMaXN0JzsKaW1wb3J0IEV2ZW50U2VjdGlvbnNGaWx0ZXJzIGZyb20gJy4vVGhlRXZlbnQvRXZlbnRTZWN0aW9uc0ZpbHRlcnMnOwppbXBvcnQgU2VjdGlvbkRldGFpbFNpZGViYXIgZnJvbSAnLi9UaGVFdmVudC9TZWN0aW9uRGV0YWlsU2lkZWJhcic7Cgpjb25zdCBTVE9SRV9OQU1FID0gJ2V2ZW50cyc7CmNvbnN0IFNUT1JFX05BTUVfUEFDS0FHRVMgPSAncGFja2FnZU9mZmVycyc7Cgpjb25zdCBDT05GSUdfVElDS0VUUyA9IHsKICAgIExJTUlUOiAyMCwKICAgIEZJTFRFUl9ERUZBVUxUOiB7CiAgICAgICAgUVVBTlRJVFk6IDIsCiAgICAgICAgTUlOX1FVQU5USVRZOiAxLAogICAgICAgIE1BWF9RVUFOVElUWTogNTAsCiAgICAgICAgUFJJQ0U6IHsKICAgICAgICAgICAgTUlOOiAwLAogICAgICAgICAgICBNQVg6IDUwMDAsCiAgICAgICAgICAgIENVUlJFTkNZOiAnJwogICAgICAgIH0sCiAgICAgICAgQUNDRVNTSUJJTElUWTogZmFsc2UsCiAgICB9LAogICAgRklMVEVSX0JVTkRMRV9ERUZBVUxUOiB7CiAgICAgICAgUVVBTlRJVFk6IDIsCiAgICAgICAgTUlOX1FVQU5USVRZOiAyLAogICAgICAgIE1BWF9RVUFOVElUWTogNTAKICAgIH0KfTsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdUaGVFdmVudCcsCiAgICBjb21wb25lbnRzOiB7CiAgICAgICAgU2VjdGlvbkRldGFpbFNpZGViYXIsCiAgICAgICAgSGVhZGVyLAogICAgICAgIERhdGFMb2FkaW5nLAogICAgICAgIEV2ZW50QmFubmVyLAogICAgICAgIEV2ZW50VGlja2V0TGlzdCwKICAgICAgICBFdmVudFRpY2tldEZpbHRlciwKICAgICAgICBFdmVudFRpY2tldEltYWdlLAogICAgICAgIEV2ZW50VmVudWVJbWFnZSwKICAgICAgICBTZWN0aW9uc0xpc3QsCiAgICAgICAgRXZlbnRTZWN0aW9uc0ZpbHRlcnMsCiAgICAgICAgRXZlbnROb3RBdmFpbGFibGU6ICggKSA9PiBpbXBvcnQoICcuL1RoZUV2ZW50L0V2ZW50Tm90QXZhaWxhYmxlLnZ1ZScgKSwKICAgICAgICBFdmVudFRpY2tldEFkZGlvbmFsRmlsdGVyc1NpZGViYXI6ICgpID0+IGltcG9ydCggJy4vVGhlRXZlbnQvRXZlbnRUaWNrZXRBZGRpb25hbEZpbHRlcnNTaWRlYmFyJyApLAogICAgICAgIEV2ZW50VGlja2V0RGV0YWlsU2lkZWJhcjogKCkgPT4gaW1wb3J0KCAnLi9UaGVFdmVudC9FdmVudFRpY2tldERldGFpbFNpZGViYXInICkKICAgIH0sCiAgICBpMThuT3B0aW9uczogewogICAgICAgIG5hbWVzcGFjZXM6ICdtYWluJywKICAgICAgICBrZXlQcmVmaXg6ICd2aWV3cy5ldmVudC50aGVFdmVudCcKICAgIH0sCiAgICB0ZXN0SWRPcHRpb25zOiB7CiAgICAgICAga2V5UHJlZml4OiAnZXZlbnQnCiAgICB9LAogICAgbWl4aW5zOiBbCiAgICAgICAgRW50aXR5Tm90Rm91bmRSZWRpcmVjdDQwNCwKICAgIF0sCiAgICBkYXRhKCApIHsKICAgICAgICBjb25zdCBkZWZhdWx0U29ydCA9IHsgdmFsdWU6ICdwcmljZScsICdkaXNwbGF5JzogdGhpcy4kdCggJ19jb21tb246dGVybXMubG93ZXN0UHJpY2UnICkgfTsKCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgICAgICAgdGlja2V0czogWyBdLAogICAgICAgICAgICBzZWN0aW9uczogWyBdLAogICAgICAgICAgICB0b3RhbFRpY2tldHM6IDAsCiAgICAgICAgICAgIG9mZmVyc01hcDogeyB9LAogICAgICAgICAgICB0aWNrZXRUeXBlc01hcDogeyB9LAogICAgICAgICAgICB2ZW51ZURldGFpbHM6IHsKICAgICAgICAgICAgICAgIG1hcFVybDogJycsCiAgICAgICAgICAgICAgICBtYXBXaXRobGFiZWxzVXJsOiAnJwogICAgICAgICAgICB9LAogICAgICAgICAgICBldmVudDogeyB9LAogICAgICAgICAgICBzZWxlY3RlZEhvdGVsUmVzZXJ2YXRpb246IG51bGwsCiAgICAgICAgICAgIGhpZ2hsaWdodGVkVGlja2V0OiBudWxsLAogICAgICAgICAgICBoaWdobGlnaHRlZFNlY3Rpb246IG51bGwsCiAgICAgICAgICAgIHNlbGVjdGVkVGlja2V0OiBudWxsLAogICAgICAgICAgICBzZWxlY3RlZFNlY3Rpb246IG51bGwsCiAgICAgICAgICAgIHNob3dBZGRpb25hbFRpY2tldEZpbHRlcnM6IGZhbHNlLAogICAgICAgICAgICBkZWZhdWx0U29ydDogZGVmYXVsdFNvcnQsCiAgICAgICAgICAgIHNvcnQ6IHsKICAgICAgICAgICAgICAgIHZhbHVlOiBkZWZhdWx0U29ydCwKICAgICAgICAgICAgICAgIG9wdGlvbnM6IFsKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0U29ydCwKICAgICAgICAgICAgICAgICAgICB7IHZhbHVlOiAncXVhbGl0eScsICdkaXNwbGF5JzogdGhpcy4kdCggJ19jb21tb246dGVybXMuYmVzdFNlYXRzJyApIH0sCiAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZpbHRlcjogewogICAgICAgICAgICAgICAgcXVhbnRpdHk6IENPTkZJR19USUNLRVRTLkZJTFRFUl9ERUZBVUxULlFVQU5USVRZLAogICAgICAgICAgICAgICAgcHJpY2U6IHsKICAgICAgICAgICAgICAgICAgICByYW5nZTogWyBDT05GSUdfVElDS0VUUy5GSUxURVJfREVGQVVMVC5QUklDRS5NSU4sIENPTkZJR19USUNLRVRTLkZJTFRFUl9ERUZBVUxULlBSSUNFLk1BWCBdLAogICAgICAgICAgICAgICAgICAgIG1pbjogQ09ORklHX1RJQ0tFVFMuRklMVEVSX0RFRkFVTFQuUFJJQ0UuTUlOLAogICAgICAgICAgICAgICAgICAgIG1heDogQ09ORklHX1RJQ0tFVFMuRklMVEVSX0RFRkFVTFQuUFJJQ0UuTUFYLAogICAgICAgICAgICAgICAgICAgIGN1cnJlbmN5OiBDT05GSUdfVElDS0VUUy5GSUxURVJfREVGQVVMVC5QUklDRS5RVUFOVElUWQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGFjY2Vzc2liaWxpdHk6IENPTkZJR19USUNLRVRTLkZJTFRFUl9ERUZBVUxULkFDQ0VTU0lCSUxJVFkKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZmlsdGVyT3B0aW9uczogewogICAgICAgICAgICAgICAgY3VycmVudDogewogICAgICAgICAgICAgICAgICAgIGFjY2Vzc2liaWxpdHlFbmFibGVkOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBtaW5RdWFudGl0eTogQ09ORklHX1RJQ0tFVFMuRklMVEVSX0RFRkFVTFQuTUlOX1FVQU5USVRZLAogICAgICAgICAgICAgICAgICAgIG1heFF1YW50aXR5OiBDT05GSUdfVElDS0VUUy5GSUxURVJfREVGQVVMVC5NQVhfUVVBTlRJVFkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBub0FjY2VzYWJpbGl0eTogewogICAgICAgICAgICAgICAgICAgIG1pblF1YW50aXR5OiBDT05GSUdfVElDS0VUUy5GSUxURVJfREVGQVVMVC5NSU5fUVVBTlRJVFksCiAgICAgICAgICAgICAgICAgICAgbWF4UXVhbnRpdHk6IENPTkZJR19USUNLRVRTLkZJTFRFUl9ERUZBVUxULk1BWF9RVUFOVElUWQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGFjY2Vzc2liaWxpdHk6IHsKICAgICAgICAgICAgICAgICAgICBtaW5RdWFudGl0eTogQ09ORklHX1RJQ0tFVFMuRklMVEVSX0RFRkFVTFQuTUlOX1FVQU5USVRZLAogICAgICAgICAgICAgICAgICAgIG1heFF1YW50aXR5OiBDT05GSUdfVElDS0VUUy5GSUxURVJfREVGQVVMVC5NQVhfUVVBTlRJVFksCiAgICAgICAgICAgICAgICAgICAgY29tcGFuaW9uTWluUXVhbnRpdHk6IENPTkZJR19USUNLRVRTLkZJTFRFUl9ERUZBVUxULk1JTl9RVUFOVElUWSwKICAgICAgICAgICAgICAgICAgICBjb21wYW5pb25NYXhRdWFudGl0eTogQ09ORklHX1RJQ0tFVFMuRklMVEVSX0RFRkFVTFQuTUFYX1FVQU5USVRZCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZpbHRlclNlY3Rpb25PcHRpb25zOiB7CiAgICAgICAgICAgICAgICBhY2Nlc3NpYmlsaXR5RW5hYmxlZDogZmFsc2UsCiAgICAgICAgICAgICAgICBtaW5RdWFudGl0eTogQ09ORklHX1RJQ0tFVFMuRklMVEVSX0JVTkRMRV9ERUZBVUxULk1JTl9RVUFOVElUWSwKICAgICAgICAgICAgICAgIG1heFF1YW50aXR5OiBDT05GSUdfVElDS0VUUy5GSUxURVJfQlVORExFX0RFRkFVTFQuTUFYX1FVQU5USVRZCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGJ1c0V2ZW50OiBuZXcgVnVlKCApLAogICAgICAgICAgICBsb2FkaW5nVGlja2V0czogZmFsc2UsCiAgICAgICAgICAgIGlzRXZlbnRUaWNrZXRzTWFpbnRlbmFuY2U6IGZhbHNlLAogICAgICAgICAgICB1c2VyQW5hbHl0aWNzOiBmYWxzZSwKICAgICAgICAgICAgbGFzdEFwcGxpZWRGaWx0ZXI6IHsgfSwKICAgICAgICAgICAgcHJldmlvdXNSb3V0ZTogeyB9LAogICAgICAgICAgICBpc1BhY2thZ2VGbG93OiBmYWxzZQogICAgICAgIH07CiAgICB9LAogICAgY29tcHV0ZWQ6IHsKICAgICAgICAuLi5tYXBTdGF0ZSggewogICAgICAgICAgICBpdGVtOiAgICAgICAgICAgICAgIHN0YXRlID0+IHN0YXRlW1NUT1JFX05BTUVdLmRldGFpbCwKICAgICAgICAgICAgZm9yY2VEeW5hbWljRmxvdzogICBzdGF0ZSA9PiBzdGF0ZS5hcHBTdGF0ZS5mb3JjZUR5bmFtaWNGbG93CiAgICAgICAgfSApLAogICAgICAgIC4uLm1hcEdldHRlcnMoIHsKICAgICAgICAgICAgaGFzUGFja2FnZUJ5RXZlbnRJZCAgICAgICAgICAgICA6IGAke1NUT1JFX05BTUVfUEFDS0FHRVN9L2hhc0J5RXZlbnRJZGAsCiAgICAgICAgICAgIGdldEF2YWlsYWJsZSAgICAgICAgICAgICAgICAgICAgOiBgJHtTVE9SRV9OQU1FX1BBQ0tBR0VTfS9nZXRBdmFpbGFibGVgLAogICAgICAgICAgICBsb2FkaW5nU2VjdGlvbnMgICAgICAgICAgICAgICAgIDogYCR7U1RPUkVfTkFNRV9QQUNLQUdFU30vZ2V0TG9hZGluZ2AsCiAgICAgICAgICAgIGlzRm9yY2VkRHluYW1pY0Zsb3cgICAgICAgICAgICAgOiAnYXBwU3RhdGUvaXNGb3JjZWREeW5hbWljRmxvdycKICAgICAgICB9ICksCiAgICAgICAgcm91dGVJZCggKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQ7CiAgICAgICAgfSwKICAgICAgICBpdGVtSWQoICkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5ldmVudC5pZDsKICAgICAgICB9LAogICAgICAgIHZlbnVlU2VhdE1hcFVybCggKSB7CiAgICAgICAgICAgIGlmKCB0aGlzLmlzUGFja2FnZUZsb3cgKSB7CiAgICAgICAgICAgICAgICBpZiggdGhpcy5zZWxlY3RlZFNlY3Rpb24gKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWRTZWN0aW9uLnZlbnVlU2VhdE1hcFVybDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiggdGhpcy5oaWdobGlnaHRlZFNlY3Rpb24gKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGlnaGxpZ2h0ZWRTZWN0aW9uLnZlbnVlU2VhdE1hcFVybDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIHRoaXMuc2VsZWN0ZWRUaWNrZXQgKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZFRpY2tldC52ZW51ZVNlYXRNYXBVcmw7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCB0aGlzLmhpZ2hsaWdodGVkVGlja2V0ICkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGlnaGxpZ2h0ZWRUaWNrZXQudmVudWVTZWF0TWFwVXJsOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0sCiAgICAgICAgbm9UaWNrZXRzKCkgewogICAgICAgICAgICByZXR1cm4gJyc7CiAgICAgICAgfSwKICAgICAgICBzZWxlY3RlZFRpY2tldERldGFpbEluZm8oICkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZFRpY2tldCA/ICB0aGlzLmdldFRpY2tldERldGFpbEluZm8oIHRoaXMuc2VsZWN0ZWRUaWNrZXQgKSA6IG51bGw7CiAgICAgICAgfSwKICAgICAgICBpc01heFF1YW50aXR5QXZhaWxhYmxlKCApIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyT3B0aW9ucy5jdXJyZW50Lm1heFF1YW50aXR5ID49IENPTkZJR19USUNLRVRTLkZJTFRFUl9ERUZBVUxULk1BWF9RVUFOVElUWTsKICAgICAgICB9LAogICAgICAgIGlzRXZlbnRUaWNrZXRzU3RhdHVzRmV3QXZhaWxhYmxlKCApIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnQudGlja2V0c1N0YXR1cyA9PT0gZXZlbnRDb25zdGFudHMuVElDS0VUU19TVEFUVVMuRkVXX0FWQUlMQUJMRTsKICAgICAgICB9LAogICAgICAgIGlzRXZlbnRUaWNrZXRzTm90QXZhaWxhYmxlKCApIHsKICAgICAgICAgICAgcmV0dXJuICFldmVudFV0aWxzSGFzVGlja2V0QXZhaWxhYmxlKCB0aGlzLmV2ZW50ICk7CiAgICAgICAgfSwKICAgICAgICBpc0V2ZW50UGFja2FnZU9mZmVyc05vdEF2YWlsYWJsZSgpIHsKICAgICAgICAgICAgcmV0dXJuICF0aGlzLmlzUGFja2FnZUZsb3cgJiYgIXRoaXMubG9hZGluZ1NlY3Rpb25zICYmICF0aGlzLmlzRm9yY2VkRHluYW1pY0Zsb3c7CiAgICAgICAgfSwKICAgICAgICBpc0V2ZW50KCApIHsKICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5ldmVudC5pZDsKICAgICAgICB9LAogICAgICAgIHRpY2tldHNXaXRoT2ZmZXJzKCApIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMudGlja2V0cy5maWx0ZXIoIHRpY2tldCA9PiB0aWNrZXQub2ZmZXJzLmxlbmd0aCApOwogICAgICAgIH0sCiAgICAgICAgaGFzSGVhbHRoQ2hlY2soICkgewogICAgICAgICAgICByZXR1cm4gISF0aGlzLmV2ZW50LmhlYWx0aENoZWNrOwogICAgICAgIH0sCiAgICAgICAgbmVlZFRvU2hvd0NvbmZpcm1hdGlvbkhlYWx0aENoZWNrKCApIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFzSGVhbHRoQ2hlY2sgJiYgKCAhdGhpcy5wcmV2aW91c1JvdXRlIHx8IHRoaXMucHJldmlvdXNSb3V0ZS5uYW1lICE9PSAnY2FydENoZWNrb3V0JyApOwogICAgICAgIH0sCiAgICAgICAgY29tcG9uZW50RXZlbnRUaWNrZXREZXRhaWxTaWRlYmFyKCApIHsKICAgICAgICAgICAgcmV0dXJuICgpID0+IGltcG9ydCggJy4vVGhlRXZlbnQvRXZlbnRUaWNrZXREZXRhaWxTaWRlYmFyJyApOwogICAgICAgIH0sCiAgICAgICAgaXNVc2luZ0xlZ2FjeVJvdXRlKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4kcm91dGUubmFtZSA9PT0gJ3RtRXZlbnQnOwogICAgICAgIH0sCiAgICAgICAgZmlsdGVyU2VjdGlvbnM6IHsKICAgICAgICAgICAgZ2V0KCApIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5wYWNrYWdlT2ZmZXJzLmZpbHRlcnM7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNldCggdmFsdWUgKSB7CiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZpbHRlcnNTZWN0aW9ucyggdmFsdWUgKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICB3YXRjaDogewogICAgICAgICckcm91dGUucGFyYW1zLmlkJzogZnVuY3Rpb24oICkgewogICAgICAgICAgICB0aGlzLmxvYWREYXRhKCApOwogICAgICAgIH0sCiAgICAgICAgJ3NvcnQudmFsdWUnOiBmdW5jdGlvbiAoICkgewogICAgICAgICAgICB0aGlzLmxvYWRUaWNrZXRzKCB0cnVlICk7CiAgICAgICAgfSwKICAgICAgICAnc2hvd0FkZGlvbmFsVGlja2V0RmlsdGVycyc6IGZ1bmN0aW9uICggdmFsdWUgKSB7CiAgICAgICAgICAgIGlmICggdmFsdWUgJiYgIXRoaXMuJHZ1ZXRpZnkuYnJlYWtwb2ludC5tZEFuZFVwICkgewogICAgICAgICAgICAgICAgdGhpcy5vcGVuVGlja2V0QWRkaXRpb25hbEZpbHRlcnNNb2RhbCggKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgLi4ubWFwQWN0aW9ucyggewogICAgICAgICAgICBsb2FkT25lICAgICAgICAgICAgICAgICAgICAgICAgIDogYCR7U1RPUkVfTkFNRX0vb25lYCwKICAgICAgICAgICAgbG9hZE9uZUJ5TGVnYWN5ICAgICAgICAgICAgICAgICA6IGAke1NUT1JFX05BTUV9L29uZUJ5TGVnYWN5YCwKICAgICAgICAgICAgbG9hZEV2ZW50VGlja2V0c0F2YWlsYWJpbGl0eSAgICA6IGB0aWNrZXRzL2F2YWlsYWJpbGl0eWAsCiAgICAgICAgICAgIGxvYWRFdmVudFRpY2tldHMgICAgICAgICAgICAgICAgOiAndGlja2V0cy9nZXQnLAogICAgICAgICAgICBzaG93TG9hZGluZ092ZXJsYXkgICAgICAgICAgICAgIDogJ2FwcFN0YXRlL3NldExvYWRpbmcnLAogICAgICAgICAgICBhZGRJdGVtVG9DYXJ0ICAgICAgICAgICAgICAgICAgIDogJ2NhcnQvYWRkSXRlbScsCiAgICAgICAgICAgIGluc3RhbnREZWxldGVDdXJyZW50Q2FydCAgICAgICAgOiAnY2FydC9pbnN0YW50RGVsZXRlQ3VycmVudENhcnQnLAogICAgICAgICAgICBpbml0UGFja2FnZU9mZmVycyAgICAgICAgICAgICAgIDogYCR7U1RPUkVfTkFNRV9QQUNLQUdFU30vaW5pdGAsCiAgICAgICAgICAgIG9uZUJ5RXZlbnRJZCAgICAgICAgICAgICAgICAgICAgOiBgJHtTVE9SRV9OQU1FX1BBQ0tBR0VTfS9vbmVCeUV2ZW50SWRgLAogICAgICAgICAgICBsb2FkU2VjdGlvbnNCeUV2ZW50SWQgICAgICAgICAgIDogYCR7U1RPUkVfTkFNRV9QQUNLQUdFU30vZ2V0U2VjdGlvbnNCeUV2ZW50SWRgLAogICAgICAgICAgICB1cGRhdGVGaWx0ZXJzU2VjdGlvbnMgICAgICAgICAgIDogYCR7U1RPUkVfTkFNRV9QQUNLQUdFU30vZmlsdGVycy91cGRhdGVgLAogICAgICAgICAgICBub3RpZmljYXRpb25FcnJvciAgICAgICAgICAgICAgIDogJ25vdGlmaWNhdGlvbi9lcnJvcicsCiAgICAgICAgICAgIG5vdGlmaWNhdGlvbldhcm5pbmcgICAgICAgICAgICAgOiAnbm90aWZpY2F0aW9uL3dhcm5pbmcnLAogICAgICAgIH0gKSwKICAgICAgICBhc3luYyBsb2FkRGF0YSggKSB7CiAgICAgICAgICAgIGxldCBldmVudCwgcGFja2FnZURldGFpbHM7CgogICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICBhd2FpdCBhc3luY1BhcmFsbGVsKCBbCiAgICAgICAgICAgICAgICBhc3luYyAoICkgPT4geyBldmVudCA9ICEhdGhpcy5fZGVzdHJveWVkIHx8IGF3YWl0IHRoaXMubG9hZEV2ZW50KCApOyB9LAogICAgICAgICAgICAgICAgYXN5bmMgKCApID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRQYWNrYWdlT2ZmZXJzKCB7IGV2ZW50SWQ6IHRoaXMuaXRlbUlkIH0gKTsKICAgICAgICAgICAgICAgICAgICBwYWNrYWdlRGV0YWlscyA9ICEhdGhpcy5fZGVzdHJveWVkIHx8IGF3YWl0IHRoaXMub25lQnlFdmVudElkKCB0aGlzLnJvdXRlSWQgKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIF0sIDIgKTsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CgogICAgICAgICAgICBpZiAoIGV2ZW50ICYmICF0aGlzLmlzRXZlbnRUaWNrZXRzTm90QXZhaWxhYmxlICkgewogICAgICAgICAgICAgICAgIXRoaXMubmVlZFRvU2hvd0NvbmZpcm1hdGlvbkhlYWx0aENoZWNrIHx8IHRoaXMub3BlbkhlYWx0aENoZWNrQ29uZmlybWF0aW9uTW9kYWwoICk7CiAgICAgICAgICAgICAgICBjb25zdCBpc1BhY2thZ2VEZXRhaWxzQXZhaWxhYmxlID0gdGhpcy5nZXRBdmFpbGFibGUoIHRoaXMuaXRlbUlkICk7CgogICAgICAgICAgICAgICAgaWYgKCBpc1BhY2thZ2VEZXRhaWxzQXZhaWxhYmxlICkgewogICAgICAgICAgICAgICAgICAgICEhdGhpcy5fZGVzdHJveWVkIHx8IGF3YWl0IHRoaXMubG9hZFNlY3Rpb25zKCApOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZXZlbnREZXRhaWxzIH0gPSBwYWNrYWdlRGV0YWlscy5kYXRhOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaXNQYWNrYWdlRmxvdyA9IHRydWU7CgogICAgICAgICAgICAgICAgICAgIGlmICggIXRoaXMudmVudWVEZXRhaWxzLm1hcFVybCApIHsKICAgICAgICAgICAgICAgICAgICAgICAgVnVlLnNldCggdGhpcy52ZW51ZURldGFpbHMsICdtYXBVcmwnLCBldmVudERldGFpbHMudmVudWVNYXBXaXRoTGFiZWxzVXJsICk7CiAgICAgICAgICAgICAgICAgICAgICAgIFZ1ZS5zZXQoIHRoaXMudmVudWVEZXRhaWxzLCAnbWFwV2l0aGxhYmVsc1VybCcsIGV2ZW50RGV0YWlscy52ZW51ZU1hcFdpdGhMYWJlbHNVcmwgKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGlmICggdGhpcy5pc0V2ZW50VGlja2V0c1N0YXR1c0Zld0F2YWlsYWJsZSApIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXIucXVhbnRpdHkgPSAxOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VUaWNrZXRzID0gISF0aGlzLl9kZXN0cm95ZWQgfHwgYXdhaXQgdGhpcy5sb2FkVGlja2V0cyggdHJ1ZSApOwogICAgICAgICAgICAgICAgICAgIGlmICggcmVzcG9uc2VUaWNrZXRzLnN1Y2Nlc3MgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICEhdGhpcy5fZGVzdHJveWVkIHx8IGF3YWl0IHRoaXMubG9hZFRpY2tldHNBdmFpbGFiaWxpdHkoICk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRoaXMuYWRkRmlsdGVyV2F0Y2hlcnMoICk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLmRlZmVyUmVsb2FkRnV0dXJlT25TYWxlRGF0ZSggKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgZ2V0RXZlbnREYXRhKCkgewogICAgICAgICAgICBpZiAoIHRoaXMuaXNVc2luZ0xlZ2FjeVJvdXRlICkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9hZE9uZUJ5TGVnYWN5KCB7IGlkOiB0aGlzLnJvdXRlSWQgfSApOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gdGhpcy5sb2FkT25lKCB0aGlzLnJvdXRlSWQgKTsKICAgICAgICB9LAogICAgICAgIGFzeW5jIGxvYWRFdmVudCggKSB7CiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlRXZlbnQgPSBhd2FpdCB0aGlzLmdldEV2ZW50RGF0YSggKTsKCiAgICAgICAgICAgIGlmICggIXJlc3BvbnNlRXZlbnQgKSB7CiAgICAgICAgICAgICAgICB0aGlzLl9nb1RvTm90Rm91bmRQYWdlKCApOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBjb25zdCBnZXRNYXhQcmljZSA9ICggbWF4UHJpY2UgKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCByZXQgPSBwYXJzZUZsb2F0KCBtYXhQcmljZSApOwoKICAgICAgICAgICAgICAgIHJldHVybiByZXQgPT09IE1hdGguZmxvb3IoIHJldCApID8gcmV0IDogTWF0aC5mbG9vciggcmV0ICkgKyAxOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdGhpcy5ldmVudCA9IHJlc3BvbnNlRXZlbnQ7CiAgICAgICAgICAgIHRoaXMuZmlsdGVyLnByaWNlLm1pbiA9IDA7CiAgICAgICAgICAgIHRoaXMuZmlsdGVyLnByaWNlLm1heCA9IHRoaXMuZXZlbnQubWF4UHJpY2UgPyBnZXRNYXhQcmljZSggdGhpcy5ldmVudC5tYXhQcmljZSApIDogMDsKICAgICAgICAgICAgdGhpcy5maWx0ZXIucHJpY2UucmFuZ2UgPSBbIHRoaXMuZmlsdGVyLnByaWNlLm1pbiwgdGhpcy5maWx0ZXIucHJpY2UubWF4IF07CiAgICAgICAgICAgIHRoaXMuZmlsdGVyLnByaWNlLmN1cnJlbmN5ID0gdGhpcy5ldmVudC5jdXJyZW5jeTsKCiAgICAgICAgICAgIHJldHVybiB0aGlzLmV2ZW50OwogICAgICAgIH0sCiAgICAgICAgYXN5bmMgbG9hZFRpY2tldHNBdmFpbGFiaWxpdHkoICkgewogICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMubG9hZEV2ZW50VGlja2V0c0F2YWlsYWJpbGl0eSggeyBldmVudElkOiB0aGlzLml0ZW1JZCB9ICk7CgogICAgICAgICAgICBpZiAoIHJlc3BvbnNlLnN1Y2Nlc3MgKSB7CiAgICAgICAgICAgICAgICBpZiAoIHJlc3BvbnNlLmRhdGEgJiYgcmVzcG9uc2UuZGF0YS5hY2Nlc3NpYmlsaXR5ICkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgYWNjZXNzaWJpbGl0eSB9ID0gcmVzcG9uc2UuZGF0YTsKCiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJPcHRpb25zLmN1cnJlbnQuYWNjZXNzaWJpbGl0eUVuYWJsZWQgICAgICAgICA9IGFjY2Vzc2liaWxpdHkuZW5hYmxlZDsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlck9wdGlvbnMuYWNjZXNzaWJpbGl0eS5taW5RdWFudGl0eSAgICAgICAgICAgID0gYWNjZXNzaWJpbGl0eS5taW5MaW1pdDsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlck9wdGlvbnMuYWNjZXNzaWJpbGl0eS5tYXhRdWFudGl0eSAgICAgICAgICAgID0gYWNjZXNzaWJpbGl0eS5tYXhMaW1pdDsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlck9wdGlvbnMuYWNjZXNzaWJpbGl0eS5jb21wYW5pb25NaW5RdWFudGl0eSAgID0gYWNjZXNzaWJpbGl0eS5jb21wYW5pb25NaW5MaW1pdDsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlck9wdGlvbnMuYWNjZXNzaWJpbGl0eS5jb21wYW5pb25NYXhRdWFudGl0eSAgID0gYWNjZXNzaWJpbGl0eS5jb21wYW5pb25NYXhMaW1pdDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgbG9hZFRpY2tldHMoIHJlZnJlc2ggPSBmYWxzZSApIHsKICAgICAgICAgICAgY29uc3QgY2xlYXJEYXRhID0gKCApID0+IHsKICAgICAgICAgICAgICAgIHRoaXMudGlja2V0cyA9IFtdOwogICAgICAgICAgICAgICAgdGhpcy5vZmZlcnNNYXAgPSB7fTsKICAgICAgICAgICAgICAgIHRoaXMudGlja2V0VHlwZXNNYXAgPSB7fTsKICAgICAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0ZWRUaWNrZXQgPSBudWxsOwogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFRpY2tldCA9IG51bGw7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBjb25zdCBnZXRTZWFyY2hQYXJhbXMgPSAoICkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgeyBwcmljZSwgYWNjZXNzaWJpbGl0eSwgcXVhbnRpdHkgfSA9IHRoaXMuZmlsdGVyOwogICAgICAgICAgICAgICAgY29uc3QgcmV0ID0gewogICAgICAgICAgICAgICAgICAgIG9mZnNldDogcmVmcmVzaCA/IDAgOiB0aGlzLnRpY2tldHMubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgIGxpbWl0OiBDT05GSUdfVElDS0VUUy5MSU1JVCwKICAgICAgICAgICAgICAgICAgICBzb3J0OiB0aGlzLnNvcnQudmFsdWUudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHksCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGlmICggcHJpY2UucmFuZ2VbMF0gPiBwcmljZS5taW4gfHwgcHJpY2UucmFuZ2VbMV0gPCBwcmljZS5tYXggKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0LnByaWNlUmFuZ2UgPSBwcmljZS5yYW5nZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICggYWNjZXNzaWJpbGl0eSApIHsKICAgICAgICAgICAgICAgICAgICByZXQuYWNjZXNzaWJpbGl0eSA9IGFjY2Vzc2liaWxpdHk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIHJldDsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgY29uc3QgdXBkYXRlRGF0YUZyb21SZXNwb25zZSA9ICggcmVzcG9uc2VUaWNrZXRzLCBhY2Nlc3NpYmlsaXR5ICkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlRmlsdGVyUHJpY2VSYW5nZUZyb21UaWNrZXRPZmZlcnMgPSAoIG9mZmVycyApID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBnZXROZXdNYXhQcmljZUZyb21PZmZlcnMgPSAoICkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2ZmZXJzLnJlZHVjZSggKCBtYXhQcmljZSwgaXRlbSApID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBiYXNlUHJpY2UgPSBwYXJzZUZsb2F0KCBpdGVtLmJhc2VQcmljZSApOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VQcmljZSA9IGJhc2VQcmljZSA9PT0gTWF0aC5mbG9vciggYmFzZVByaWNlICkgPyBiYXNlUHJpY2UgOiBNYXRoLmZsb29yKCBiYXNlUHJpY2UgKSArIDE7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJhc2VQcmljZSA+IG1heFByaWNlID8gYmFzZVByaWNlIDogbWF4UHJpY2U7CgogICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLmZpbHRlci5wcmljZS5tYXggKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IG1heFByaWNlID0gZ2V0TmV3TWF4UHJpY2VGcm9tT2ZmZXJzKCApOwogICAgICAgICAgICAgICAgICAgIGlmICggbWF4UHJpY2UgPiB0aGlzLmZpbHRlci5wcmljZS5tYXggKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdGhpcy5maWx0ZXIucHJpY2UubWF4ID09PSB0aGlzLmZpbHRlci5wcmljZS5yYW5nZVsgMSBdICkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVGaWx0ZXJXYXRjaGVycyggKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyLnByaWNlLnJhbmdlID0gWyB0aGlzLmZpbHRlci5wcmljZS5yYW5nZVsgMCBdLCBtYXhQcmljZSBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRGaWx0ZXJXYXRjaGVycyggKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlci5wcmljZS5tYXggPSBtYXhQcmljZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlRmlsdGVyUXVhbnRpdHlSYW5nZU5vQWNjZXNpYmlsaXR5RnJvbVRpY2tldE9mZmVycyA9ICggb2ZmZXJzICkgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGdldE5ld01heFF1YW50aXR5RnJvbU9mZmVycyA9ICggKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvZmZlcnMucmVkdWNlKCAoIG1heCwgaXRlbSApID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtYXhMaW1pdCA9IHBhcnNlRmxvYXQoIGl0ZW0ubGltaXRNYXggKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF4TGltaXQgPiBtYXggPyBtYXhMaW1pdCA6IG1heDsKCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMuZmlsdGVyT3B0aW9ucy5ub0FjY2VzYWJpbGl0eS5tYXhRdWFudGl0eSApOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIGNvbnN0IG1heFF1YW50aXR5ID0gZ2V0TmV3TWF4UXVhbnRpdHlGcm9tT2ZmZXJzKCApOwogICAgICAgICAgICAgICAgICAgIGlmICggbWF4UXVhbnRpdHkgPiB0aGlzLmZpbHRlck9wdGlvbnMubm9BY2Nlc2FiaWxpdHkubWF4UXVhbnRpdHkgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyT3B0aW9ucy5ub0FjY2VzYWJpbGl0eS5tYXhRdWFudGl0eSA9IG1heFF1YW50aXR5OwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlck9wdGlvbnMuY3VycmVudC5tYXhRdWFudGl0eSA9IG1heFF1YW50aXR5OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdGhpcy50aWNrZXRUeXBlc01hcCA9IHsKICAgICAgICAgICAgICAgICAgICAuLi50aGlzLnRpY2tldFR5cGVzTWFwLAogICAgICAgICAgICAgICAgICAgIC4uLiggcmVzcG9uc2VUaWNrZXRzLnRpY2tldFR5cGVzLnJlZHVjZSggKCBhY2MsIGl0ZW0gKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFjY1sgaXRlbS5pZCBdID0gaXRlbTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhY2M7CiAgICAgICAgICAgICAgICAgICAgfSwgeyB9ICkgKQogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB0aGlzLm9mZmVyc01hcCA9IHsKICAgICAgICAgICAgICAgICAgICAuLi50aGlzLm9mZmVyc01hcCwKICAgICAgICAgICAgICAgICAgICAuLi4oIHJlc3BvbnNlVGlja2V0cy5vZmZlcnMucmVkdWNlKCAoIGFjYywgeyBwb2ludHNFYXJuZWQsIC4uLnJlc3QgfSApID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgYWNjW3Jlc3QuaWRdID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucmVzdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbnVzUG9pbnRzOiBwb2ludHNFYXJuZWQgfHwgMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpY2tldFR5cGU6IHJlc3QuaWQgPyB0aGlzLnRpY2tldFR5cGVzTWFwWyByZXN0LmlkIF0gOiBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWNjOwogICAgICAgICAgICAgICAgICAgIH0sIHsgfSApICkKICAgICAgICAgICAgICAgIH07CgoKCiAgICAgICAgICAgICAgICB0aGlzLnRpY2tldHMgPSBbCiAgICAgICAgICAgICAgICAgICAgLi4udGhpcy50aWNrZXRzLAogICAgICAgICAgICAgICAgICAgIC4uLiggcmVzcG9uc2VUaWNrZXRzLnRpY2tldHMuaXRlbXMubWFwICggaXRlbSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5pdGVtLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2ZmZXJJZHM6IGl0ZW0ub2ZmZXJzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2ZmZXJzOiBpdGVtLm9mZmVycwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoIG9mZmVySWQgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvZmZlciA9IHRoaXMub2ZmZXJzTWFwWyBvZmZlcklkIF07CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoICFvZmZlciApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLm9mZmVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlja2V0VHlwZTogdGhpcy50aWNrZXRUeXBlc01hcFsgb2ZmZXIudGlja2V0VHlwZUlkIF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKCBvZmZlciA9PiBvZmZlciApCiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfSApICkKICAgICAgICAgICAgICAgIF07CiAgICAgICAgICAgICAgICB0aGlzLnRvdGFsVGlja2V0cyA9IHJlc3BvbnNlVGlja2V0cy50aWNrZXRzLnRvdGFsQ291bnQ7CgogICAgICAgICAgICAgICAgdXBkYXRlRmlsdGVyUHJpY2VSYW5nZUZyb21UaWNrZXRPZmZlcnMoIHJlc3BvbnNlVGlja2V0cy5vZmZlcnMgKTsKICAgICAgICAgICAgICAgIGFjY2Vzc2liaWxpdHkgfHwgdXBkYXRlRmlsdGVyUXVhbnRpdHlSYW5nZU5vQWNjZXNpYmlsaXR5RnJvbVRpY2tldE9mZmVycyggcmVzcG9uc2VUaWNrZXRzLm9mZmVycyApOwogICAgICAgICAgICAgICAgaWYgKCAhdGhpcy52ZW51ZURldGFpbHMubWFwVXJsICkgewogICAgICAgICAgICAgICAgICAgIFZ1ZS5zZXQoIHRoaXMudmVudWVEZXRhaWxzLCAnbWFwVXJsJywgcmVzcG9uc2VUaWNrZXRzLmV2ZW50RGV0YWlscy52ZW51ZU1hcFVybCApOwogICAgICAgICAgICAgICAgICAgIFZ1ZS5zZXQoIHRoaXMudmVudWVEZXRhaWxzLCAnbWFwV2l0aGxhYmVsc1VybCcsIHJlc3BvbnNlVGlja2V0cy5ldmVudERldGFpbHMudmVudWVNYXBXaXRoTGFiZWxzVXJsICk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBpZiAoIGlzRXF1YWwgKCB0aGlzLmxhc3RBcHBsaWVkRmlsdGVyLCB7IC4uLnRoaXMuZmlsdGVyLCBzb3J0OiB0aGlzLnNvcnQudmFsdWUudmFsdWUgfSApICYmIHJlZnJlc2ggKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoaXMubG9hZGluZ1RpY2tldHMgPSB0cnVlOwogICAgICAgICAgICAhcmVmcmVzaCB8fCBjbGVhckRhdGEoICk7CgogICAgICAgICAgICB0aGlzLmxhc3RBcHBsaWVkRmlsdGVyID0gY2xvbmVEZWVwKCB7IC4uLnRoaXMuZmlsdGVyLCBzb3J0OiB0aGlzLnNvcnQudmFsdWUudmFsdWUgfSApOwoKICAgICAgICAgICAgY29uc3QgYWNjZXNzaWJpbGl0eSA9IHRoaXMuZmlsdGVyLmFjY2Vzc2liaWxpdHk7CiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlVGlja2V0cyA9IGF3YWl0IHRoaXMubG9hZEV2ZW50VGlja2V0cyggewogICAgICAgICAgICAgICAgZXZlbnRJZDogdGhpcy5pdGVtSWQsCiAgICAgICAgICAgICAgICByZWZyZXNoLAogICAgICAgICAgICAgICAgc2VhcmNoOiBnZXRTZWFyY2hQYXJhbXMoICksCiAgICAgICAgICAgICAgICB1c2VyQW5hbHl0aWNzOiB0aGlzLnVzZXJBbmFseXRpY3MKICAgICAgICAgICAgfSwgKTsKCiAgICAgICAgICAgIGlmICggcmVzcG9uc2VUaWNrZXRzLnN1Y2Nlc3MgKSB7CiAgICAgICAgICAgICAgICBpZiAoIHJlZnJlc2ggKSB7CiAgICAgICAgICAgICAgICAgICAgY2xlYXJEYXRhKCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdXBkYXRlRGF0YUZyb21SZXNwb25zZSAoIHJlc3BvbnNlVGlja2V0cy5kYXRhLCBhY2Nlc3NpYmlsaXR5ICk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAoIHJlc3BvbnNlVGlja2V0cy5jb2RlICYmIHJlc3BvbnNlVGlja2V0cy5jb2RlID09PSBhcGlDb25zdGFudHMuRVJST1JfQ09ERVMuRVZFTlRfUFJPVklERVIuU1lTVEVNX0RPV04gKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0V2ZW50VGlja2V0c01haW50ZW5hbmNlID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmxvYWRpbmdUaWNrZXRzID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMudXNlckFuYWx5dGljcyA9IHRydWU7CgogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VUaWNrZXRzOwogICAgICAgIH0sCiAgICAgICAgYXN5bmMgbG9hZFNlY3Rpb25zKCApIHsKICAgICAgICAgICAgY29uc3Qgc2VjdGlvbnNSZXNwb25zZSA9IGF3YWl0IHRoaXMubG9hZFNlY3Rpb25zQnlFdmVudElkKCB7IGV2ZW50SWQ6IHRoaXMuaXRlbUlkLCBndWVzdENvdW50OiB0aGlzLmZpbHRlclNlY3Rpb25zLnF1YW50aXR5IH0gKTsKICAgICAgICAgICAgdGhpcy5zZWN0aW9ucyA9IHNlY3Rpb25zUmVzcG9uc2Uuc3VjY2VzcyA/IHNlY3Rpb25zUmVzcG9uc2UuZGF0YS5zZWN0aW9ucyA6IFtdIDsKCiAgICAgICAgICAgIHJldHVybiBzZWN0aW9uc1Jlc3BvbnNlOwogICAgICAgIH0sCiAgICAgICAgbG9hZFRpY2tldHNEZWJvdW5jZWQ6IGRlYm91bmNlKCBmdW5jdGlvbiggcmVmcmVzaCA9IGZhbHNlICkgewogICAgICAgICAgICB0aGlzLmxvYWRUaWNrZXRzKCByZWZyZXNoICk7CiAgICAgICAgfSwgbGlzdENvbnN0YW50cy5ERUJPVU5DRV9ERUxBWSApLAogICAgICAgIGxvYWRTZWN0aW9uRGVib3VuY2VkOiBkZWJvdW5jZSggZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHRoaXMubG9hZFNlY3Rpb25zKCApOwogICAgICAgIH0sIGxpc3RDb25zdGFudHMuREVCT1VOQ0VfREVMQVkgKSwKCiAgICAgICAgZ2V0VGlja2V0RGV0YWlsSW5mbyggdGlja2V0ICkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgdGlja2V0OiB0aWNrZXQsCiAgICAgICAgICAgICAgICBvZmZlcnM6IHRpY2tldC5vZmZlcnMsCiAgICAgICAgICAgICAgICBldmVudDogdGhpcy5ldmVudCwKICAgICAgICAgICAgICAgIHF1YW50aXR5OiB0aGlzLmZpbHRlci5xdWFudGl0eSwKICAgICAgICAgICAgfTsKICAgICAgICB9LAogICAgICAgIG9wZW5FdmVudFRpY2tldERldGFpbCggdGlja2V0ICkgewogICAgICAgICAgICB0aGlzLnNlbGVjdGVkVGlja2V0ID0gdGlja2V0OwogICAgICAgIH0sCiAgICAgICAgY2xvc2VFdmVudFRpY2tldERldGFpbCggKSB7CiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUaWNrZXQgPSBudWxsOwogICAgICAgIH0sCiAgICAgICAgc2V0SGlnaGxpZ2h0ZWRUaWNrZXQoIHRpY2tldCApIHsKICAgICAgICAgICAgdGhpcy5oaWdobGlnaHRlZFRpY2tldCA9IHRpY2tldDsKICAgICAgICB9LAogICAgICAgIHNldEhpZ2hsaWdodGVkU2VjdGlvbiggc2VjdGlvbiApIHsKICAgICAgICAgICAgdGhpcy5oaWdobGlnaHRlZFNlY3Rpb24gPSBzZWN0aW9uOwogICAgICAgIH0sCiAgICAgICAgc2V0U2VsZWN0ZWRTZWN0aW9uKCBzZWN0aW9uICkgewogICAgICAgICAgICB0aGlzLnNlbGVjdGVkU2VjdGlvbiA9IHNlY3Rpb247CiAgICAgICAgfSwKICAgICAgICBjbG9zZVNlbGVjdGVkU2VjdGlvbiggKSB7CiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRTZWN0aW9uID0gbnVsbDsKICAgICAgICB9LAogICAgICAgIHNldFNlbGVjdGVkSG90ZWxSZXNlcnZhdGlvbiggaXRlbSApIHsKICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEhvdGVsUmVzZXJ2YXRpb24gPSBpdGVtOwogICAgICAgIH0sCiAgICAgICAgb3BlblRpY2tldEFkZGl0aW9uYWxGaWx0ZXJzTW9kYWwoICkgewogICAgICAgICAgICB0aGlzLiRtb2RhbC5zaG93Qm90dG9tKAogICAgICAgICAgICAgICAgKCApID0+IGltcG9ydCggJy4vVGhlRXZlbnQvRXZlbnRUaWNrZXRGaWx0ZXJNb2RhbCcgKSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5maWx0ZXIsCiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogdGhpcy5maWx0ZXJPcHRpb25zLmN1cnJlbnQsCiAgICAgICAgICAgICAgICAgICAgc29ydCA6IHRoaXMuc29ydCwKICAgICAgICAgICAgICAgICAgICBidXNFdmVudFBhcmVudDogdGhpcy5idXNFdmVudAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBzY3JvbGxhYmxlOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBmdWxsc2NyZWVuOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAnaGlkZS1vdmVybGF5JzogZmFsc2UKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgYmVmb3JlQ2xvc2U6ICggKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0FkZGlvbmFsVGlja2V0RmlsdGVycyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgKTsKICAgICAgICB9LAogICAgICAgIG9wZW5IZWFsdGhDaGVja0NvbmZpcm1hdGlvbk1vZGFsKCApIHsKICAgICAgICAgICAgY29uc3QgeyBoZWFsdGhDaGVjayB9ID0gdGhpcy5ldmVudDsKICAgICAgICAgICAgdGhpcy4kbW9kYWwuc2hvdygKICAgICAgICAgICAgICAgIEhlYWx0aENoZWNrQ29uZmlybWF0aW9uTW9kYWwsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaGVhbHRoQ2hlY2sKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJ25vLWNsaWNrLWFuaW1hdGlvbic6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsYWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBmdWxsc2NyZWVuOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBwZXJzaXN0ZW50OiB0cnVlLAogICAgICAgICAgICAgICAgICAgICdoaWRlLW92ZXJsYXknOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAnbWF4LXdpZHRoJzogODU4LAogICAgICAgICAgICAgICAgICAgICdjb250ZW50LWNsYXNzJzogJ2dzdC12LWRpYWxvZycsCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICk7CiAgICAgICAgfSwKICAgICAgICBvcGVuRXZlbnRQYWNrYWdlT2ZmZXJzTm90QXZhaWxhYmxlTW9kYWwoICkgewogICAgICAgICAgICB0aGlzLiRtb2RhbC5zaG93KAogICAgICAgICAgICAgICAgKCApID0+IGltcG9ydCggJy4vVGhlRXZlbnQvRXZlbnRQYWNrYWdlT2ZmZXJzTm90QXZhaWxhYmxlTW9kYWwnICksCiAgICAgICAgICAgICAgICB7IH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJ21heC13aWR0aCc6IDg1OAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBiZWZvcmVDbG9zZTogKCApID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZVNlbGVjdGVkU2VjdGlvbiggKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZUV2ZW50VGlja2V0RGV0YWlsKCApOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRTZWN0aW9ucyggKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICk7CiAgICAgICAgfSwKICAgICAgICB1cGRhdGVGaWx0ZXIoIGZpbHRlciApIHsKICAgICAgICAgICAgdGhpcy5maWx0ZXIgPSBmaWx0ZXI7CiAgICAgICAgfSwKICAgICAgICByZXNldEZpbHRlciggKSB7CiAgICAgICAgICAgIHRoaXMuZmlsdGVyLnF1YW50aXR5ID0gQ09ORklHX1RJQ0tFVFMuRklMVEVSX0RFRkFVTFQuUVVBTlRJVFk7CiAgICAgICAgICAgIHRoaXMuZmlsdGVyLnByaWNlLnJhbmdlID0gWyB0aGlzLmZpbHRlci5wcmljZS5taW4sIHRoaXMuZmlsdGVyLnByaWNlLm1heCBdOwogICAgICAgICAgICB0aGlzLmZpbHRlci5hY2Nlc3NpYmlsaXR5ID0gQ09ORklHX1RJQ0tFVFMuRklMVEVSX0RFRkFVTFQuQUNDRVNTSUJJTElUWTsKICAgICAgICB9LAogICAgICAgIHJlbW92ZUZpbHRlcldhdGNoZXJzKCApIHsKICAgICAgICAgICAgIXRoaXMuX3dhdGNoRmlsdGVyUXVhbnRpdHkgfHwgdGhpcy5fd2F0Y2hGaWx0ZXJRdWFudGl0eSggKTsKICAgICAgICAgICAgIXRoaXMuX3dhdGNoRmlsdGVyUHJpY2VSYW5nZSB8fCAgdGhpcy5fd2F0Y2hGaWx0ZXJQcmljZVJhbmdlKCApOwogICAgICAgICAgICAhdGhpcy5fd2F0Y2hGaWx0ZXJBY2Nlc3NpYmlsaXR5IHx8IHRoaXMuX3dhdGNoRmlsdGVyQWNjZXNzaWJpbGl0eSggKTsKICAgICAgICB9LAogICAgICAgIHVwZGF0ZVNvcnQoIHNvcnQgKSB7CiAgICAgICAgICAgIHRoaXMuc29ydCA9IHNvcnQ7CiAgICAgICAgfSwKICAgICAgICByZXNldFNvcnQoICkgewogICAgICAgICAgICB0aGlzLnNvcnQudmFsdWUgPSB0aGlzLmRlZmF1bHRTb3J0OwogICAgICAgIH0sCiAgICAgICAgYWRkRmlsdGVyV2F0Y2hlcnMoICkgewogICAgICAgICAgICBjb25zdCBhZGRGb3JRdWFudGl0eSA9ICggKSA9PiB7CiAgICAgICAgICAgICAgICAhdGhpcy5fd2F0Y2hGaWx0ZXJRdWFudGl0eSB8fCB0aGlzLl93YXRjaEZpbHRlclF1YW50aXR5KCApOwogICAgICAgICAgICAgICAgdGhpcy5fd2F0Y2hGaWx0ZXJRdWFudGl0eSA9IHRoaXMuJHdhdGNoKCAnZmlsdGVyLnF1YW50aXR5JywgKCApID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkSG90ZWxSZXNlcnZhdGlvbiA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkVGlja2V0c0RlYm91bmNlZCggdHJ1ZSApOwogICAgICAgICAgICAgICAgfSApOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgY29uc3Qgc2VjdGlvbnNBZGRGb3JRdWFudGl0eSA9ICggKSA9PiB7CiAgICAgICAgICAgICAgICAhdGhpcy5fd2F0Y2hGaWx0ZXJRdWFudGl0eSB8fCB0aGlzLl93YXRjaEZpbHRlclF1YW50aXR5KCApOwogICAgICAgICAgICAgICAgdGhpcy5fd2F0Y2hGaWx0ZXJRdWFudGl0eSA9IHRoaXMuJHdhdGNoKCAnZmlsdGVyU2VjdGlvbnMucXVhbnRpdHknLCAoICkgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZFNlY3Rpb25EZWJvdW5jZWQoICApOwogICAgICAgICAgICAgICAgfSApOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgY29uc3QgYWRkRm9yUHJpY2VSYW5nZSA9ICggKSA9PiB7CiAgICAgICAgICAgICAgICAhdGhpcy5fd2F0Y2hGaWx0ZXJQcmljZVJhbmdlIHx8ICB0aGlzLl93YXRjaEZpbHRlclByaWNlUmFuZ2UoICk7CiAgICAgICAgICAgICAgICB0aGlzLl93YXRjaEZpbHRlclByaWNlUmFuZ2UgPSB0aGlzLiR3YXRjaCggJ2ZpbHRlci5wcmljZS5yYW5nZScsICggbmV3VmFsdWUsIG9sZFZhbHVlICkgPT4gewogICAgICAgICAgICAgICAgICAgIGlmICggbmV3VmFsdWVbIDAgXSAhPT0gb2xkVmFsdWVbIDAgXSB8fCBuZXdWYWx1ZVsgMSBdICE9PSBvbGRWYWx1ZVsgMSBdICkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRUaWNrZXRzRGVib3VuY2VkKCB0cnVlICk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSApOwogICAgICAgICAgICB9OwogICAgICAgICAgICBjb25zdCBhZGRGb3JBY2Nlc3NpYmlsaXR5ID0gKCApID0+IHsKICAgICAgICAgICAgICAgICF0aGlzLl93YXRjaEZpbHRlckFjY2Vzc2liaWxpdHkgfHwgdGhpcy5fd2F0Y2hGaWx0ZXJBY2Nlc3NpYmlsaXR5KCApOwogICAgICAgICAgICAgICAgdGhpcy5fd2F0Y2hGaWx0ZXJBY2Nlc3NpYmlsaXR5ID0gdGhpcy4kd2F0Y2goICdmaWx0ZXIuYWNjZXNzaWJpbGl0eScsIHZhbHVlID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGN1cnJlbnQsIGFjY2Vzc2liaWxpdHksIG5vQWNjZXNhYmlsaXR5IH0gPSB0aGlzLmZpbHRlck9wdGlvbnM7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBxdWFudGl0eSB9ID0gdGhpcy5maWx0ZXI7CgogICAgICAgICAgICAgICAgICAgIGlmICggdmFsdWUgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyT3B0aW9ucy5jdXJyZW50Lm1pblF1YW50aXR5ID0gYWNjZXNzaWJpbGl0eS5taW5RdWFudGl0eTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJPcHRpb25zLmN1cnJlbnQubWF4UXVhbnRpdHkgPSBhY2Nlc3NpYmlsaXR5Lm1heFF1YW50aXR5OwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyT3B0aW9ucy5jdXJyZW50Lm1pblF1YW50aXR5ID0gbm9BY2Nlc2FiaWxpdHkubWluUXVhbnRpdHk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyT3B0aW9ucy5jdXJyZW50Lm1heFF1YW50aXR5ID0gbm9BY2Nlc2FiaWxpdHkubWF4UXVhbnRpdHk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICggcXVhbnRpdHkgPj0gY3VycmVudC5taW5RdWFudGl0eSAmJiBxdWFudGl0eSA8PWN1cnJlbnQubWF4UXVhbnRpdHkgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZFRpY2tldHNEZWJvdW5jZWQoIHRydWUgKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlci5xdWFudGl0eSA9IENPTkZJR19USUNLRVRTLkZJTFRFUl9ERUZBVUxULlFVQU5USVRZIDw9IGN1cnJlbnQubWF4UXVhbnRpdHkgPyBNYXRoLm1heCggY3VycmVudC5taW5RdWFudGl0eSwgQ09ORklHX1RJQ0tFVFMuRklMVEVSX0RFRkFVTFQuUVVBTlRJVFkgKSA6IGN1cnJlbnQubWluUXVhbnRpdHk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSApOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgaWYoIHRoaXMuaXNQYWNrYWdlRmxvdyApIHsKICAgICAgICAgICAgICAgIHNlY3Rpb25zQWRkRm9yUXVhbnRpdHkoKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYWRkRm9yUXVhbnRpdHkoICk7CiAgICAgICAgICAgIGFkZEZvclByaWNlUmFuZ2UoICk7CiAgICAgICAgICAgIGFkZEZvckFjY2Vzc2liaWxpdHkoICk7CiAgICAgICAgfSwKICAgICAgICBkZWZlclJlbG9hZEZ1dHVyZU9uU2FsZURhdGUoICkgewogICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSggKTsKICAgICAgICAgICAgY29uc3QgeyBvblNhbGVTdGFydERhdGVUaW1lQXQgfSA9IHRoaXMuZXZlbnQ7CgogICAgICAgICAgICBpZiAoIG9uU2FsZVN0YXJ0RGF0ZVRpbWVBdCAmJiBkYXRlVXRpbHNJc0FmdGVyKCBvblNhbGVTdGFydERhdGVUaW1lQXQsIG5vdyApICkgewogICAgICAgICAgICAgICAgY29uc3QgZGVsYXkgPSBNYXRoLm1pbiggKCBkYXRlVXRpbHNEaWZmZXJlbmNlSW5TZWNvbmRzKCBvblNhbGVTdGFydERhdGVUaW1lQXQsIG5vdyApICogMTAwMCApLCAoIE1hdGgucG93KCAyLCAzMSApIC0gMSApICk7CgogICAgICAgICAgICAgICAgdGhpcy5kZWZlclJlbG9hZCA9IHNldFRpbWVvdXQoCiAgICAgICAgICAgICAgICAgICAgKCApID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkRGF0YSggKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlbGF5CiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhc3luYyBjaGVja291dCggcGF5bG9hZCApIHsKICAgICAgICAgICAgY29uc3QgY2FsbGJhY2tBZGRJdGVtVG9DYXJ0RXJyb3JGbiA9ICggcmVzcG9uc2UgKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCB7IGNvZGUgfSA9IHJlc3BvbnNlOwoKICAgICAgICAgICAgICAgIGNvbnN0IGkxOFByZWZpeCA9ICdfY29tbW9uOm1lc3NhZ2VTZXJ2ZXJFcnJvckNvZGVzRnJvbUNvbnRleHQucmVzZXJ2ZSc7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKCBjb2RlICkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgYXBpQ29uc3RhbnRzLkVSUk9SX0NPREVTLkhPVEVMX1BST1ZJREVSLlBST0RVQ1RfRVJST1I6CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZpY2F0aW9uV2FybmluZyggewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMuJHQoIGAke2kxOFByZWZpeH0uJHtjb2RlfS50aXRsZWAgKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHRoaXMuJHQoIGAke2kxOFByZWZpeH0uJHtjb2RlfS5kZXRhaWxgICksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRvRGlzbWlzczogZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgfSApOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlIGFwaUNvbnN0YW50cy5FUlJPUl9DT0RFUy5IT1RFTF9QUk9WSURFUi5JTlZBTElEX1JFUVVFU1Q6CiAgICAgICAgICAgICAgICAgICAgY2FzZSBhcGlDb25zdGFudHMuRVJST1JfQ09ERVMuSE9URUxfUFJPVklERVIuSU5WQUxJRF9EQVRBOgogICAgICAgICAgICAgICAgICAgIGNhc2UgYXBpQ29uc3RhbnRzLkVSUk9SX0NPREVTLkhPVEVMX1BST1ZJREVSLlNZU1RFTV9FUlJPUjoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZmljYXRpb25FcnJvciggewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMuJHQoIGAke2kxOFByZWZpeH0uaG90ZWxQcm92aWRlckRlZmF1bHQudGl0bGVgICksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB0aGlzLiR0KCBgJHtpMThQcmVmaXh9LmhvdGVsUHJvdmlkZXJEZWZhdWx0LmRldGFpbGAgKQogICAgICAgICAgICAgICAgICAgICAgICB9ICk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgYXBpQ29uc3RhbnRzLkVSUk9SX0NPREVTLlBBQ0tBR0VfT0ZGRVJTX05PVF9BVkFJTEFCTEU6CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3BlbkV2ZW50UGFja2FnZU9mZmVyc05vdEF2YWlsYWJsZU1vZGFsKCApOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbkVycm9yKCBub3RpZmljYXRpb25VdGlsc0dldEZyb21BcGlSZXNwb25zZSggcmVzcG9uc2UgKSApOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlU2VsZWN0ZWRTZWN0aW9uKCApOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlRXZlbnRUaWNrZXREZXRhaWwoICk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwoKCiAgICAgICAgICAgIGlmICggdGhpcy5zZWxlY3RlZEhvdGVsUmVzZXJ2YXRpb24gKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCggeyBuYW1lOiBgJHt0aGlzLiRyb3V0ZS5uYW1lfS5yZXNlcnZhdGlvbmAsIHBhcmFtczogeyBwYXlsb2FkLCBjYWxsYmFja0FkZEl0ZW1Ub0NhcnRFcnJvckZuIH0gfSApOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy4kbW9kYWwuc2hvdygKICAgICAgICAgICAgICAgICAgICAoICkgPT4gaW1wb3J0KCAnLi9UaGVFdmVudC9FdmVudENoZWNrb3V0Q29uZmlybWF0aW9uTW9kYWwnICksCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm1GbjogKCApID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCB7IG5hbWU6IGAke3RoaXMuJHJvdXRlLm5hbWV9LnJlc2VydmF0aW9uYCwgcGFyYW1zOiB7IHBheWxvYWQsIGNhbGxiYWNrQWRkSXRlbVRvQ2FydEVycm9yRm4gfSB9ICk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJ21heC13aWR0aCc6IDgwMCwKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgIH0sCiAgICAgICAgb25CYW5uZXJDbGlja0JhY2tEbyggKSB7CiAgICAgICAgICAgIGNvbnN0IHsgc2VsZWN0ZWRUaWNrZXQsIHNlbGVjdGVkU2VjdGlvbiB9ID0gdGhpczsKCiAgICAgICAgICAgIGlmICggc2VsZWN0ZWRUaWNrZXQgKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jbG9zZUV2ZW50VGlja2V0RGV0YWlsKCApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICggc2VsZWN0ZWRTZWN0aW9uICkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2xvc2VTZWxlY3RlZFNlY3Rpb24oICk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0ZW5hbnRSZWRpcmVjdFRvSG9tZSggKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICBhc3luYyBtb3VudGVkKCApIHsKICAgICAgICBhd2FpdCB0aGlzLmxvYWREYXRhKCApOwogICAgfSwKICAgIGNyZWF0ZWQoICkgewogICAgICAgIHRoaXMuYnVzRXZlbnQuJG9uKCAncmVzZXQtZmlsdGVyJywgdGhpcy5yZXNldEZpbHRlciApOwogICAgICAgIHRoaXMuYnVzRXZlbnQuJG9uKCAndXBkYXRlLWZpbHRlcicsIHRoaXMudXBkYXRlRmlsdGVyICk7CiAgICAgICAgdGhpcy5idXNFdmVudC4kb24oICdjaGVja291dCcsIHRoaXMuY2hlY2tvdXQgKTsKICAgICAgICB0aGlzLmJ1c0V2ZW50LiRvbiggJ3VwZGF0ZS1zb3J0JywgdGhpcy51cGRhdGVTb3J0ICk7CiAgICAgICAgdGhpcy5idXNFdmVudC4kb24oICdyZXNldC1zb3J0JywgdGhpcy5yZXNldFNvcnQgKTsKICAgICAgICB0aGlzLmJ1c0V2ZW50LiRvbiggJ3NldC1ob3RlbC1yZXNlcnZhdGlvbicsIHRoaXMuc2V0U2VsZWN0ZWRIb3RlbFJlc2VydmF0aW9uICk7CiAgICB9LAogICAgZGVzdHJveWVkKCApIHsKICAgICAgICB0aGlzLmJ1c0V2ZW50LiRvZmYoICdyZXNldC1maWx0ZXInICk7CiAgICAgICAgdGhpcy5idXNFdmVudC4kb2ZmKCAndXBkYXRlLWZpbHRlcicgKTsKICAgICAgICB0aGlzLmJ1c0V2ZW50LiRvZmYoICdjaGVja291dCcgKTsKICAgICAgICB0aGlzLmJ1c0V2ZW50LiRvZmYoICd1cGRhdGUtc29ydCcgKTsKICAgICAgICB0aGlzLmJ1c0V2ZW50LiRvZmYoICdyZXNldC1zb3J0JyApOwogICAgICAgIHRoaXMuYnVzRXZlbnQuJG9mZiggJ3NldC1ob3RlbC1yZXNlcnZhdGlvbicgKTsKCiAgICAgICAgQXBpQ2FuY2VsU2VydmljZS5jbGVhciggJ2V2ZW50cy5vbmUnICk7CiAgICAgICAgQXBpQ2FuY2VsU2VydmljZS5jbGVhciggJ3BhY2thZ2VPZmZlcnMub25lQnlFdmVudElkJyApOwogICAgICAgIEFwaUNhbmNlbFNlcnZpY2UuY2xlYXIoICdwYWNrYWdlT2ZmZXJzLmdldFNlY3Rpb25zQnlFdmVudElkJyApOwogICAgICAgIEFwaUNhbmNlbFNlcnZpY2UuY2xlYXIoICd0aWNrZXRzLmdldCcgKTsKICAgICAgICBBcGlDYW5jZWxTZXJ2aWNlLmNsZWFyKCAndGlja2V0cy5hdmFpbGFiaWxpdHknICk7CgogICAgICAgIHRoaXMuX2Rlc3Ryb3llZCA9IHRydWU7CiAgICB9LAogICAgYmVmb3JlUm91dGVFbnRlciggdG8sIGZyb20sIG5leHQgKSB7CiAgICAgICAgbmV4dCggKCBjbXAgKSA9PiB7CiAgICAgICAgICAgIGNtcC5wcmV2aW91c1JvdXRlID0gZnJvbTsKICAgICAgICB9ICk7CiAgICB9LAogICAgYmVmb3JlUm91dGVVcGRhdGUoIHRvLCBmcm9tLCBuZXh0ICkgewogICAgICAgIHRoaXMucHJldmlvdXNSb3V0ZSA9IGZyb207CiAgICAgICAgbmV4dCggKTsKICAgIH0sCn07Cg=="},{"version":3,"sources":["TheEvent.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TheEvent.vue","sourceRoot":"src/tenants/ticketmaster/app/views/event","sourcesContent":["<template>\n    <div class=\"gst-event\"\n        :class=\"{'gst-event-mobile': !$vuetify.breakpoint.mdAndUp}\">\n        <Header v-if=\"$vuetify.breakpoint.mdAndUp\" />\n        <DataLoading v-if=\"loading\" class=\"mt-5 mb-5 pt-5 pb-5\" />\n        <div v-else-if=\"isEvent\" class=\"d-flex flex-column u-height-100\">\n            <EventBanner :item=\"event\" @click-back=\"onBannerClickBackDo\" />\n            <EventNotAvailable v-if=\"isEventTicketsNotAvailable || isEventPackageOffersNotAvailable\" :event=\"event\" :is-package-offers-not-available=\"isEventPackageOffersNotAvailable\" />\n            <template v-else>\n                <EventVenueImage v-if=\"!$vuetify.breakpoint.smAndUp\" :loading=\"loadingTickets || loadingSections\" :tickets=\"tickets\" :venue-details=\"venueDetails\" />\n                <div :style=\"{'flex': 1, display: 'flex', 'min-height':0}\">\n                    <div v-if=\"$vuetify.breakpoint.smAndUp\" :style=\"{flex: 1}\" class=\"col col-sm-8 pa-0\">\n                        <EventTicketImage\n                            :loading-tickets=\"loadingTickets || loadingSections\"\n                            :tickets=\"tickets\"\n                            :venue-details=\"venueDetails\"\n                            :venue-seat-map-url=\"venueSeatMapUrl\" />\n                    </div>\n                    <div :style=\"{ flex: 1 }\" class=\"d-flex flex-column col col-sm-4 u-position-relative pa-0\">\n                        <DataLoading v-if=\"loadingSections\" class=\"mt-5 mb-5 pt-5 pb-5\" />\n                        <div v-else-if=\"!isPackageFlow\" class=\"d-flex flex-column u-position-relative pa-0 u-height-100\">\n                            <v-slide-x-reverse-transition>\n                                <EventTicketDetailSidebar\n                                    v-if=\"selectedTicket\"\n                                    :ticket=\"selectedTicket\"\n                                    :offers=\"selectedTicketDetailInfo.offers\"\n                                    :hotel-reservation=\"selectedHotelReservation\"\n                                    :event=\"selectedTicketDetailInfo.event\"\n                                    :quantity=\"selectedTicketDetailInfo.quantity\"\n                                    :bus-event-parent=\"busEvent\"\n                                    :venue-details=\"venueDetails\"\n                                    class=\"u-width-100 u-height-100 u-pull-front u-position-absolute\"\n                                    @close-ticket=\"selectedTicket = null\" />\n                            </v-slide-x-reverse-transition>\n                            <EventTicketFilter\n                                v-model=\"filter\"\n                                :options=\"filterOptions.current\"\n                                :show-filters=\"showAddionalTicketFilters\"\n                                @click-filter-btn=\"showAddionalTicketFilters = !showAddionalTicketFilters\" />\n                            <div :style=\"{'flex': 1, display: 'flex', 'min-height':0}\" class=\"u-position-relative\">\n                                <v-slide-x-reverse-transition>\n                                    <EventTicketAddionalFiltersSidebar\n                                        v-if=\"showAddionalTicketFilters\"\n                                        :value=\"filter\"\n                                        :options=\"filterOptions.current\"\n                                        class=\"u-width-100 u-height-100 u-pull-front u-position-absolute\"\n                                        @apply=\"updateFilter\"\n                                        @reset=\"resetFilter\"\n                                        @close=\"showAddionalTicketFilters = false\" />\n                                </v-slide-x-reverse-transition>\n                                <EventTicketList\n                                    :event=\"event\"\n                                    :tickets=\"tickets\"\n                                    :total-tickets=\"totalTickets\"\n                                    :tickets-with-offers=\"ticketsWithOffers\"\n                                    :loading-tickets=\"loadingTickets\"\n                                    :selected-ticket=\"selectedTicket\"\n                                    :selected-ticket-detail-info=\"selectedTicketDetailInfo\"\n                                    :sort=\"sort\"\n                                    :bus-event-parent=\"busEvent\"\n                                    @hightlight-ticket=\"setHighlightedTicket\"\n                                    @click-item=\"openEventTicketDetail\"\n                                    @load-more=\"loadTicketsDebounced\"\n                                    @close-ticket=\"selectedTicket = null\" />\n                            </div>\n                        </div>\n                        <div v-else-if=\"isPackageFlow\" class=\"d-flex flex-column u-position-relative pa-0 u-height-100\">\n                            <v-slide-x-reverse-transition>\n                                <SectionDetailSidebar\n                                    v-if=\"selectedSection\"\n                                    :section=\"selectedSection\"\n                                    :hotel-reservation=\"selectedHotelReservation\"\n                                    :event=\"event\"\n                                    :quantity=\"filterSections.quantity\"\n                                    :bus-event-parent=\"busEvent\"\n                                    :venue-details=\"venueDetails\"\n                                    class=\"u-width-100 u-height-100 u-pull-front u-position-absolute\"\n                                    @close-ticket=\"selectedSection = null\" />\n                            </v-slide-x-reverse-transition>\n                            <EventSectionsFilters v-model=\"filterSections\" :options=\"filterSectionOptions\" />\n                            <SectionsList\n                                :style=\"{'flex': 1, display: 'flex', 'min-height':0}\"\n                                :event=\"event\"\n                                :sections=\"sections\"\n                                :loading-sections=\"loadingSections\"\n                                @hightlight-section=\"setHighlightedSection\"\n                                @select-section=\"setSelectedSection\" />\n                        </div>\n                    </div>\n                </div>\n            </template>\n        </div>\n        <router-view />\n    </div>\n</template>\n\n<script>\n    import Header from '@tenant/app/layouts/components/Header.vue';\n    import Vue from 'vue';\n    import debounce from 'lodash/debounce';\n    import isEqual from 'lodash/isEqual';\n    import cloneDeep from 'lodash/cloneDeep';\n    import { mapActions, mapState, mapGetters } from 'vuex';\n    import { redirectToHome as tenantRedirectToHome } from '@tenant/app/utils/tenantUrlslUtils';\n    import eventConstants from '@core/utils/constants/event';\n    import apiConstants from '@core/utils/constants/api';\n    import listConstants from '@core/utils/constants/list';\n    import {\n        isAfter as dateUtilsIsAfter,\n        differenceInSeconds as dateUtilsDifferenceInSeconds\n    } from '@core/utils/dateUtils';\n    import {\n        hasTicketAvailable as eventUtilsHasTicketAvailable\n    } from '@core/utils/eventUtils';\n    import { getFromApiResponse as notificationUtilsGetFromApiResponse } from '@core/utils/notificationUtils';\n    import asyncParallel from '@core/utils/asyncParallel';\n    import EntityNotFoundRedirect404 from '@core/mixins/EntityNotFoundRedirect404';\n    import DataLoading from '@core/shared/components/loading/DataLoading.vue';\n    import ApiCancelService from '@services/ApiCancelService';\n    import EventBanner from './TheEvent/EventBanner.vue';\n    import EventTicketList from './TheEvent/EventTicketList.vue';\n    import EventTicketFilter from './TheEvent/EventTicketFilter.vue';\n    import EventTicketImage from './TheEvent/EventTicketImage.vue';\n    import EventVenueImage from './TheEvent/EventVenueImage.vue';\n    import HealthCheckConfirmationModal from './TheEvent/HealthCheckConfirmationModal/HealthCheckConfirmationModal';\n    import SectionsList from './TheEvent/SectionsList';\n    import EventSectionsFilters from './TheEvent/EventSectionsFilters';\n    import SectionDetailSidebar from './TheEvent/SectionDetailSidebar';\n\n    const STORE_NAME = 'events';\n    const STORE_NAME_PACKAGES = 'packageOffers';\n\n    const CONFIG_TICKETS = {\n        LIMIT: 20,\n        FILTER_DEFAULT: {\n            QUANTITY: 2,\n            MIN_QUANTITY: 1,\n            MAX_QUANTITY: 50,\n            PRICE: {\n                MIN: 0,\n                MAX: 5000,\n                CURRENCY: ''\n            },\n            ACCESSIBILITY: false,\n        },\n        FILTER_BUNDLE_DEFAULT: {\n            QUANTITY: 2,\n            MIN_QUANTITY: 2,\n            MAX_QUANTITY: 50\n        }\n    };\n\n    export default {\n        name: 'TheEvent',\n        components: {\n            SectionDetailSidebar,\n            Header,\n            DataLoading,\n            EventBanner,\n            EventTicketList,\n            EventTicketFilter,\n            EventTicketImage,\n            EventVenueImage,\n            SectionsList,\n            EventSectionsFilters,\n            EventNotAvailable: ( ) => import( './TheEvent/EventNotAvailable.vue' ),\n            EventTicketAddionalFiltersSidebar: () => import( './TheEvent/EventTicketAddionalFiltersSidebar' ),\n            EventTicketDetailSidebar: () => import( './TheEvent/EventTicketDetailSidebar' )\n        },\n        i18nOptions: {\n            namespaces: 'main',\n            keyPrefix: 'views.event.theEvent'\n        },\n        testIdOptions: {\n            keyPrefix: 'event'\n        },\n        mixins: [\n            EntityNotFoundRedirect404,\n        ],\n        data( ) {\n            const defaultSort = { value: 'price', 'display': this.$t( '_common:terms.lowestPrice' ) };\n\n            return {\n                loading: true,\n                tickets: [ ],\n                sections: [ ],\n                totalTickets: 0,\n                offersMap: { },\n                ticketTypesMap: { },\n                venueDetails: {\n                    mapUrl: '',\n                    mapWithlabelsUrl: ''\n                },\n                event: { },\n                selectedHotelReservation: null,\n                highlightedTicket: null,\n                highlightedSection: null,\n                selectedTicket: null,\n                selectedSection: null,\n                showAddionalTicketFilters: false,\n                defaultSort: defaultSort,\n                sort: {\n                    value: defaultSort,\n                    options: [\n                        defaultSort,\n                        { value: 'quality', 'display': this.$t( '_common:terms.bestSeats' ) },\n                    ]\n                },\n                filter: {\n                    quantity: CONFIG_TICKETS.FILTER_DEFAULT.QUANTITY,\n                    price: {\n                        range: [ CONFIG_TICKETS.FILTER_DEFAULT.PRICE.MIN, CONFIG_TICKETS.FILTER_DEFAULT.PRICE.MAX ],\n                        min: CONFIG_TICKETS.FILTER_DEFAULT.PRICE.MIN,\n                        max: CONFIG_TICKETS.FILTER_DEFAULT.PRICE.MAX,\n                        currency: CONFIG_TICKETS.FILTER_DEFAULT.PRICE.QUANTITY\n                    },\n                    accessibility: CONFIG_TICKETS.FILTER_DEFAULT.ACCESSIBILITY\n                },\n                filterOptions: {\n                    current: {\n                        accessibilityEnabled: false,\n                        minQuantity: CONFIG_TICKETS.FILTER_DEFAULT.MIN_QUANTITY,\n                        maxQuantity: CONFIG_TICKETS.FILTER_DEFAULT.MAX_QUANTITY\n                    },\n                    noAccesability: {\n                        minQuantity: CONFIG_TICKETS.FILTER_DEFAULT.MIN_QUANTITY,\n                        maxQuantity: CONFIG_TICKETS.FILTER_DEFAULT.MAX_QUANTITY\n                    },\n                    accessibility: {\n                        minQuantity: CONFIG_TICKETS.FILTER_DEFAULT.MIN_QUANTITY,\n                        maxQuantity: CONFIG_TICKETS.FILTER_DEFAULT.MAX_QUANTITY,\n                        companionMinQuantity: CONFIG_TICKETS.FILTER_DEFAULT.MIN_QUANTITY,\n                        companionMaxQuantity: CONFIG_TICKETS.FILTER_DEFAULT.MAX_QUANTITY\n                    }\n                },\n                filterSectionOptions: {\n                    accessibilityEnabled: false,\n                    minQuantity: CONFIG_TICKETS.FILTER_BUNDLE_DEFAULT.MIN_QUANTITY,\n                    maxQuantity: CONFIG_TICKETS.FILTER_BUNDLE_DEFAULT.MAX_QUANTITY\n                },\n                busEvent: new Vue( ),\n                loadingTickets: false,\n                isEventTicketsMaintenance: false,\n                userAnalytics: false,\n                lastAppliedFilter: { },\n                previousRoute: { },\n                isPackageFlow: false\n            };\n        },\n        computed: {\n            ...mapState( {\n                item:               state => state[STORE_NAME].detail,\n                forceDynamicFlow:   state => state.appState.forceDynamicFlow\n            } ),\n            ...mapGetters( {\n                hasPackageByEventId             : `${STORE_NAME_PACKAGES}/hasByEventId`,\n                getAvailable                    : `${STORE_NAME_PACKAGES}/getAvailable`,\n                loadingSections                 : `${STORE_NAME_PACKAGES}/getLoading`,\n                isForcedDynamicFlow             : 'appState/isForcedDynamicFlow'\n            } ),\n            routeId( ) {\n                return this.$route.params.id;\n            },\n            itemId( ) {\n                return this.event.id;\n            },\n            venueSeatMapUrl( ) {\n                if( this.isPackageFlow ) {\n                    if( this.selectedSection ) {\n                        return this.selectedSection.venueSeatMapUrl;\n                    }\n\n                    if( this.highlightedSection ) {\n                        return this.highlightedSection.venueSeatMapUrl;\n                    }\n\n                    return null;\n                }\n                if ( this.selectedTicket ) {\n                    return this.selectedTicket.venueSeatMapUrl;\n                }\n                if ( this.highlightedTicket ) {\n                    return this.highlightedTicket.venueSeatMapUrl;\n                }\n                return null;\n            },\n            noTickets() {\n                return '';\n            },\n            selectedTicketDetailInfo( ) {\n                return this.selectedTicket ?  this.getTicketDetailInfo( this.selectedTicket ) : null;\n            },\n            isMaxQuantityAvailable( ) {\n                return this.filterOptions.current.maxQuantity >= CONFIG_TICKETS.FILTER_DEFAULT.MAX_QUANTITY;\n            },\n            isEventTicketsStatusFewAvailable( ) {\n                return this.event.ticketsStatus === eventConstants.TICKETS_STATUS.FEW_AVAILABLE;\n            },\n            isEventTicketsNotAvailable( ) {\n                return !eventUtilsHasTicketAvailable( this.event );\n            },\n            isEventPackageOffersNotAvailable() {\n                return !this.isPackageFlow && !this.loadingSections && !this.isForcedDynamicFlow;\n            },\n            isEvent( ) {\n                return !!this.event.id;\n            },\n            ticketsWithOffers( ) {\n                return this.tickets.filter( ticket => ticket.offers.length );\n            },\n            hasHealthCheck( ) {\n                return !!this.event.healthCheck;\n            },\n            needToShowConfirmationHealthCheck( ) {\n                return this.hasHealthCheck && ( !this.previousRoute || this.previousRoute.name !== 'cartCheckout' );\n            },\n            componentEventTicketDetailSidebar( ) {\n                return () => import( './TheEvent/EventTicketDetailSidebar' );\n            },\n            isUsingLegacyRoute() {\n                return this.$route.name === 'tmEvent';\n            },\n            filterSections: {\n                get( ) {\n                    return this.$store.state.packageOffers.filters;\n                },\n                set( value ) {\n                    this.updateFiltersSections( value );\n                }\n            }\n        },\n        watch: {\n            '$route.params.id': function( ) {\n                this.loadData( );\n            },\n            'sort.value': function ( ) {\n                this.loadTickets( true );\n            },\n            'showAddionalTicketFilters': function ( value ) {\n                if ( value && !this.$vuetify.breakpoint.mdAndUp ) {\n                    this.openTicketAdditionalFiltersModal( );\n                }\n            }\n        },\n        methods: {\n            ...mapActions( {\n                loadOne                         : `${STORE_NAME}/one`,\n                loadOneByLegacy                 : `${STORE_NAME}/oneByLegacy`,\n                loadEventTicketsAvailability    : `tickets/availability`,\n                loadEventTickets                : 'tickets/get',\n                showLoadingOverlay              : 'appState/setLoading',\n                addItemToCart                   : 'cart/addItem',\n                instantDeleteCurrentCart        : 'cart/instantDeleteCurrentCart',\n                initPackageOffers               : `${STORE_NAME_PACKAGES}/init`,\n                oneByEventId                    : `${STORE_NAME_PACKAGES}/oneByEventId`,\n                loadSectionsByEventId           : `${STORE_NAME_PACKAGES}/getSectionsByEventId`,\n                updateFiltersSections           : `${STORE_NAME_PACKAGES}/filters/update`,\n                notificationError               : 'notification/error',\n                notificationWarning             : 'notification/warning',\n            } ),\n            async loadData( ) {\n                let event, packageDetails;\n\n                this.loading = true;\n                await asyncParallel( [\n                    async ( ) => { event = !!this._destroyed || await this.loadEvent( ); },\n                    async ( ) => {\n                        this.initPackageOffers( { eventId: this.itemId } );\n                        packageDetails = !!this._destroyed || await this.oneByEventId( this.routeId );\n                    },\n                ], 2 );\n                this.loading = false;\n\n                if ( event && !this.isEventTicketsNotAvailable ) {\n                    !this.needToShowConfirmationHealthCheck || this.openHealthCheckConfirmationModal( );\n                    const isPackageDetailsAvailable = this.getAvailable( this.itemId );\n\n                    if ( isPackageDetailsAvailable ) {\n                        !!this._destroyed || await this.loadSections( );\n                        const { eventDetails } = packageDetails.data;\n                        this.isPackageFlow = true;\n\n                        if ( !this.venueDetails.mapUrl ) {\n                            Vue.set( this.venueDetails, 'mapUrl', eventDetails.venueMapWithLabelsUrl );\n                            Vue.set( this.venueDetails, 'mapWithlabelsUrl', eventDetails.venueMapWithLabelsUrl );\n                        }\n                    } else {\n                        if ( this.isEventTicketsStatusFewAvailable ) {\n                            this.filter.quantity = 1;\n                        }\n\n                        const responseTickets = !!this._destroyed || await this.loadTickets( true );\n                        if ( responseTickets.success ) {\n                            !!this._destroyed || await this.loadTicketsAvailability( );\n                        }\n                    }\n\n                    this.addFilterWatchers( );\n                } else {\n                    this.deferReloadFutureOnSaleDate( );\n                }\n            },\n            getEventData() {\n                if ( this.isUsingLegacyRoute ) {\n                    return this.loadOneByLegacy( { id: this.routeId } );\n                }\n\n                return this.loadOne( this.routeId );\n            },\n            async loadEvent( ) {\n                const responseEvent = await this.getEventData( );\n\n                if ( !responseEvent ) {\n                    this._goToNotFoundPage( );\n                    return;\n                }\n\n                const getMaxPrice = ( maxPrice ) => {\n                    const ret = parseFloat( maxPrice );\n\n                    return ret === Math.floor( ret ) ? ret : Math.floor( ret ) + 1;\n                };\n\n                this.event = responseEvent;\n                this.filter.price.min = 0;\n                this.filter.price.max = this.event.maxPrice ? getMaxPrice( this.event.maxPrice ) : 0;\n                this.filter.price.range = [ this.filter.price.min, this.filter.price.max ];\n                this.filter.price.currency = this.event.currency;\n\n                return this.event;\n            },\n            async loadTicketsAvailability( ) {\n                const response = await this.loadEventTicketsAvailability( { eventId: this.itemId } );\n\n                if ( response.success ) {\n                    if ( response.data && response.data.accessibility ) {\n                        const { accessibility } = response.data;\n\n                        this.filterOptions.current.accessibilityEnabled         = accessibility.enabled;\n                        this.filterOptions.accessibility.minQuantity            = accessibility.minLimit;\n                        this.filterOptions.accessibility.maxQuantity            = accessibility.maxLimit;\n                        this.filterOptions.accessibility.companionMinQuantity   = accessibility.companionMinLimit;\n                        this.filterOptions.accessibility.companionMaxQuantity   = accessibility.companionMaxLimit;\n                    }\n                }\n            },\n            async loadTickets( refresh = false ) {\n                const clearData = ( ) => {\n                    this.tickets = [];\n                    this.offersMap = {};\n                    this.ticketTypesMap = {};\n                    this.highlightedTicket = null;\n                    this.selectedTicket = null;\n                };\n\n                const getSearchParams = ( ) => {\n                    const { price, accessibility, quantity } = this.filter;\n                    const ret = {\n                        offset: refresh ? 0 : this.tickets.length,\n                        limit: CONFIG_TICKETS.LIMIT,\n                        sort: this.sort.value.value,\n                        quantity,\n                    };\n\n                    if ( price.range[0] > price.min || price.range[1] < price.max ) {\n                        ret.priceRange = price.range;\n                    }\n                    if ( accessibility ) {\n                        ret.accessibility = accessibility;\n                    }\n\n                    return ret;\n                };\n                const updateDataFromResponse = ( responseTickets, accessibility ) => {\n                    const updateFilterPriceRangeFromTicketOffers = ( offers ) => {\n                        const getNewMaxPriceFromOffers = ( ) => {\n                            return offers.reduce( ( maxPrice, item ) => {\n                                let basePrice = parseFloat( item.basePrice );\n\n                                basePrice = basePrice === Math.floor( basePrice ) ? basePrice : Math.floor( basePrice ) + 1;\n\n                                return basePrice > maxPrice ? basePrice : maxPrice;\n\n                            }, this.filter.price.max );\n                        };\n                        const maxPrice = getNewMaxPriceFromOffers( );\n                        if ( maxPrice > this.filter.price.max ) {\n                            if ( this.filter.price.max === this.filter.price.range[ 1 ] ) {\n                                this.removeFilterWatchers( );\n                                this.filter.price.range = [ this.filter.price.range[ 0 ], maxPrice ];\n                                this.addFilterWatchers( );\n                            }\n                            this.filter.price.max = maxPrice;\n                        }\n                    };\n                    const updateFilterQuantityRangeNoAccesibilityFromTicketOffers = ( offers ) => {\n                        const getNewMaxQuantityFromOffers = ( ) => {\n                            return offers.reduce( ( max, item ) => {\n                                let maxLimit = parseFloat( item.limitMax );\n\n                                return maxLimit > max ? maxLimit : max;\n\n                            }, this.filterOptions.noAccesability.maxQuantity );\n                        };\n\n                        const maxQuantity = getNewMaxQuantityFromOffers( );\n                        if ( maxQuantity > this.filterOptions.noAccesability.maxQuantity ) {\n                            this.filterOptions.noAccesability.maxQuantity = maxQuantity;\n                            this.filterOptions.current.maxQuantity = maxQuantity;\n                        }\n                    };\n\n                    this.ticketTypesMap = {\n                        ...this.ticketTypesMap,\n                        ...( responseTickets.ticketTypes.reduce( ( acc, item ) => {\n                            acc[ item.id ] = item;\n\n                            return acc;\n                        }, { } ) )\n                    };\n\n                    this.offersMap = {\n                        ...this.offersMap,\n                        ...( responseTickets.offers.reduce( ( acc, { pointsEarned, ...rest } ) => {\n                            acc[rest.id] = {\n                                ...rest,\n                                bonusPoints: pointsEarned || 0,\n                                ticketType: rest.id ? this.ticketTypesMap[ rest.id ] : null\n                            };\n\n                            return acc;\n                        }, { } ) )\n                    };\n\n\n\n                    this.tickets = [\n                        ...this.tickets,\n                        ...( responseTickets.tickets.items.map ( item => {\n                            return {\n                                ...item,\n                                offerIds: item.offers,\n                                offers: item.offers\n                                    .map( offerId => {\n                                        const offer = this.offersMap[ offerId ];\n\n                                        if ( !offer ) {\n                                            return;\n                                        }\n\n                                        return {\n                                            ...offer,\n                                            ticketType: this.ticketTypesMap[ offer.ticketTypeId ]\n                                        };\n                                    } )\n                                    .filter( offer => offer )\n                            };\n                        } ) )\n                    ];\n                    this.totalTickets = responseTickets.tickets.totalCount;\n\n                    updateFilterPriceRangeFromTicketOffers( responseTickets.offers );\n                    accessibility || updateFilterQuantityRangeNoAccesibilityFromTicketOffers( responseTickets.offers );\n                    if ( !this.venueDetails.mapUrl ) {\n                        Vue.set( this.venueDetails, 'mapUrl', responseTickets.eventDetails.venueMapUrl );\n                        Vue.set( this.venueDetails, 'mapWithlabelsUrl', responseTickets.eventDetails.venueMapWithLabelsUrl );\n                    }\n                };\n\n                if ( isEqual ( this.lastAppliedFilter, { ...this.filter, sort: this.sort.value.value } ) && refresh ) {\n                    return;\n                }\n\n                this.loadingTickets = true;\n                !refresh || clearData( );\n\n                this.lastAppliedFilter = cloneDeep( { ...this.filter, sort: this.sort.value.value } );\n\n                const accessibility = this.filter.accessibility;\n                const responseTickets = await this.loadEventTickets( {\n                    eventId: this.itemId,\n                    refresh,\n                    search: getSearchParams( ),\n                    userAnalytics: this.userAnalytics\n                }, );\n\n                if ( responseTickets.success ) {\n                    if ( refresh ) {\n                        clearData();\n                    }\n\n                    updateDataFromResponse ( responseTickets.data, accessibility );\n                } else {\n                    if ( responseTickets.code && responseTickets.code === apiConstants.ERROR_CODES.EVENT_PROVIDER.SYSTEM_DOWN ) {\n                        this.isEventTicketsMaintenance = true;\n                    }\n                }\n                this.loadingTickets = false;\n                this.userAnalytics = true;\n\n                return responseTickets;\n            },\n            async loadSections( ) {\n                const sectionsResponse = await this.loadSectionsByEventId( { eventId: this.itemId, guestCount: this.filterSections.quantity } );\n                this.sections = sectionsResponse.success ? sectionsResponse.data.sections : [] ;\n\n                return sectionsResponse;\n            },\n            loadTicketsDebounced: debounce( function( refresh = false ) {\n                this.loadTickets( refresh );\n            }, listConstants.DEBOUNCE_DELAY ),\n            loadSectionDebounced: debounce( function() {\n                this.loadSections( );\n            }, listConstants.DEBOUNCE_DELAY ),\n\n            getTicketDetailInfo( ticket ) {\n                return {\n                    ticket: ticket,\n                    offers: ticket.offers,\n                    event: this.event,\n                    quantity: this.filter.quantity,\n                };\n            },\n            openEventTicketDetail( ticket ) {\n                this.selectedTicket = ticket;\n            },\n            closeEventTicketDetail( ) {\n                this.selectedTicket = null;\n            },\n            setHighlightedTicket( ticket ) {\n                this.highlightedTicket = ticket;\n            },\n            setHighlightedSection( section ) {\n                this.highlightedSection = section;\n            },\n            setSelectedSection( section ) {\n                this.selectedSection = section;\n            },\n            closeSelectedSection( ) {\n                this.selectedSection = null;\n            },\n            setSelectedHotelReservation( item ) {\n                this.selectedHotelReservation = item;\n            },\n            openTicketAdditionalFiltersModal( ) {\n                this.$modal.showBottom(\n                    ( ) => import( './TheEvent/EventTicketFilterModal' ),\n                    {\n                        value: this.filter,\n                        options: this.filterOptions.current,\n                        sort : this.sort,\n                        busEventParent: this.busEvent\n                    },\n                    {\n                        scrollable: false,\n                        fullscreen: false,\n                        'hide-overlay': false\n                    },\n                    {\n                        beforeClose: ( ) => {\n                            this.showAddionalTicketFilters = false;\n                        }\n                    }\n                );\n            },\n            openHealthCheckConfirmationModal( ) {\n                const { healthCheck } = this.event;\n                this.$modal.show(\n                    HealthCheckConfirmationModal,\n                    {\n                        healthCheck\n                    },\n                    {\n                        'no-click-animation': true,\n                        scrollable: true,\n                        fullscreen: false,\n                        persistent: true,\n                        'hide-overlay': false,\n                        'max-width': 858,\n                        'content-class': 'gst-v-dialog',\n                    }\n                );\n            },\n            openEventPackageOffersNotAvailableModal( ) {\n                this.$modal.show(\n                    ( ) => import( './TheEvent/EventPackageOffersNotAvailableModal' ),\n                    { },\n                    {\n                        'max-width': 858\n                    },\n                    {\n                        beforeClose: ( ) => {\n                            this.closeSelectedSection( );\n                            this.closeEventTicketDetail( );\n                            this.loadSections( );\n                        }\n                    }\n                );\n            },\n            updateFilter( filter ) {\n                this.filter = filter;\n            },\n            resetFilter( ) {\n                this.filter.quantity = CONFIG_TICKETS.FILTER_DEFAULT.QUANTITY;\n                this.filter.price.range = [ this.filter.price.min, this.filter.price.max ];\n                this.filter.accessibility = CONFIG_TICKETS.FILTER_DEFAULT.ACCESSIBILITY;\n            },\n            removeFilterWatchers( ) {\n                !this._watchFilterQuantity || this._watchFilterQuantity( );\n                !this._watchFilterPriceRange ||  this._watchFilterPriceRange( );\n                !this._watchFilterAccessibility || this._watchFilterAccessibility( );\n            },\n            updateSort( sort ) {\n                this.sort = sort;\n            },\n            resetSort( ) {\n                this.sort.value = this.defaultSort;\n            },\n            addFilterWatchers( ) {\n                const addForQuantity = ( ) => {\n                    !this._watchFilterQuantity || this._watchFilterQuantity( );\n                    this._watchFilterQuantity = this.$watch( 'filter.quantity', ( ) => {\n                        this.selectedHotelReservation = null;\n                        this.loadTicketsDebounced( true );\n                    } );\n                };\n\n                const sectionsAddForQuantity = ( ) => {\n                    !this._watchFilterQuantity || this._watchFilterQuantity( );\n                    this._watchFilterQuantity = this.$watch( 'filterSections.quantity', ( ) => {\n                        this.loadSectionDebounced(  );\n                    } );\n                };\n\n                const addForPriceRange = ( ) => {\n                    !this._watchFilterPriceRange ||  this._watchFilterPriceRange( );\n                    this._watchFilterPriceRange = this.$watch( 'filter.price.range', ( newValue, oldValue ) => {\n                        if ( newValue[ 0 ] !== oldValue[ 0 ] || newValue[ 1 ] !== oldValue[ 1 ] ) {\n                            this.loadTicketsDebounced( true );\n                        }\n                    } );\n                };\n                const addForAccessibility = ( ) => {\n                    !this._watchFilterAccessibility || this._watchFilterAccessibility( );\n                    this._watchFilterAccessibility = this.$watch( 'filter.accessibility', value => {\n                        const { current, accessibility, noAccesability } = this.filterOptions;\n                        const { quantity } = this.filter;\n\n                        if ( value ) {\n                            this.filterOptions.current.minQuantity = accessibility.minQuantity;\n                            this.filterOptions.current.maxQuantity = accessibility.maxQuantity;\n                        } else {\n                            this.filterOptions.current.minQuantity = noAccesability.minQuantity;\n                            this.filterOptions.current.maxQuantity = noAccesability.maxQuantity;\n                        }\n                        if ( quantity >= current.minQuantity && quantity <=current.maxQuantity ) {\n                            this.loadTicketsDebounced( true );\n                        } else {\n                            this.filter.quantity = CONFIG_TICKETS.FILTER_DEFAULT.QUANTITY <= current.maxQuantity ? Math.max( current.minQuantity, CONFIG_TICKETS.FILTER_DEFAULT.QUANTITY ) : current.minQuantity;\n                        }\n                    } );\n                };\n\n                if( this.isPackageFlow ) {\n                    sectionsAddForQuantity();\n                    return;\n                }\n\n                addForQuantity( );\n                addForPriceRange( );\n                addForAccessibility( );\n            },\n            deferReloadFutureOnSaleDate( ) {\n                const now = new Date( );\n                const { onSaleStartDateTimeAt } = this.event;\n\n                if ( onSaleStartDateTimeAt && dateUtilsIsAfter( onSaleStartDateTimeAt, now ) ) {\n                    const delay = Math.min( ( dateUtilsDifferenceInSeconds( onSaleStartDateTimeAt, now ) * 1000 ), ( Math.pow( 2, 31 ) - 1 ) );\n\n                    this.deferReload = setTimeout(\n                        ( ) => {\n                            this.loadData( );\n                        },\n                        delay\n                    );\n                }\n            },\n            async checkout( payload ) {\n                const callbackAddItemToCartErrorFn = ( response ) => {\n                    const { code } = response;\n\n                    const i18Prefix = '_common:messageServerErrorCodesFromContext.reserve';\n                    switch ( code ) {\n                        case apiConstants.ERROR_CODES.HOTEL_PROVIDER.PRODUCT_ERROR:\n                            this.notificationWarning( {\n                                title: this.$t( `${i18Prefix}.${code}.title` ),\n                                content: this.$t( `${i18Prefix}.${code}.detail` ),\n                                autoDismiss: false\n                            } );\n                            break;\n                        case apiConstants.ERROR_CODES.HOTEL_PROVIDER.INVALID_REQUEST:\n                        case apiConstants.ERROR_CODES.HOTEL_PROVIDER.INVALID_DATA:\n                        case apiConstants.ERROR_CODES.HOTEL_PROVIDER.SYSTEM_ERROR:\n                            this.notificationError( {\n                                title: this.$t( `${i18Prefix}.hotelProviderDefault.title` ),\n                                content: this.$t( `${i18Prefix}.hotelProviderDefault.detail` )\n                            } );\n                            break;\n                        case apiConstants.ERROR_CODES.PACKAGE_OFFERS_NOT_AVAILABLE:\n                            this.openEventPackageOffersNotAvailableModal( );\n                            break;\n                        default:\n                            this.notificationError( notificationUtilsGetFromApiResponse( response ) );\n                            this.closeSelectedSection( );\n                            this.closeEventTicketDetail( );\n                            break;\n                    }\n                };\n\n\n                if ( this.selectedHotelReservation ) {\n                    this.$router.push( { name: `${this.$route.name}.reservation`, params: { payload, callbackAddItemToCartErrorFn } } );\n                } else {\n                    this.$modal.show(\n                        ( ) => import( './TheEvent/EventCheckoutConfirmationModal' ),\n                        {\n                            onConfirmFn: ( ) => {\n                                this.$router.push( { name: `${this.$route.name}.reservation`, params: { payload, callbackAddItemToCartErrorFn } } );\n                            }\n                        },\n                        {\n                            'max-width': 800,\n                        }\n                    );\n                    return;\n                }\n\n            },\n            onBannerClickBackDo( ) {\n                const { selectedTicket, selectedSection } = this;\n\n                if ( selectedTicket ) {\n                    return this.closeEventTicketDetail( );\n                }\n                if ( selectedSection ) {\n                    return this.closeSelectedSection( );\n                } else {\n                    tenantRedirectToHome( );\n                }\n            }\n        },\n        async mounted( ) {\n            await this.loadData( );\n        },\n        created( ) {\n            this.busEvent.$on( 'reset-filter', this.resetFilter );\n            this.busEvent.$on( 'update-filter', this.updateFilter );\n            this.busEvent.$on( 'checkout', this.checkout );\n            this.busEvent.$on( 'update-sort', this.updateSort );\n            this.busEvent.$on( 'reset-sort', this.resetSort );\n            this.busEvent.$on( 'set-hotel-reservation', this.setSelectedHotelReservation );\n        },\n        destroyed( ) {\n            this.busEvent.$off( 'reset-filter' );\n            this.busEvent.$off( 'update-filter' );\n            this.busEvent.$off( 'checkout' );\n            this.busEvent.$off( 'update-sort' );\n            this.busEvent.$off( 'reset-sort' );\n            this.busEvent.$off( 'set-hotel-reservation' );\n\n            ApiCancelService.clear( 'events.one' );\n            ApiCancelService.clear( 'packageOffers.oneByEventId' );\n            ApiCancelService.clear( 'packageOffers.getSectionsByEventId' );\n            ApiCancelService.clear( 'tickets.get' );\n            ApiCancelService.clear( 'tickets.availability' );\n\n            this._destroyed = true;\n        },\n        beforeRouteEnter( to, from, next ) {\n            next( ( cmp ) => {\n                cmp.previousRoute = from;\n            } );\n        },\n        beforeRouteUpdate( to, from, next ) {\n            this.previousRoute = from;\n            next( );\n        },\n    };\n</script>\n\n<style scoped lang=\"scss\">\n    @import \"@scssVariables\";\n    @import \"@scssMixins\";\n\n    .gst-event {\n        height: calc( 100vh - 50px );\n    }\n\n    .gst-event-mobile {\n        height: 100vh;\n    }\n\n    .gst-event__filter {\n        padding-top: 12px;\n        z-index: 1;\n\n        @include mobile-only {\n            padding-top: 16px;\n        }\n    }\n</style>\n"]}]}