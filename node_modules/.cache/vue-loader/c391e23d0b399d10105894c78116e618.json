{"remainingRequest":"/Users/cristiandan/Desktop/proiect-licenta-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cristiandan/Desktop/proiect-licenta-front/src/core/shared/components/search/SearchKeywordWithAutocomplete.vue?vue&type=style&index=0&id=aa2497c4&lang=scss&scoped=true&","dependencies":[{"path":"/Users/cristiandan/Desktop/proiect-licenta-front/src/core/shared/components/search/SearchKeywordWithAutocomplete.vue","mtime":1645805363971},{"path":"/Users/cristiandan/Desktop/proiect-licenta-front/node_modules/css-loader/dist/cjs.js","mtime":1637061260154},{"path":"/Users/cristiandan/Desktop/proiect-licenta-front/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1637061260528},{"path":"/Users/cristiandan/Desktop/proiect-licenta-front/node_modules/postcss-loader/src/index.js","mtime":1637061260465},{"path":"/Users/cristiandan/Desktop/proiect-licenta-front/node_modules/sass-loader/dist/cjs.js","mtime":1637061279772},{"path":"/Users/cristiandan/Desktop/proiect-licenta-front/node_modules/cache-loader/dist/cjs.js","mtime":1637061222564},{"path":"/Users/cristiandan/Desktop/proiect-licenta-front/node_modules/vue-loader/lib/index.js","mtime":1637061260528}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpAaW1wb3J0ICJAc2Nzc1ZhcmlhYmxlcyI7CkBpbXBvcnQgIkBzY3NzTWl4aW5zIjsKCi5nc3Qtc2VhcmNoLWlucHV0IHsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQoKLmdzdC1zZWFyY2gta2V5d29yZC13aXRoLWF1dG9jb21wbGV0ZV9fbWVudSB7CiAgICBtYXJnaW4tdG9wOiA4cHg7CiAgICBib3JkZXItcmFkaXVzOiBib3JkZXItcmFkaXVzKCAnbScgKSAhaW1wb3J0YW50OwogICAgbWFyZ2luLWxlZnQ6IC0xMnB4Owp9CgouZ3N0LXNlYXJjaC1rZXl3b3JkLXdpdGgtYXV0b2NvbXBsZXRlX19tZW51LWNvbnRlbnQgewogICAgcGFkZGluZzogMTZweDsKfQoKLmdzdC1zZWFyY2gta2V5d29yZC13aXRoLWF1dG9jb21wbGV0ZV9fbGlzdCB7CiAgICBwYWRkaW5nLWJvdHRvbTogMTZweDsKfQo="},{"version":3,"sources":["SearchKeywordWithAutocomplete.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuNA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA","file":"SearchKeywordWithAutocomplete.vue","sourceRoot":"src/core/shared/components/search","sourcesContent":["<template>\n    <div class=\"mx-5\">\n        <v-text-field\n            ref=\"inputSearch\"\n            :value=\"value\"\n            :placeholder=\"$t('shared:components.search.searchFieldBanner.placeholder')\"\n            class=\"gst-search-input\"\n            v-bind=\"inputSearchAttrs\"\n            clearable\n            clear-icon=\"mdi-clear\"\n            autocomplete=\"off\"\n            data-hj-allow\n            @click=\"toggleMenu\"\n            @focus=\"onFocusInputSearchDo\"\n            @blur=\"onBlurInputSearchDo\"\n            @input=\"onInput\"\n            @keydown.enter=\"onEnterKeyDo\"\n            @keydown.tab=\"onTabKeyDo\">\n            <template slot=\"prepend-inner\" class=\"text-primary\">\n                <IconSearch\n                    class=\"gst-search-icon-svg\"\n                    :class=\"{\n                        'gst-search-icon-svg-focused': isFocused\n                    }\"\n                    @click=\"toggleMenu\" />\n            </template>\n            <template v-if=\"value !== ''\" slot=\"append\" class=\"text-primary\">\n                <IconCancel class=\"gst-search-icon-cancel-svg u-mouse-pointer\" @click=\"onInput('')\" />\n            </template>\n        </v-text-field>\n        <v-menu\n            v-model=\"isMenuOpen\"\n            attach=\".gst-search-input\"\n            min-width=\"585\"\n            max-height=\"580\"\n            :nudge-left=\"menuTargetPositionX\"\n            :nudge-bottom=\"menuTargetPositionY\"\n            :close-on-content-click=\"false\"\n            absolute\n            allow-overflow\n            content-class=\"gst-search-keyword-with-autocomplete__menu\">\n            <div\n                @mouseover=\"hoverOverMenu = true\"\n                @mouseleave=\"hoverOverMenu = false\">\n                <v-list\n                    class=\"gst-search-keyword-with-autocomplete__menu-content\">\n                    <SearchResultList\n                        v-if=\"searching\"\n                        :redirect-to-attraction=\"redirectToAttraction\"\n                        :redirect-to-event=\"redirectToEvent\"\n                        :redirect-to-venue=\"redirectToVenue\"\n                        :see-all-button-route=\"seeAllButtonRoute\"\n                        search-keyword-only\n                        class=\"gst-search-keyword-with-autocomplete__list\"\n                        @select=\"selectItem\" />\n                </v-list>\n            </div>\n        </v-menu>\n    </div>\n</template>\n\n<script>\n    import throttle from 'lodash/throttle';\n    import { mapGetters } from 'vuex';\n    import IconSearch from '@core/shared/assets/icons/search.svg';\n    import IconCancel from '@core/shared/assets/icons/cancel.svg';\n    import SearchResultList from './SearchResultList.vue';\n\n    export default {\n        name: 'SearchKeywordWithAutocomplete',\n        components: {\n            IconSearch,\n            SearchResultList,\n            IconCancel\n        },\n        i18nOptions: {\n            namespaces: 'shared',\n            keyPrefix: 'components.search.searchCity'\n        },\n        props: {\n            value: {\n                type: String,\n                default: ''\n            },\n            inputSearchAttrs: {\n                type: Object,\n                default: () => {\n                    return {\n                        'single-line': true,\n                        solo: true,\n                        'hide-details': true,\n                        flat: true\n                    };\n                }\n            },\n            redirectToAttraction: {\n                type: Boolean,\n                default: true\n            },\n            redirectToEvent: {\n                type: Boolean,\n                default: true\n            },\n            redirectToVenue: {\n                type: Boolean,\n                default: true\n            },\n            redirectToSearchOnEnter: {\n                type: Boolean,\n                default: false\n            },\n            resultListSeeAllButtonRoute: {\n                type: Object,\n                default: null\n            }\n        },\n        data( ) {\n            return {\n                isMenuOpen: false,\n                hoverOverMenu: false,\n                isFocused: false,\n                menuTargetPositionX: 0,\n                menuTargetPositionY: 0,\n            };\n        },\n        computed: {\n            ...mapGetters( {\n                currentQueryObject: 'searchState/currentQueryObject',\n                currentQueryObjectOnlyKeyword: 'searchState/currentQueryObjectOnlyKeyword',\n            } ),\n            searching( ) {\n                return this.isValue ( this.value );\n            },\n            seeAllButtonRoute() {\n                return this.resultListSeeAllButtonRoute ? this.resultListSeeAllButtonRoute : { name: 'search', query: this.currentQueryObject };\n            }\n        },\n        watch: {\n            '$route': function () {\n                this.isMenuOpen = false;\n            }\n        },\n        methods: {\n            onInput( value ) {\n                this.$emit( 'input', value );\n                this.openMenu( value );\n            },\n            isValue( value ) {\n                return !!( value && value.trim( ) !== '' );\n            },\n            onEnterKeyDo( ) {\n                if ( this.redirectToSearchOnEnter && this.value.trim( ) !== '' ) {\n                    this.$router.push( {\n                        name: 'search',\n                        query: {\n                            keyword: this.value\n                        }\n                    } ).catch( err => {\n                        if ( err.name != 'NavigationDuplicated' ) {\n                            // eslint-disable-next-line no-console\n                            console.error( err );\n                        }\n                    } );\n                }\n            },\n            onTabKeyDo() {\n                this.$emit( 'tab-keydown' );\n            },\n            toggleMenu( ) {\n                this.isMenuOpen ? this.closeMenu( ) : this.openMenu( );\n            },\n            closeMenu( ) {\n                setTimeout( ( ) => {\n                    this.isFocused = false;\n                    this.isMenuOpen = false;\n                }, 200 );\n            },\n            openMenu( val ) {\n                const value = val === undefined ? this.value : val;\n\n                if ( !this.isValue( value ) ) {\n                    this.isMenuOpen = false;\n                    return;\n                }\n                const menuTargetPosition = this.$refs.inputSearch.$el.getBoundingClientRect( );\n\n                this.menuTargetPositionY = menuTargetPosition.height;\n                this.isMenuOpen = true;\n            },\n            selectItem( value ) {\n                if ( !this.redirectToSearchItem ) {\n                    this.$emit( 'input', value );\n                    this.closeMenu( );\n                }\n            },\n            onFocusInputSearchDo( ) {\n                this.isFocused = true;\n                this.$emit( 'focus' );\n            },\n            onBlurInputSearchDo( ) {\n                this.hoverOverMenu || this.closeMenu();\n                this.$emit( 'blur' );\n            }\n        },\n        mounted( ) {\n            this.throttleMenuClose = throttle( this.closeMenu, 20 );\n            window.addEventListener( 'resize', this.throttleMenuClose );\n        },\n        destroyed( ) {\n            window.removeEventListener( 'resize', this.throttleMenuClose );\n        }\n    };\n</script>\n\n<style lang=\"scss\" scoped>\n    @import \"@scssVariables\";\n    @import \"@scssMixins\";\n\n    .gst-search-input {\n        position: relative;\n    }\n\n    .gst-search-keyword-with-autocomplete__menu {\n        margin-top: 8px;\n        border-radius: border-radius( 'm' ) !important;\n        margin-left: -12px;\n    }\n\n    .gst-search-keyword-with-autocomplete__menu-content {\n        padding: 16px;\n    }\n\n    .gst-search-keyword-with-autocomplete__list {\n        padding-bottom: 16px;\n    }\n</style>\n"]}]}