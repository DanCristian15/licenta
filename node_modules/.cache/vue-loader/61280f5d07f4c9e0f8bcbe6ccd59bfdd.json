{"remainingRequest":"/Users/cristiandan/Desktop/proiect-licenta-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cristiandan/Desktop/proiect-licenta-front/src/core/shared/components/search/SearchCity.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/cristiandan/Desktop/proiect-licenta-front/src/core/shared/components/search/SearchCity.vue","mtime":1645805363970},{"path":"/Users/cristiandan/Desktop/proiect-licenta-front/node_modules/cache-loader/dist/cjs.js","mtime":1637061222564},{"path":"/Users/cristiandan/Desktop/proiect-licenta-front/node_modules/babel-loader/lib/index.js","mtime":1637061222406},{"path":"/Users/cristiandan/Desktop/proiect-licenta-front/node_modules/cache-loader/dist/cjs.js","mtime":1637061222564},{"path":"/Users/cristiandan/Desktop/proiect-licenta-front/node_modules/vue-loader/lib/index.js","mtime":1637061260528}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlLCBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCc7CmltcG9ydCB0aHJvdHRsZSBmcm9tICdsb2Rhc2gvdGhyb3R0bGUnOwppbXBvcnQgZGVib3VuY2UgZnJvbSAnbG9kYXNoL2RlYm91bmNlJzsKaW1wb3J0IHsKICAgIGhhc0xvY2F0aW9uIGFzIGNpdHlPYmplY3RVdGlsc0hhc0xvY2F0aW9uLAogICAgaGFzQ3VycmVudExvY2F0aW9uIGFzIGNpdHlPYmplY3RVdGlsc0hhc0N1cnJlbnRMb2NhdGlvbgp9IGZyb20gJ0B1dGlscy9jaXR5T2JqZWN0VXRpbHMnOwppbXBvcnQgSWNvbkxvY2F0aW9uIGZyb20gJ0Bjb3JlL3NoYXJlZC9hc3NldHMvaWNvbnMvbG9jYXRpb24uc3ZnJzsKaW1wb3J0IEljb25IaXN0b3J5IGZyb20gJ0Bjb3JlL3NoYXJlZC9hc3NldHMvaWNvbnMvaGlzdG9yeS5zdmcnOwppbXBvcnQgSWNvbkdQUyBmcm9tICdAY29yZS9zaGFyZWQvYXNzZXRzL2ljb25zL2dwcy5zdmcnOwppbXBvcnQgSWNvbkNhbmNlbCBmcm9tICdAY29yZS9zaGFyZWQvYXNzZXRzL2ljb25zL2NhbmNlbC5zdmcnOwppbXBvcnQgRGF0YUxvYWRpbmcgZnJvbSAnQGNvcmUvc2hhcmVkL2NvbXBvbmVudHMvbG9hZGluZy9EYXRhTG9hZGluZy52dWUnOwppbXBvcnQgU2VhcmNoUmVzdWx0Tm9EYXRhIGZyb20gJy4vY29tbW9uL1NlYXJjaFJlc3VsdE5vRGF0YS52dWUnOwppbXBvcnQgU2VjdGlvblRpdGxlU21hbGwgZnJvbSAnLi4vbWlzYy9TZWN0aW9uVGl0bGVTbWFsbC52dWUnOwppbXBvcnQgU2VhcmNoQ2l0eUxpc3QgZnJvbSAnLi9TZWFyY2hDaXR5TGlzdC52dWUnOwoKY29uc3QgU1RPUkVfTkFNRSA9ICdjaXRpZXMnOwpjb25zdCBDT05GSUcgPSB7CiAgICBNQVhfUkVTVUxUUzogMwp9OwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ1NlYWNoQ2l0eScsCiAgICBjb21wb25lbnRzOiB7CiAgICAgICAgSWNvbkNhbmNlbCwKICAgICAgICBJY29uTG9jYXRpb24sCiAgICAgICAgSWNvbkhpc3RvcnksCiAgICAgICAgSWNvbkdQUywKICAgICAgICBEYXRhTG9hZGluZywKICAgICAgICBTZWN0aW9uVGl0bGVTbWFsbCwKICAgICAgICBTZWFyY2hSZXN1bHROb0RhdGEsCiAgICAgICAgU2VhcmNoQ2l0eUxpc3QKICAgIH0sCiAgICBpMThuT3B0aW9uczogewogICAgICAgIG5hbWVzcGFjZXM6ICdzaGFyZWQnLAogICAgICAgIGtleVByZWZpeDogJ2NvbXBvbmVudHMuc2VhcmNoLnNlYXJjaENpdHknCiAgICB9LAogICAgcHJvcHM6IHsKICAgICAgICB2YWx1ZTogewogICAgICAgICAgICB0eXBlOiBPYmplY3QsCiAgICAgICAgICAgIGRlZmF1bHQ6ICggKSA9PiB7IHJldHVybiB7IG5hbWU6ICcnIH07IH0KICAgICAgICB9LAogICAgICAgIGlucHV0U2VhcmNoQXR0cnM6IHsKICAgICAgICAgICAgdHlwZTogT2JqZWN0LAogICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiB7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICdzaW5nbGUtbGluZSc6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgc29sbzogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAnaGlkZS1kZXRhaWxzJzogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBmbGF0OiB0cnVlCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBjbGVhcmFibGU6IHsKICAgICAgICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgICAgICAgZGVmYXVsdDogdHJ1ZQogICAgICAgIH0KICAgIH0sCiAgICBkYXRhKCApIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBzZWFyY2hWYWx1ZTogJycsCiAgICAgICAgICAgIGlzU2VhcmNoaW5nOiBmYWxzZSwKICAgICAgICAgICAgaXNGb2N1c2VkOiBmYWxzZSwKICAgICAgICAgICAgaXNNZW51T3BlbjogZmFsc2UsCiAgICAgICAgICAgIG1lbnVUYXJnZXRQb3NpdGlvblg6IDAsCiAgICAgICAgICAgIG1lbnVUYXJnZXRQb3NpdGlvblk6IDAsCiAgICAgICAgICAgIGxvYWRpbmdDdXJyZW50TG9jYXRpb246IGZhbHNlLAogICAgICAgICAgICBjaXRpZXM6IFtdLAogICAgICAgICAgICBsb2FkaW5nOiAwCiAgICAgICAgfTsKICAgIH0sCiAgICBjb21wdXRlZDogewogICAgICAgIC4uLm1hcFN0YXRlKCB7CiAgICAgICAgICAgIGhpc3RvcnlDaXRpZXM6IHN0YXRlID0+IHN0YXRlLnVzZXIuYnJvd3NpbmdIaXN0b3J5LmNpdGllcwogICAgICAgIH0gKSwKICAgICAgICBzaG93UmVjZW50Q2l0aWVzKCApIHsKICAgICAgICAgICAgcmV0dXJuICF0aGlzLmlzU2VhcmNoaW5nOwogICAgICAgIH0sCiAgICAgICAgc2hvd0ZpbHRlcmVkQ2l0aWVzKCApIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNTZWFyY2hpbmc7CiAgICAgICAgfSwKICAgICAgICBjYW5GaW5kTXlMb2NhdGlvbiggKSB7CiAgICAgICAgICAgIHJldHVybiAhIW5hdmlnYXRvci5nZW9sb2NhdGlvbjsKICAgICAgICB9LAogICAgICAgIHNlbGVjdFZhbHVlTGFiZWwoICkgewogICAgICAgICAgICBjb25zdCB7IHZhbHVlIH0gPSB0aGlzOwogICAgICAgICAgICBjb25zdCBjaXR5TGFiZWwgPSB0aGlzLiRvcHRpb25zLmZpbHRlcnMuY2l0eSggdmFsdWUsIHsgY291bnRyeTogdHJ1ZSB9ICk7CgogICAgICAgICAgICBpZiAoIGNpdHlMYWJlbCApIHsKICAgICAgICAgICAgICAgIHJldHVybiBjaXR5TGFiZWw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICggY2l0eU9iamVjdFV0aWxzSGFzTG9jYXRpb24gKCB2YWx1ZSApICkgewogICAgICAgICAgICAgICAgaWYgKCBjaXR5T2JqZWN0VXRpbHNIYXNDdXJyZW50TG9jYXRpb24oIHZhbHVlICkgKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHQoICdfY29tbW9uOnRlcm1zLm15Q3VycmVudExvY2F0aW9uJyApOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kdCggJ19jb21tb246dGVybXMubG9jYXRpb24nICk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHQoICdwbGFjZWhvbGRlcicgKTsKICAgICAgICB9CiAgICB9LAogICAgd2F0Y2g6IHsKICAgICAgICAnc2VhcmNoVmFsdWUnOiBmdW5jdGlvbiAoIG5ld1ZhbHVlICkgewogICAgICAgICAgICBpZiAoICFuZXdWYWx1ZSApIHsKICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoICdpbnB1dCcsIHsgbmFtZTogJycgfSApOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAndmFsdWUnOiBmdW5jdGlvbiAoIG5ld1ZhbHVlICkgewogICAgICAgICAgICB0aGlzLnNlYXJjaFZhbHVlID0gbmV3VmFsdWUubmFtZSB8fCAnJzsKICAgICAgICAgICAgdGhpcy5pc1NlYXJjaGluZyA9IGZhbHNlOwogICAgICAgICAgICAhdGhpcy51bndhdGNoU2VhcmNoVmFsUHJvcEFmdGVyVmFsdWVDaGFuZ2UgfHwgdGhpcy51bndhdGNoU2VhcmNoVmFsUHJvcEFmdGVyVmFsdWVDaGFuZ2UoICk7CiAgICAgICAgICAgIHRoaXMudW53YXRjaFNlYXJjaFZhbFByb3BBZnRlclZhbHVlQ2hhbmdlID0gdGhpcy4kd2F0Y2goICdzZWFyY2hWYWx1ZScsICggbmV3VmFsICkgPT4gewogICAgICAgICAgICAgICAgaWYoIG5ld1ZhbCApIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmlzU2VhcmNoaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnVud2F0Y2hTZWFyY2hWYWxQcm9wQWZ0ZXJWYWx1ZUNoYW5nZSggKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSApOwogICAgICAgIH0sCiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIC4uLm1hcEFjdGlvbnMoIHsKICAgICAgICAgICAgc2VhcmNoQ2l0aWVzOiBgJHtTVE9SRV9OQU1FfS9zZWFyY2hMaXN0YCwKICAgICAgICAgICAgZ2V0Q3VycmVudExvY2F0aW9uOiAndXNlci9sb2NhdGlvbi9nZXRDdXJyZW50TG9jYXRpb24nLAogICAgICAgICAgICBub3RpZmljYXRpb25FcnJvcjogJ25vdGlmaWNhdGlvbi9lcnJvcicsCiAgICAgICAgfSApLAogICAgICAgIGFzeW5jIGZpbmRNeUxvY2F0aW9uKCApIHsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nQ3VycmVudExvY2F0aW9uID0gdHJ1ZTsKICAgICAgICAgICAgY29uc3QgbG9jYXRpb24gPSBhd2FpdCB0aGlzLmdldEN1cnJlbnRMb2NhdGlvbiggeyBzaG93TWVzc2FnZTogdHJ1ZSwgcmVmcmVzaDogdHJ1ZSB9ICk7CiAgICAgICAgICAgIGlmICggbG9jYXRpb24gJiYgbG9jYXRpb24ucG9zaXRpb24gKSB7CiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENpdHkoIHsKICAgICAgICAgICAgICAgICAgICAuLi5sb2NhdGlvbi5jaXR5LAogICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQ6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmxvY2F0aW9uLnBvc2l0aW9uCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMubG9hZGluZ0N1cnJlbnRMb2NhdGlvbiA9IGZhbHNlOwogICAgICAgIH0sCiAgICAgICAgc2VsZWN0Q2l0eSggY2l0eSApIHsKICAgICAgICAgICAgdGhpcy5pc1NlYXJjaGluZyA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLiRlbWl0KCAnaW5wdXQnLCBjaXR5ICk7CiAgICAgICAgICAgIHRoaXMuaXNNZW51T3BlbiA9IGZhbHNlOwogICAgICAgIH0sCiAgICAgICAgb25JbnB1dElucHV0U2VhcmNoKCB2YWx1ZSApIHsKICAgICAgICAgICAgdGhpcy5zZWFyY2hWYWx1ZSA9IHZhbHVlOwogICAgICAgICAgICB0aGlzLm9wZW5NZW51KCApOwogICAgICAgIH0sCiAgICAgICAgb25CbHVySW5wdXRTZWFyY2goICkgewogICAgICAgICAgICBzZXRUaW1lb3V0KCAoICkgPT4gewogICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hWYWx1ZSA9IHRoaXMudmFsdWUubmFtZSB8fCAnJzsKICAgICAgICAgICAgICAgIHRoaXMuaXNGb2N1c2VkID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlTWVudSggKTsKICAgICAgICAgICAgfSwgMjAwICk7CiAgICAgICAgfSwKICAgICAgICBvbkZvY3VzSW5wdXRTZWFyY2goICkgewogICAgICAgICAgICB0aGlzLmlzRm9jdXNlZCA9IHRydWU7CiAgICAgICAgfSwKICAgICAgICB0b2dnbGVNZW51KCApIHsKICAgICAgICAgICAgdGhpcy5pc01lbnVPcGVuID8gdGhpcy5jbG9zZU1lbnUoICkgOiB0aGlzLm9wZW5NZW51KCApOwogICAgICAgIH0sCiAgICAgICAgY2xvc2VNZW51KCApIHsKICAgICAgICAgICAgdGhpcy5pc01lbnVPcGVuID0gZmFsc2U7CiAgICAgICAgfSwKICAgICAgICBvcGVuTWVudSggKSB7CiAgICAgICAgICAgIGNvbnN0IG1lbnVUYXJnZXRQb3NpdGlvbiA9IHRoaXMuJHJlZnMuaW5wdXRTZWFyY2guJGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCggKTsKCiAgICAgICAgICAgIHRoaXMubWVudVRhcmdldFBvc2l0aW9uWCA9IG1lbnVUYXJnZXRQb3NpdGlvbi54OwogICAgICAgICAgICB0aGlzLm1lbnVUYXJnZXRQb3NpdGlvblkgPSBtZW51VGFyZ2V0UG9zaXRpb24ueSArIG1lbnVUYXJnZXRQb3NpdGlvbi5oZWlnaHQ7CiAgICAgICAgICAgIHRoaXMuaXNNZW51T3BlbiA9IHRydWU7CiAgICAgICAgfSwKICAgICAgICBsb2FkRGF0YURlYm91Y2VkOiBkZWJvdW5jZSggYXN5bmMgZnVuY3Rpb24gKCApIHsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gdGhpcy5sb2FkaW5nICsgMTsKICAgICAgICAgICAgdGhpcy5jaXRpZXMgPSBhd2FpdCB0aGlzLnNlYXJjaENpdGllcyggeyByZWZyZXNoOiB0cnVlLCBzZWFyY2g6IHsga2V5d29yZDogdGhpcy5zZWFyY2hWYWx1ZSwgbGltaXQ6IENPTkZJRy5NQVhfUkVTVUxUUywgb2Zmc2V0OiAwIH0gfSApIHx8IFsgXTsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gdGhpcy5sb2FkaW5nIC0gMTsKICAgICAgICB9LCA1MDAgKSwKICAgICAgICBvblRhYktleURvKCkgewogICAgICAgICAgICB0aGlzLiRlbWl0KCAndGFiLWtleWRvd24nICk7CiAgICAgICAgfSwKICAgIH0sCiAgICBjcmVhdGVkKCApIHsKICAgICAgICB0aGlzLnNlYXJjaFZhbHVlID0gdGhpcy52YWx1ZS5uYW1lOwogICAgICAgIHRoaXMuJHdhdGNoKCAnc2VhcmNoVmFsdWUnLCAoIG5ld1ZhbCApID0+IHsKICAgICAgICAgICAgaWYoIG5ld1ZhbCAmJiBuZXdWYWwgIT09IHRoaXMudmFsdWUubmFtZSApIHsKICAgICAgICAgICAgICAgIHRoaXMuaXNTZWFyY2hpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgdGhpcy5sb2FkRGF0YURlYm91Y2VkKCApOwogICAgICAgICAgICB9CiAgICAgICAgfSApOwogICAgfSwKICAgIG1vdW50ZWQoICkgewogICAgICAgIHRoaXMudGhyb3R0bGVNZW51Q2xvc2UgPSB0aHJvdHRsZSggKCApID0+IHsKICAgICAgICAgICAgdGhpcy5pc01lbnVPcGVuID0gZmFsc2U7CiAgICAgICAgfSwgMjAgKTsKCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICdyZXNpemUnLCB0aGlzLnRocm90dGxlTWVudUNsb3NlICk7CiAgICB9LAogICAgZGVzdHJveWVkKCApIHsKICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ3Jlc2l6ZScsIHRoaXMudGhyb3R0bGVNZW51Q2xvc2UgKTsKICAgIH0KfTsK"},{"version":3,"sources":["SearchCity.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"SearchCity.vue","sourceRoot":"src/core/shared/components/search","sourcesContent":["<template>\n    <v-menu\n        v-model=\"isMenuOpen\"\n        :position-x=\"menuTargetPositionX\"\n        :position-y=\"menuTargetPositionY\"\n        :close-on-content-click=\"false\"\n        bottom\n        absolute\n        allow-overflow\n        content-class=\"gst-search-city-menu\">\n        <template v-slot:activator=\"{ on }\">\n            <v-text-field\n                ref=\"inputSearch\"\n                :value=\"isFocused ? searchValue : ''\"\n                :placeholder=\"!isFocused ? selectValueLabel : ''\"\n                class=\"mx-1 pt-0 mr-3 gst-search-input gst-search-city-menu__input-search\"\n                v-bind=\"inputSearchAttrs\"\n                autocomplete=\"off\"\n                data-hj-allow\n                @click=\"toggleMenu\"\n                @input=\"onInputInputSearch\"\n                @blur=\"onBlurInputSearch\"\n                @focus=\"onFocusInputSearch\"\n                @keydown.tab=\"onTabKeyDo\">\n                <template slot=\"prepend-inner\" class=\"text-primary\">\n                    <IconLocation\n                        class=\"gst-search-icon-svg\"\n                        :class=\"{\n                            'gst-search-icon-svg-focused': isFocused\n                        }\"\n                        @click=\"toggleMenu\" />\n                </template>\n                <template v-if=\"!isFocused\" slot=\"label\">\n                    <!-- eslint-disable-next-line vue/no-v-html -->\n                    <span class=\"gst-search-label\" v-html=\"$options.filters.cityHTML( value, { country: true } )\"></span>\n                </template>\n                <template slot=\"append\" class=\"text-primary\">\n                    <data-loading v-if=\"loadingCurrentLocation\" :width=\"2\" :size=\"20\" class=\"d-flex align-self-center justify-center\" />\n                    <IconCancel v-if=\"searchValue && clearable\" class=\"gst-search-icon-cancel-svg u-mouse-pointer\" @click=\"searchValue = ''\" />\n                </template>\n            </v-text-field>\n            <v-btn class=\"d-none\" v-on=\"on\" />\n        </template>\n        <v-list class=\"gst-search-city-menu__list\">\n            <template v-if=\"canFindMyLocation\">\n                <v-list-item key=\"gps\" @click=\"findMyLocation\">\n                    <v-list-item-icon>\n                        <IconGPS class=\"gst-search-city-menu__item-icon\" />\n                    </v-list-item-icon>\n                    <v-list-item-title>\n                        {{ $t('_common:terms.useMyCurrentLocation') }}\n                    </v-list-item-title>\n                </v-list-item>\n                <v-divider />\n            </template>\n            <template v-if=\"showRecentCities\">\n                <SectionTitleSmall class=\"px-5 pt-4\">\n                    {{ $t('labels.recent') }}\n                </SectionTitleSmall>\n                <SearchResultNoData v-if=\"!historyCities.length\">\n                    {{ $t('labels.noRecent') }}\n                </SearchResultNoData>\n                <SearchCityList class=\"gst-search-city-menu__list\" :items=\"historyCities\" @select=\"selectCity\">\n                    <template v-slot:icon>\n                        <v-list-item-icon>\n                            <IconHistory class=\"gst-search-city-menu__item-icon\" />\n                        </v-list-item-icon>\n                    </template>\n                </SearchCityList>\n            </template>\n            <template v-if=\"showFilteredCities\">\n                <DataLoading v-if=\"!!loading\" :width=\"2\" class=\"gst-search-city-menu__loading\" />\n                <template v-else>\n                    <SectionTitleSmall class=\"px-5 pt-4\">\n                        {{ $t('labels.results') }}\n                    </SectionTitleSmall>\n                    <SearchResultNoData v-if=\"!cities.length\">\n                        {{ $t('labels.noResults') }}\n                    </SearchResultNoData>\n                    <SearchCityList :items=\"cities\" :highlight=\"searchValue\" @select=\"selectCity\">\n                        <template v-slot:icon>\n                            <v-list-item-icon>\n                                <IconLocation class=\"gst-search-city-menu__item-icon\" />\n                            </v-list-item-icon>\n                        </template>\n                    </SearchCityList>\n                </template>\n            </template>\n        </v-list>\n    </v-menu>\n</template>\n\n<script>\n    import { mapState, mapActions } from 'vuex';\n    import throttle from 'lodash/throttle';\n    import debounce from 'lodash/debounce';\n    import {\n        hasLocation as cityObjectUtilsHasLocation,\n        hasCurrentLocation as cityObjectUtilsHasCurrentLocation\n    } from '@utils/cityObjectUtils';\n    import IconLocation from '@core/shared/assets/icons/location.svg';\n    import IconHistory from '@core/shared/assets/icons/history.svg';\n    import IconGPS from '@core/shared/assets/icons/gps.svg';\n    import IconCancel from '@core/shared/assets/icons/cancel.svg';\n    import DataLoading from '@core/shared/components/loading/DataLoading.vue';\n    import SearchResultNoData from './common/SearchResultNoData.vue';\n    import SectionTitleSmall from '../misc/SectionTitleSmall.vue';\n    import SearchCityList from './SearchCityList.vue';\n\n    const STORE_NAME = 'cities';\n    const CONFIG = {\n        MAX_RESULTS: 3\n    };\n\n    export default {\n        name: 'SeachCity',\n        components: {\n            IconCancel,\n            IconLocation,\n            IconHistory,\n            IconGPS,\n            DataLoading,\n            SectionTitleSmall,\n            SearchResultNoData,\n            SearchCityList\n        },\n        i18nOptions: {\n            namespaces: 'shared',\n            keyPrefix: 'components.search.searchCity'\n        },\n        props: {\n            value: {\n                type: Object,\n                default: ( ) => { return { name: '' }; }\n            },\n            inputSearchAttrs: {\n                type: Object,\n                default: () => {\n                    return {\n                        'single-line': true,\n                        solo: true,\n                        'hide-details': true,\n                        flat: true\n                    };\n                }\n            },\n            clearable: {\n                type: Boolean,\n                default: true\n            }\n        },\n        data( ) {\n            return {\n                searchValue: '',\n                isSearching: false,\n                isFocused: false,\n                isMenuOpen: false,\n                menuTargetPositionX: 0,\n                menuTargetPositionY: 0,\n                loadingCurrentLocation: false,\n                cities: [],\n                loading: 0\n            };\n        },\n        computed: {\n            ...mapState( {\n                historyCities: state => state.user.browsingHistory.cities\n            } ),\n            showRecentCities( ) {\n                return !this.isSearching;\n            },\n            showFilteredCities( ) {\n                return this.isSearching;\n            },\n            canFindMyLocation( ) {\n                return !!navigator.geolocation;\n            },\n            selectValueLabel( ) {\n                const { value } = this;\n                const cityLabel = this.$options.filters.city( value, { country: true } );\n\n                if ( cityLabel ) {\n                    return cityLabel;\n                }\n\n                if ( cityObjectUtilsHasLocation ( value ) ) {\n                    if ( cityObjectUtilsHasCurrentLocation( value ) ) {\n                        return this.$t( '_common:terms.myCurrentLocation' );\n                    } else {\n                        return this.$t( '_common:terms.location' );\n                    }\n                }\n                return this.$t( 'placeholder' );\n            }\n        },\n        watch: {\n            'searchValue': function ( newValue ) {\n                if ( !newValue ) {\n                    this.$emit( 'input', { name: '' } );\n                }\n            },\n            'value': function ( newValue ) {\n                this.searchValue = newValue.name || '';\n                this.isSearching = false;\n                !this.unwatchSearchValPropAfterValueChange || this.unwatchSearchValPropAfterValueChange( );\n                this.unwatchSearchValPropAfterValueChange = this.$watch( 'searchValue', ( newVal ) => {\n                    if( newVal ) {\n                        this.isSearching = true;\n                        this.unwatchSearchValPropAfterValueChange( );\n                    }\n                } );\n            },\n        },\n        methods: {\n            ...mapActions( {\n                searchCities: `${STORE_NAME}/searchList`,\n                getCurrentLocation: 'user/location/getCurrentLocation',\n                notificationError: 'notification/error',\n            } ),\n            async findMyLocation( ) {\n                this.loadingCurrentLocation = true;\n                const location = await this.getCurrentLocation( { showMessage: true, refresh: true } );\n                if ( location && location.position ) {\n                    this.selectCity( {\n                        ...location.city,\n                        location: {\n                            current: true,\n                            ...location.position\n                        }\n                    } );\n                }\n                this.loadingCurrentLocation = false;\n            },\n            selectCity( city ) {\n                this.isSearching = false;\n                this.$emit( 'input', city );\n                this.isMenuOpen = false;\n            },\n            onInputInputSearch( value ) {\n                this.searchValue = value;\n                this.openMenu( );\n            },\n            onBlurInputSearch( ) {\n                setTimeout( ( ) => {\n                    this.searchValue = this.value.name || '';\n                    this.isFocused = false;\n                    this.closeMenu( );\n                }, 200 );\n            },\n            onFocusInputSearch( ) {\n                this.isFocused = true;\n            },\n            toggleMenu( ) {\n                this.isMenuOpen ? this.closeMenu( ) : this.openMenu( );\n            },\n            closeMenu( ) {\n                this.isMenuOpen = false;\n            },\n            openMenu( ) {\n                const menuTargetPosition = this.$refs.inputSearch.$el.getBoundingClientRect( );\n\n                this.menuTargetPositionX = menuTargetPosition.x;\n                this.menuTargetPositionY = menuTargetPosition.y + menuTargetPosition.height;\n                this.isMenuOpen = true;\n            },\n            loadDataDebouced: debounce( async function ( ) {\n                this.loading = this.loading + 1;\n                this.cities = await this.searchCities( { refresh: true, search: { keyword: this.searchValue, limit: CONFIG.MAX_RESULTS, offset: 0 } } ) || [ ];\n                this.loading = this.loading - 1;\n            }, 500 ),\n            onTabKeyDo() {\n                this.$emit( 'tab-keydown' );\n            },\n        },\n        created( ) {\n            this.searchValue = this.value.name;\n            this.$watch( 'searchValue', ( newVal ) => {\n                if( newVal && newVal !== this.value.name ) {\n                    this.isSearching = true;\n                    this.loadDataDebouced( );\n                }\n            } );\n        },\n        mounted( ) {\n            this.throttleMenuClose = throttle( ( ) => {\n                this.isMenuOpen = false;\n            }, 20 );\n\n            window.addEventListener( 'resize', this.throttleMenuClose );\n        },\n        destroyed( ) {\n            window.removeEventListener( 'resize', this.throttleMenuClose );\n        }\n    };\n</script>\n\n<style lang=\"scss\" scoped>\n    @import \"@scssVariables\";\n    @import \"@scssMixins\";\n\n    .gst-search-city-menu {\n        margin-top: 8px;\n        background-color: theme-color( 'white' );\n        border-radius: border-radius( 'm' ) !important;\n    }\n\n    .gst-search-city-menu__loading {\n        padding: 16px;\n    }\n\n    .gst-search-city-menu__list {\n        padding-top: 0;\n        padding-bottom: 0;\n        min-width: 280px;\n\n        .v-list-item__title {\n            font-size: $base-font-size !important;\n        }\n\n        .v-list-item__icon {\n            margin-right: 16px;\n        }\n    }\n\n    .gst-search-city-menu__item-icon {\n        .gst-svg-icon {\n            fill: theme-color( 'primary' );\n        }\n    }\n</style>\n"]}]}