{"remainingRequest":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cristiandan/Desktop/lifestyle-ui/src/tenants/ticketmaster/app/views/event/TheEvent/EventReservation.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/cristiandan/Desktop/lifestyle-ui/src/tenants/ticketmaster/app/views/event/TheEvent/EventReservation.vue","mtime":1645805365991},{"path":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/cache-loader/dist/cjs.js","mtime":1637061222564},{"path":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/babel-loader/lib/index.js","mtime":1637061222406},{"path":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/cache-loader/dist/cjs.js","mtime":1637061222564},{"path":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/vue-loader/lib/index.js","mtime":1637061260528}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IGlzRW1wdHkgZnJvbSAnbG9kYXNoL2lzRW1wdHknOwppbXBvcnQgeyBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCc7CmltcG9ydCBXYXJuQmVmb3JlTGVhdmUgZnJvbSAnQGNvcmUvbWl4aW5zL1dhcm5CZWZvcmVMZWF2ZSc7CmltcG9ydCB6SW5kZXggZnJvbSAnQHNjc3MvbWl4aW5zL196LWluZGV4LWV4cG9ydC1qcy5zY3NzJzsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdFdmVudFJlc2VydmF0aW9uJywKICAgIG1peGluczogWwogICAgICAgIFdhcm5CZWZvcmVMZWF2ZQogICAgXSwKICAgIHByb3BzOiB7CiAgICAgICAgcGF5bG9hZDogewogICAgICAgICAgICB0eXBlOiBPYmplY3QsCiAgICAgICAgICAgIGRlZmF1bHQ6ICggKSA9PiB7IHJldHVybiB7IH07IH0KICAgICAgICB9LAogICAgICAgIGNhbGxiYWNrQWRkSXRlbVRvQ2FydEVycm9yRm46IHsKICAgICAgICAgICAgdHlwZTogRnVuY3Rpb24sCiAgICAgICAgICAgIGRlZmF1bHQ6ICggKSA9PiAoICkgPT4geyB9CiAgICAgICAgfQogICAgfSwKICAgIGkxOG5PcHRpb25zOiB7CiAgICAgICAgbmFtZXNwYWNlczogJ21haW4nLAogICAgICAgIGtleVByZWZpeDogJ3ZpZXdzLmV2ZW50LnRoZUV2ZW50Ll9jb21wb25lbnRzJwogICAgfSwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgYnVzRXZlbnRQcm9ncmVzc1N0ZXA6IG5ldyBWdWUoICksCiAgICAgICAgfTsKICAgIH0sCiAgICBjb21wdXRlZDogewogICAgICAgIGxhYmVscyggKSB7CiAgICAgICAgICAgIGlmICggdGhpcy5wYXlsb2FkLmhvdGVsUmVzZXJ2YXRpb24gKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gWwogICAgICAgICAgICAgICAgICAgIHRoaXMuJHQoICdwcm9ncmVzc1N0ZXBBbmltYXRpb25Nb2RhbC5sYWJlbHMuc3RlcEJ1aWxkJyApLAogICAgICAgICAgICAgICAgICAgIHRoaXMuJHQoICdwcm9ncmVzc1N0ZXBBbmltYXRpb25Nb2RhbC5sYWJlbHMuc3RlcENoZWNrSG90ZWwnICksCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kdCggJ3Byb2dyZXNzU3RlcEFuaW1hdGlvbk1vZGFsLmxhYmVscy5zdGVwUmVzZXJ2ZVRpY2tldHMnICksCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kdCggJ3Byb2dyZXNzU3RlcEFuaW1hdGlvbk1vZGFsLmxhYmVscy5zdGVwQWRkQ2FydCcgKQogICAgICAgICAgICAgICAgXTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBbCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kdCggJ3Byb2dyZXNzU3RlcEFuaW1hdGlvbk1vZGFsLmxhYmVscy5zdGVwQ29uZmlybScgKSwKICAgICAgICAgICAgICAgICAgICB0aGlzLiR0KCAncHJvZ3Jlc3NTdGVwQW5pbWF0aW9uTW9kYWwubGFiZWxzLnN0ZXBSZXNlcnZlVGlja2V0cycgKSwKICAgICAgICAgICAgICAgICAgICB0aGlzLiR0KCAncHJvZ3Jlc3NTdGVwQW5pbWF0aW9uTW9kYWwubGFiZWxzLnN0ZXBBZGRDYXJ0JyApLAogICAgICAgICAgICAgICAgXTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgcm91dGVSZWRpcmVjdE9uRXJyb3IoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiRyb3V0ZS5tZXRhLnJvdXRlUmVkaXJlY3RPbkVycm9yOwogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgLi4ubWFwQWN0aW9ucyggewogICAgICAgICAgICBhZGRJdGVtVG9DYXJ0ICAgICAgICAgICAgICAgICAgIDogJ2NhcnQvYWRkSXRlbScsCiAgICAgICAgICAgIGluc3RhbnREZWxldGVDdXJyZW50Q2FydCAgICAgICAgOiAnY2FydC9pbnN0YW50RGVsZXRlQ3VycmVudENhcnQnCiAgICAgICAgfSApLAogICAgICAgIHNob3dQcm9ncmVzc0FuaW1hdGlvbk1vZGFsKCBwYXlsb2FkICkgewogICAgICAgICAgICBsZXQgcmVzcG9uc2U7CiAgICAgICAgICAgIGNvbnN0IHsgbGFiZWxzIH0gPSB0aGlzOwoKICAgICAgICAgICAgdGhpcy4kbW9kYWwuc2hvdygKICAgICAgICAgICAgICAgIGltcG9ydCAoICdAdGVuYW50L2FwcC9jb21wb25lbnRzL21vZGFscy9Qcm9ncmVzc1N0ZXBBbmltYXRpb25Nb2RhbC52dWUnICksCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMuJHQoICdwcm9ncmVzc1N0ZXBBbmltYXRpb25Nb2RhbC50aXRsZScgKSwKICAgICAgICAgICAgICAgICAgICBsYWJlbHMsCiAgICAgICAgICAgICAgICAgICAgYnVzRXZlbnQ6IHRoaXMuYnVzRXZlbnRQcm9ncmVzc1N0ZXAKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IGB6LWluZGV4OiAke3pJbmRleC5oaWdoZXN0fWAsCiAgICAgICAgICAgICAgICAgICAgJ25vLWNsaWNrLWFuaW1hdGlvbic6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgcGVyc2lzdGVudDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBzY3JvbGxhYmxlOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBmdWxsc2NyZWVuOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICdoaWRlLW92ZXJsYXknOiB0cnVlCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIG9wZW46IGFzeW5jICggKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnVzRXZlbnRQcm9ncmVzc1N0ZXAuJGVtaXQoICdnby10by1zdGVwJywgbGFiZWxzLmxlbmd0aCApOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndhcm5CZWZvcmVMZWF2ZU1lc3NhZ2UgPSB0aGlzLiR0KCAnX2NvbW1vbjptZXNzYWdlcy5sZWF2ZVJvdXRlRHVyaW5nUmVzZXJ2YXRpb25Db25maXJtJyApOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcmNlV2FybkJlZm9yZUxlYXZlTWl4aW4oICk7CgogICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IHRoaXMuYWRkSXRlbVRvQ2FydCggcGF5bG9hZCApOwoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51bmJpbmRXYXJuQmVmb3JlWW91TGVhdmVNaXhpbiggKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCByZXNwb25zZS5zdWNjZXNzICkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGlzLl9kZXN0cm95ZWQgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnN0YW50RGVsZXRlQ3VycmVudENhcnQoICk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1c0V2ZW50UHJvZ3Jlc3NTdGVwLiRlbWl0KCAnZ28tdG8tZW5kJyApOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idXNFdmVudFByb2dyZXNzU3RlcC4kZW1pdCggJ2Nsb3NlJyApOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBiZWZvcmVDbG9zZTogKCApID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCByZXNwb25zZS5zdWNjZXNzICApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdGhpcy5fZGVzdHJveWVkICkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFudERlbGV0ZUN1cnJlbnRDYXJ0KCApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSggeyBuYW1lOiAnY2FydENoZWNrb3V0JywgcGFyYW1zOiB7IGNhcnRJZDogcmVzcG9uc2UuY2FydElkIH0gfSApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoIHsgbmFtZTogdGhpcy5yb3V0ZVJlZGlyZWN0T25FcnJvciwgcGFyYW1zOiB7IGlkOiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQgfSB9ICk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGxiYWNrQWRkSXRlbVRvQ2FydEVycm9yRm4oIHJlc3BvbnNlICk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICk7CiAgICAgICAgfSwKICAgIH0sCiAgICBjcmVhdGVkKCkgewogICAgICAgIGlmICggIWlzRW1wdHkoIHRoaXMucGF5bG9hZCApICkgewogICAgICAgICAgICB0aGlzLnNob3dQcm9ncmVzc0FuaW1hdGlvbk1vZGFsKCB0aGlzLnBheWxvYWQgKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSggeyBuYW1lOiB0aGlzLnJvdXRlUmVkaXJlY3RPbkVycm9yLCBwYXJhbXM6IHsgaWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy5pZCB9IH0gKTsKICAgICAgICB9CiAgICB9LAogICAgZGVzdHJveWVkKCApIHsKICAgICAgICB0aGlzLl9kZXN0cm95ZWQgPSB0cnVlOwogICAgfQp9Owo="},{"version":3,"sources":["EventReservation.vue"],"names":[],"mappings":";;;;;AAKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EventReservation.vue","sourceRoot":"src/tenants/ticketmaster/app/views/event/TheEvent","sourcesContent":["<template>\n    <div></div>\n</template>\n\n<script>\n    import Vue from 'vue';\n    import isEmpty from 'lodash/isEmpty';\n    import { mapActions } from 'vuex';\n    import WarnBeforeLeave from '@core/mixins/WarnBeforeLeave';\n    import zIndex from '@scss/mixins/_z-index-export-js.scss';\n\n    export default {\n        name: 'EventReservation',\n        mixins: [\n            WarnBeforeLeave\n        ],\n        props: {\n            payload: {\n                type: Object,\n                default: ( ) => { return { }; }\n            },\n            callbackAddItemToCartErrorFn: {\n                type: Function,\n                default: ( ) => ( ) => { }\n            }\n        },\n        i18nOptions: {\n            namespaces: 'main',\n            keyPrefix: 'views.event.theEvent._components'\n        },\n        data() {\n            return {\n                busEventProgressStep: new Vue( ),\n            };\n        },\n        computed: {\n            labels( ) {\n                if ( this.payload.hotelReservation ) {\n                    return [\n                        this.$t( 'progressStepAnimationModal.labels.stepBuild' ),\n                        this.$t( 'progressStepAnimationModal.labels.stepCheckHotel' ),\n                        this.$t( 'progressStepAnimationModal.labels.stepReserveTickets' ),\n                        this.$t( 'progressStepAnimationModal.labels.stepAddCart' )\n                    ];\n                } else {\n                    return [\n                        this.$t( 'progressStepAnimationModal.labels.stepConfirm' ),\n                        this.$t( 'progressStepAnimationModal.labels.stepReserveTickets' ),\n                        this.$t( 'progressStepAnimationModal.labels.stepAddCart' ),\n                    ];\n                }\n            },\n            routeRedirectOnError() {\n                return this.$route.meta.routeRedirectOnError;\n            }\n        },\n        methods: {\n            ...mapActions( {\n                addItemToCart                   : 'cart/addItem',\n                instantDeleteCurrentCart        : 'cart/instantDeleteCurrentCart'\n            } ),\n            showProgressAnimationModal( payload ) {\n                let response;\n                const { labels } = this;\n\n                this.$modal.show(\n                    import ( '@tenant/app/components/modals/ProgressStepAnimationModal.vue' ),\n                    {\n                        title: this.$t( 'progressStepAnimationModal.title' ),\n                        labels,\n                        busEvent: this.busEventProgressStep\n                    },\n                    {\n                        style: `z-index: ${zIndex.highest}`,\n                        'no-click-animation': true,\n                        persistent: true,\n                        scrollable: false,\n                        fullscreen: true,\n                        'hide-overlay': true\n                    },\n                    {\n                        open: async ( ) => {\n                            this.busEventProgressStep.$emit( 'go-to-step', labels.length );\n                            this.warnBeforeLeaveMessage = this.$t( '_common:messages.leaveRouteDuringReservationConfirm' );\n                            this.forceWarnBeforeLeaveMixin( );\n\n                            response = await this.addItemToCart( payload );\n\n                            this.unbindWarnBeforeYouLeaveMixin( );\n                            if ( response.success ) {\n                                if ( this._destroyed ) {\n                                    this.instantDeleteCurrentCart( );\n                                }\n                                this.busEventProgressStep.$emit( 'go-to-end' );\n                            } else {\n                                this.busEventProgressStep.$emit( 'close' );\n                            }\n                        },\n                        beforeClose: ( ) => {\n                            if ( response.success  ) {\n                                if ( this._destroyed ) {\n                                    this.instantDeleteCurrentCart( );\n                                } else {\n                                    this.$router.replace( { name: 'cartCheckout', params: { cartId: response.cartId } } );\n                                }\n                            } else {\n                                this.$router.replace( { name: this.routeRedirectOnError, params: { id: this.$route.params.id } } );\n                                this.callbackAddItemToCartErrorFn( response );\n                            }\n                        }\n                    }\n                );\n            },\n        },\n        created() {\n            if ( !isEmpty( this.payload ) ) {\n                this.showProgressAnimationModal( this.payload );\n            } else {\n                this.$router.replace( { name: this.routeRedirectOnError, params: { id: this.$route.params.id } } );\n            }\n        },\n        destroyed( ) {\n            this._destroyed = true;\n        }\n    };\n</script>"]}]}