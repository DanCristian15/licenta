{"remainingRequest":"/Users/cristiandan/Desktop/proiect-licenta-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cristiandan/Desktop/proiect-licenta-front/src/core/shared/components/search/SearchResultList.vue?vue&type=style&index=0&id=04e7ec38&lang=scss&scoped=true&","dependencies":[{"path":"/Users/cristiandan/Desktop/proiect-licenta-front/src/core/shared/components/search/SearchResultList.vue","mtime":1645805363971},{"path":"/Users/cristiandan/Desktop/proiect-licenta-front/node_modules/css-loader/dist/cjs.js","mtime":1637061260154},{"path":"/Users/cristiandan/Desktop/proiect-licenta-front/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1637061260528},{"path":"/Users/cristiandan/Desktop/proiect-licenta-front/node_modules/postcss-loader/src/index.js","mtime":1637061260465},{"path":"/Users/cristiandan/Desktop/proiect-licenta-front/node_modules/sass-loader/dist/cjs.js","mtime":1637061279772},{"path":"/Users/cristiandan/Desktop/proiect-licenta-front/node_modules/cache-loader/dist/cjs.js","mtime":1637061222564},{"path":"/Users/cristiandan/Desktop/proiect-licenta-front/node_modules/vue-loader/lib/index.js","mtime":1637061260528}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCkBpbXBvcnQgIkBzY3NzVmFyaWFibGVzIjsKCi5nc3Qtc2VhcmNoLWxpc3QgewogICAgLnYtbGlzdC1pdGVtIHsKICAgICAgICBtaW4taGVpZ2h0OiBhdXRvOwogICAgfQp9Cgouc2VhcmNoLWV2ZW50LW1vZGFsX19rZXl3b3JkIC52LWlucHV0X19zbG90OmhvdmVyIHsKICAgIGZpZWxkc2V0IHsKICAgICAgICBib3JkZXItcmFkaXVzOiBib3JkZXItcmFkaXVzKCAnbScgKSAhaW1wb3J0YW50OwogICAgfQp9Cg=="},{"version":3,"sources":["SearchResultList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwLA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"SearchResultList.vue","sourceRoot":"src/core/shared/components/search","sourcesContent":["\n<template>\n    <div class=\"gst-search-list\">\n        <DataLoading v-if=\"loading && requestsInProgress\" :width=\"2\" />\n        <div v-else>\n            <div v-if=\"attractions.length\">\n                <SectionTitleSmall>{{ $t('headers.attractions') }}</SectionTitleSmall>\n                <v-list-item\n                    v-for=\"(attraction, index) in attractions\"\n                    :key=\"index\"\n                    class=\"px-0 py-2\"\n                    :to=\"redirectToAttraction ? {name:'attraction', params: {id: attraction.id} } : null\"\n                    @click=\"redirectToAttraction || $emit( 'select', attraction.name )\">\n                    <AttractionCardVariant1 :item=\"attraction\" class=\"u-background-transparent u-width-100\" />\n                </v-list-item>\n                <v-divider class=\"my-2\" />\n            </div>\n            <div v-if=\"events.length\">\n                <SectionTitleSmall>{{ $t('headers.events') }}</SectionTitleSmall>\n                <v-list-item\n                    v-for=\"(event, index) in events\"\n                    :key=\"index\"\n                    class=\"px-0\"\n                    :to=\"redirectToEvent ? {name:'event', params: {id: event.id} } :null\"\n                    @click=\"redirectToEvent || $emit( 'select', event.name )\">\n                    <EventCardVariant1\n                        :with-price-icon=\"true\"\n                        :event=\"event\"\n                        :is-loyalty-currency-type-money=\"isLoyaltyCurrencyTypeMoney\"\n                        :content-max-lines=\"1\"\n                        class=\"u-background-transparent u-width-100 pa-2\" />\n                </v-list-item>\n                <v-divider class=\"my-2\" />\n            </div>\n            <div v-if=\"venues.length\">\n                <SectionTitleSmall>{{ $t('headers.venues') }}</SectionTitleSmall>\n                <v-list-item\n                    v-for=\"(venue, index) in venues\"\n                    :key=\"index\"\n                    class=\"px-0\"\n                    :to=\"redirectToVenue ? {name:'venue', params: {id: venue.id} } : null\"\n                    @click=\"redirectToVenue || $emit( 'select', venue.name )\">\n                    <VenueCardSmall :venue=\"venue\" class=\"u-background-transparent u-width-100 pa-2\" />\n                </v-list-item>\n                <v-divider class=\"my-2\" />\n            </div>\n            <v-flex v-if=\"!showNoData\" d-flex justify-center class=\"pt-6\">\n                <SeeAllButton\n                    :to=\"seeAllButtonRoute\" />\n            </v-flex>\n            <SearchResultNoData v-if=\"showNoData\">\n                {{ $t('messages.noData' ) }}\n            </SearchResultNoData>\n        </div>\n    </div>\n</template>\n\n<script>\n    import { mapActions, mapState, mapGetters } from 'vuex';\n    import debounce from 'lodash/debounce';\n    import searchConstants from '@core/utils/constants/search';\n    import {\n        hasCustomCityLocation as searchObjectUtilsHasCustomCityLocation,\n        updateSearchWithCityLocationRange as searchObjectUtilsUpdateSearchWithCityLocationRange\n    } from '@core/utils/searchObjectUtils';\n    import DataLoading from '@core/shared/components/loading/DataLoading.vue';\n    import EventCardVariant1 from '@core/shared/components/event/EventCardVariant1.vue';\n    import AttractionCardVariant1 from '@core/shared/components/attraction/AttractionCardVariant1.vue';\n    import VenueCardSmall from '@core/shared/components/venue/VenueCardSmall.vue';\n    import SearchResultNoData from '@core/shared/components/search/common/SearchResultNoData.vue';\n    import SectionTitleSmall from '@core/shared/components/misc/SectionTitleSmall.vue';\n    import SeeAllButton from '@core/shared/components/buttons/SeeAllButton.vue';\n\n    export default {\n        name: 'SearchResultList',\n        components: {\n            DataLoading,\n            EventCardVariant1,\n            AttractionCardVariant1,\n            VenueCardSmall,\n            SectionTitleSmall,\n            SearchResultNoData,\n            SeeAllButton\n        },\n        i18nOptions: {\n            namespaces: 'shared',\n            keyPrefix: 'components.search.searchResultList'\n        },\n        props: {\n            searchKeywordOnly: {\n                type: Boolean,\n                default: false\n            },\n            redirectToAttraction: {\n                type: Boolean,\n                default: true\n            },\n            redirectToEvent: {\n                type: Boolean,\n                default: true\n            },\n            redirectToVenue: {\n                type: Boolean,\n                default: true\n            },\n            seeAllButtonRoute: {\n                type: Object,\n                default: null\n            }\n        },\n        data () {\n            return {\n                loading: false,\n                requestsInProgress: 0,\n                firstLoad: false\n            };\n        },\n        computed: {\n            ...mapState( {\n                searchState:        state => state.searchState.current,\n                events:             state => state.searchState.results.events,\n                attractions:        state => state.searchState.results.attractions,\n                venues:             state => state.searchState.results.venues\n            } ),\n            ...mapGetters( {\n                currentSearchParams: 'searchState/currentSearchParams',\n                currentQueryObject: 'searchState/currentQueryObject',\n                isLoyaltyCurrencyTypeMoney: 'appTenant/isLoyaltyCurrencyTypeMoney'\n            } ),\n            showNoData() {\n                return this.firstLoad && !this.events.length && !this.attractions.length && !this.venues.length;\n            }\n        },\n        watch:{\n            searchState: {\n                handler: function ( ) {\n                    this.loading = true;\n                    this.loadDataDebouced( );\n                },\n                deep: true,\n                immediate: true\n            }\n        },\n        methods: {\n            ...mapActions( {\n                loadResults:        'searchState/search',\n            } ),\n            loadDataDebouced: debounce( function ( ) {\n                this.loadData( );\n            }, 500 ),\n            async loadData( ) {\n                const params = this.searchKeywordOnly ? { keyword: this.currentSearchParams.keyword } : { ...this.currentSearchParams };\n\n                if ( this.searchKeywordOnly && !this.currentSearchParams.keyword ) {\n                    return;\n                }\n                if ( !Object.keys( params ).length ) {\n                    return;\n                }\n                const search = {\n                    ...params,\n                    offset: 0,\n                    limit: 5\n                };\n\n                this.loading = true;\n                this.requestsInProgress = this.requestsInProgress + 1;\n                if ( this.searchKeywordOnly || !searchObjectUtilsHasCustomCityLocation( search ) ) {\n                    await this.loadResults( { search } );\n                } else {\n                    await this.loadResults( { search: searchObjectUtilsUpdateSearchWithCityLocationRange( search, searchConstants.DEFAULT.LOCATION.RANGE.DEFAULT ) } );\n                    if ( !this.events.length && !this.attractions.length && !this.venues.length ) {\n                        await this.loadResults( { search: searchObjectUtilsUpdateSearchWithCityLocationRange( search, searchConstants.DEFAULT.LOCATION.RANGE.FALLBACK ) } );\n                    }\n                }\n                this.firstLoad = true;\n                this.loading = false;\n                this.requestsInProgress = this.requestsInProgress - 1;\n            }\n        }\n    };\n</script>\n\n<style lang=\"scss\" scoped>\n    @import \"@scssVariables\";\n\n    .gst-search-list {\n        .v-list-item {\n            min-height: auto;\n        }\n    }\n\n    .search-event-modal__keyword .v-input__slot:hover {\n        fieldset {\n            border-radius: border-radius( 'm' ) !important;\n        }\n    }\n</style>\n"]}]}