{"remainingRequest":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cristiandan/Desktop/lifestyle-ui/src/core/shared/components/search/SearchResultList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/cristiandan/Desktop/lifestyle-ui/src/core/shared/components/search/SearchResultList.vue","mtime":1645805363971},{"path":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/cache-loader/dist/cjs.js","mtime":1637061222564},{"path":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/babel-loader/lib/index.js","mtime":1637061222406},{"path":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/cache-loader/dist/cjs.js","mtime":1637061222564},{"path":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/vue-loader/lib/index.js","mtime":1637061260528}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEFjdGlvbnMsIG1hcFN0YXRlLCBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CmltcG9ydCBkZWJvdW5jZSBmcm9tICdsb2Rhc2gvZGVib3VuY2UnOwppbXBvcnQgc2VhcmNoQ29uc3RhbnRzIGZyb20gJ0Bjb3JlL3V0aWxzL2NvbnN0YW50cy9zZWFyY2gnOwppbXBvcnQgewogICAgaGFzQ3VzdG9tQ2l0eUxvY2F0aW9uIGFzIHNlYXJjaE9iamVjdFV0aWxzSGFzQ3VzdG9tQ2l0eUxvY2F0aW9uLAogICAgdXBkYXRlU2VhcmNoV2l0aENpdHlMb2NhdGlvblJhbmdlIGFzIHNlYXJjaE9iamVjdFV0aWxzVXBkYXRlU2VhcmNoV2l0aENpdHlMb2NhdGlvblJhbmdlCn0gZnJvbSAnQGNvcmUvdXRpbHMvc2VhcmNoT2JqZWN0VXRpbHMnOwppbXBvcnQgRGF0YUxvYWRpbmcgZnJvbSAnQGNvcmUvc2hhcmVkL2NvbXBvbmVudHMvbG9hZGluZy9EYXRhTG9hZGluZy52dWUnOwppbXBvcnQgRXZlbnRDYXJkVmFyaWFudDEgZnJvbSAnQGNvcmUvc2hhcmVkL2NvbXBvbmVudHMvZXZlbnQvRXZlbnRDYXJkVmFyaWFudDEudnVlJzsKaW1wb3J0IEF0dHJhY3Rpb25DYXJkVmFyaWFudDEgZnJvbSAnQGNvcmUvc2hhcmVkL2NvbXBvbmVudHMvYXR0cmFjdGlvbi9BdHRyYWN0aW9uQ2FyZFZhcmlhbnQxLnZ1ZSc7CmltcG9ydCBWZW51ZUNhcmRTbWFsbCBmcm9tICdAY29yZS9zaGFyZWQvY29tcG9uZW50cy92ZW51ZS9WZW51ZUNhcmRTbWFsbC52dWUnOwppbXBvcnQgU2VhcmNoUmVzdWx0Tm9EYXRhIGZyb20gJ0Bjb3JlL3NoYXJlZC9jb21wb25lbnRzL3NlYXJjaC9jb21tb24vU2VhcmNoUmVzdWx0Tm9EYXRhLnZ1ZSc7CmltcG9ydCBTZWN0aW9uVGl0bGVTbWFsbCBmcm9tICdAY29yZS9zaGFyZWQvY29tcG9uZW50cy9taXNjL1NlY3Rpb25UaXRsZVNtYWxsLnZ1ZSc7CmltcG9ydCBTZWVBbGxCdXR0b24gZnJvbSAnQGNvcmUvc2hhcmVkL2NvbXBvbmVudHMvYnV0dG9ucy9TZWVBbGxCdXR0b24udnVlJzsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdTZWFyY2hSZXN1bHRMaXN0JywKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBEYXRhTG9hZGluZywKICAgICAgICBFdmVudENhcmRWYXJpYW50MSwKICAgICAgICBBdHRyYWN0aW9uQ2FyZFZhcmlhbnQxLAogICAgICAgIFZlbnVlQ2FyZFNtYWxsLAogICAgICAgIFNlY3Rpb25UaXRsZVNtYWxsLAogICAgICAgIFNlYXJjaFJlc3VsdE5vRGF0YSwKICAgICAgICBTZWVBbGxCdXR0b24KICAgIH0sCiAgICBpMThuT3B0aW9uczogewogICAgICAgIG5hbWVzcGFjZXM6ICdzaGFyZWQnLAogICAgICAgIGtleVByZWZpeDogJ2NvbXBvbmVudHMuc2VhcmNoLnNlYXJjaFJlc3VsdExpc3QnCiAgICB9LAogICAgcHJvcHM6IHsKICAgICAgICBzZWFyY2hLZXl3b3JkT25seTogewogICAgICAgICAgICB0eXBlOiBCb29sZWFuLAogICAgICAgICAgICBkZWZhdWx0OiBmYWxzZQogICAgICAgIH0sCiAgICAgICAgcmVkaXJlY3RUb0F0dHJhY3Rpb246IHsKICAgICAgICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgICAgICAgZGVmYXVsdDogdHJ1ZQogICAgICAgIH0sCiAgICAgICAgcmVkaXJlY3RUb0V2ZW50OiB7CiAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgICAgICAgIGRlZmF1bHQ6IHRydWUKICAgICAgICB9LAogICAgICAgIHJlZGlyZWN0VG9WZW51ZTogewogICAgICAgICAgICB0eXBlOiBCb29sZWFuLAogICAgICAgICAgICBkZWZhdWx0OiB0cnVlCiAgICAgICAgfSwKICAgICAgICBzZWVBbGxCdXR0b25Sb3V0ZTogewogICAgICAgICAgICB0eXBlOiBPYmplY3QsCiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwKICAgICAgICB9CiAgICB9LAogICAgZGF0YSAoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgICAgICAgIHJlcXVlc3RzSW5Qcm9ncmVzczogMCwKICAgICAgICAgICAgZmlyc3RMb2FkOiBmYWxzZQogICAgICAgIH07CiAgICB9LAogICAgY29tcHV0ZWQ6IHsKICAgICAgICAuLi5tYXBTdGF0ZSggewogICAgICAgICAgICBzZWFyY2hTdGF0ZTogICAgICAgIHN0YXRlID0+IHN0YXRlLnNlYXJjaFN0YXRlLmN1cnJlbnQsCiAgICAgICAgICAgIGV2ZW50czogICAgICAgICAgICAgc3RhdGUgPT4gc3RhdGUuc2VhcmNoU3RhdGUucmVzdWx0cy5ldmVudHMsCiAgICAgICAgICAgIGF0dHJhY3Rpb25zOiAgICAgICAgc3RhdGUgPT4gc3RhdGUuc2VhcmNoU3RhdGUucmVzdWx0cy5hdHRyYWN0aW9ucywKICAgICAgICAgICAgdmVudWVzOiAgICAgICAgICAgICBzdGF0ZSA9PiBzdGF0ZS5zZWFyY2hTdGF0ZS5yZXN1bHRzLnZlbnVlcwogICAgICAgIH0gKSwKICAgICAgICAuLi5tYXBHZXR0ZXJzKCB7CiAgICAgICAgICAgIGN1cnJlbnRTZWFyY2hQYXJhbXM6ICdzZWFyY2hTdGF0ZS9jdXJyZW50U2VhcmNoUGFyYW1zJywKICAgICAgICAgICAgY3VycmVudFF1ZXJ5T2JqZWN0OiAnc2VhcmNoU3RhdGUvY3VycmVudFF1ZXJ5T2JqZWN0JywKICAgICAgICAgICAgaXNMb3lhbHR5Q3VycmVuY3lUeXBlTW9uZXk6ICdhcHBUZW5hbnQvaXNMb3lhbHR5Q3VycmVuY3lUeXBlTW9uZXknCiAgICAgICAgfSApLAogICAgICAgIHNob3dOb0RhdGEoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpcnN0TG9hZCAmJiAhdGhpcy5ldmVudHMubGVuZ3RoICYmICF0aGlzLmF0dHJhY3Rpb25zLmxlbmd0aCAmJiAhdGhpcy52ZW51ZXMubGVuZ3RoOwogICAgICAgIH0KICAgIH0sCiAgICB3YXRjaDp7CiAgICAgICAgc2VhcmNoU3RhdGU6IHsKICAgICAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gKCApIHsKICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICB0aGlzLmxvYWREYXRhRGVib3VjZWQoICk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRlZXA6IHRydWUsCiAgICAgICAgICAgIGltbWVkaWF0ZTogdHJ1ZQogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgLi4ubWFwQWN0aW9ucyggewogICAgICAgICAgICBsb2FkUmVzdWx0czogICAgICAgICdzZWFyY2hTdGF0ZS9zZWFyY2gnLAogICAgICAgIH0gKSwKICAgICAgICBsb2FkRGF0YURlYm91Y2VkOiBkZWJvdW5jZSggZnVuY3Rpb24gKCApIHsKICAgICAgICAgICAgdGhpcy5sb2FkRGF0YSggKTsKICAgICAgICB9LCA1MDAgKSwKICAgICAgICBhc3luYyBsb2FkRGF0YSggKSB7CiAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IHRoaXMuc2VhcmNoS2V5d29yZE9ubHkgPyB7IGtleXdvcmQ6IHRoaXMuY3VycmVudFNlYXJjaFBhcmFtcy5rZXl3b3JkIH0gOiB7IC4uLnRoaXMuY3VycmVudFNlYXJjaFBhcmFtcyB9OwoKICAgICAgICAgICAgaWYgKCB0aGlzLnNlYXJjaEtleXdvcmRPbmx5ICYmICF0aGlzLmN1cnJlbnRTZWFyY2hQYXJhbXMua2V5d29yZCApIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoICFPYmplY3Qua2V5cyggcGFyYW1zICkubGVuZ3RoICkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IHNlYXJjaCA9IHsKICAgICAgICAgICAgICAgIC4uLnBhcmFtcywKICAgICAgICAgICAgICAgIG9mZnNldDogMCwKICAgICAgICAgICAgICAgIGxpbWl0OiA1CiAgICAgICAgICAgIH07CgogICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICB0aGlzLnJlcXVlc3RzSW5Qcm9ncmVzcyA9IHRoaXMucmVxdWVzdHNJblByb2dyZXNzICsgMTsKICAgICAgICAgICAgaWYgKCB0aGlzLnNlYXJjaEtleXdvcmRPbmx5IHx8ICFzZWFyY2hPYmplY3RVdGlsc0hhc0N1c3RvbUNpdHlMb2NhdGlvbiggc2VhcmNoICkgKSB7CiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRSZXN1bHRzKCB7IHNlYXJjaCB9ICk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRSZXN1bHRzKCB7IHNlYXJjaDogc2VhcmNoT2JqZWN0VXRpbHNVcGRhdGVTZWFyY2hXaXRoQ2l0eUxvY2F0aW9uUmFuZ2UoIHNlYXJjaCwgc2VhcmNoQ29uc3RhbnRzLkRFRkFVTFQuTE9DQVRJT04uUkFOR0UuREVGQVVMVCApIH0gKTsKICAgICAgICAgICAgICAgIGlmICggIXRoaXMuZXZlbnRzLmxlbmd0aCAmJiAhdGhpcy5hdHRyYWN0aW9ucy5sZW5ndGggJiYgIXRoaXMudmVudWVzLmxlbmd0aCApIHsKICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRSZXN1bHRzKCB7IHNlYXJjaDogc2VhcmNoT2JqZWN0VXRpbHNVcGRhdGVTZWFyY2hXaXRoQ2l0eUxvY2F0aW9uUmFuZ2UoIHNlYXJjaCwgc2VhcmNoQ29uc3RhbnRzLkRFRkFVTFQuTE9DQVRJT04uUkFOR0UuRkFMTEJBQ0sgKSB9ICk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5maXJzdExvYWQgPSB0cnVlOwogICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5yZXF1ZXN0c0luUHJvZ3Jlc3MgPSB0aGlzLnJlcXVlc3RzSW5Qcm9ncmVzcyAtIDE7CiAgICAgICAgfQogICAgfQp9Owo="},{"version":3,"sources":["SearchResultList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SearchResultList.vue","sourceRoot":"src/core/shared/components/search","sourcesContent":["\n<template>\n    <div class=\"gst-search-list\">\n        <DataLoading v-if=\"loading && requestsInProgress\" :width=\"2\" />\n        <div v-else>\n            <div v-if=\"attractions.length\">\n                <SectionTitleSmall>{{ $t('headers.attractions') }}</SectionTitleSmall>\n                <v-list-item\n                    v-for=\"(attraction, index) in attractions\"\n                    :key=\"index\"\n                    class=\"px-0 py-2\"\n                    :to=\"redirectToAttraction ? {name:'attraction', params: {id: attraction.id} } : null\"\n                    @click=\"redirectToAttraction || $emit( 'select', attraction.name )\">\n                    <AttractionCardVariant1 :item=\"attraction\" class=\"u-background-transparent u-width-100\" />\n                </v-list-item>\n                <v-divider class=\"my-2\" />\n            </div>\n            <div v-if=\"events.length\">\n                <SectionTitleSmall>{{ $t('headers.events') }}</SectionTitleSmall>\n                <v-list-item\n                    v-for=\"(event, index) in events\"\n                    :key=\"index\"\n                    class=\"px-0\"\n                    :to=\"redirectToEvent ? {name:'event', params: {id: event.id} } :null\"\n                    @click=\"redirectToEvent || $emit( 'select', event.name )\">\n                    <EventCardVariant1\n                        :with-price-icon=\"true\"\n                        :event=\"event\"\n                        :is-loyalty-currency-type-money=\"isLoyaltyCurrencyTypeMoney\"\n                        :content-max-lines=\"1\"\n                        class=\"u-background-transparent u-width-100 pa-2\" />\n                </v-list-item>\n                <v-divider class=\"my-2\" />\n            </div>\n            <div v-if=\"venues.length\">\n                <SectionTitleSmall>{{ $t('headers.venues') }}</SectionTitleSmall>\n                <v-list-item\n                    v-for=\"(venue, index) in venues\"\n                    :key=\"index\"\n                    class=\"px-0\"\n                    :to=\"redirectToVenue ? {name:'venue', params: {id: venue.id} } : null\"\n                    @click=\"redirectToVenue || $emit( 'select', venue.name )\">\n                    <VenueCardSmall :venue=\"venue\" class=\"u-background-transparent u-width-100 pa-2\" />\n                </v-list-item>\n                <v-divider class=\"my-2\" />\n            </div>\n            <v-flex v-if=\"!showNoData\" d-flex justify-center class=\"pt-6\">\n                <SeeAllButton\n                    :to=\"seeAllButtonRoute\" />\n            </v-flex>\n            <SearchResultNoData v-if=\"showNoData\">\n                {{ $t('messages.noData' ) }}\n            </SearchResultNoData>\n        </div>\n    </div>\n</template>\n\n<script>\n    import { mapActions, mapState, mapGetters } from 'vuex';\n    import debounce from 'lodash/debounce';\n    import searchConstants from '@core/utils/constants/search';\n    import {\n        hasCustomCityLocation as searchObjectUtilsHasCustomCityLocation,\n        updateSearchWithCityLocationRange as searchObjectUtilsUpdateSearchWithCityLocationRange\n    } from '@core/utils/searchObjectUtils';\n    import DataLoading from '@core/shared/components/loading/DataLoading.vue';\n    import EventCardVariant1 from '@core/shared/components/event/EventCardVariant1.vue';\n    import AttractionCardVariant1 from '@core/shared/components/attraction/AttractionCardVariant1.vue';\n    import VenueCardSmall from '@core/shared/components/venue/VenueCardSmall.vue';\n    import SearchResultNoData from '@core/shared/components/search/common/SearchResultNoData.vue';\n    import SectionTitleSmall from '@core/shared/components/misc/SectionTitleSmall.vue';\n    import SeeAllButton from '@core/shared/components/buttons/SeeAllButton.vue';\n\n    export default {\n        name: 'SearchResultList',\n        components: {\n            DataLoading,\n            EventCardVariant1,\n            AttractionCardVariant1,\n            VenueCardSmall,\n            SectionTitleSmall,\n            SearchResultNoData,\n            SeeAllButton\n        },\n        i18nOptions: {\n            namespaces: 'shared',\n            keyPrefix: 'components.search.searchResultList'\n        },\n        props: {\n            searchKeywordOnly: {\n                type: Boolean,\n                default: false\n            },\n            redirectToAttraction: {\n                type: Boolean,\n                default: true\n            },\n            redirectToEvent: {\n                type: Boolean,\n                default: true\n            },\n            redirectToVenue: {\n                type: Boolean,\n                default: true\n            },\n            seeAllButtonRoute: {\n                type: Object,\n                default: null\n            }\n        },\n        data () {\n            return {\n                loading: false,\n                requestsInProgress: 0,\n                firstLoad: false\n            };\n        },\n        computed: {\n            ...mapState( {\n                searchState:        state => state.searchState.current,\n                events:             state => state.searchState.results.events,\n                attractions:        state => state.searchState.results.attractions,\n                venues:             state => state.searchState.results.venues\n            } ),\n            ...mapGetters( {\n                currentSearchParams: 'searchState/currentSearchParams',\n                currentQueryObject: 'searchState/currentQueryObject',\n                isLoyaltyCurrencyTypeMoney: 'appTenant/isLoyaltyCurrencyTypeMoney'\n            } ),\n            showNoData() {\n                return this.firstLoad && !this.events.length && !this.attractions.length && !this.venues.length;\n            }\n        },\n        watch:{\n            searchState: {\n                handler: function ( ) {\n                    this.loading = true;\n                    this.loadDataDebouced( );\n                },\n                deep: true,\n                immediate: true\n            }\n        },\n        methods: {\n            ...mapActions( {\n                loadResults:        'searchState/search',\n            } ),\n            loadDataDebouced: debounce( function ( ) {\n                this.loadData( );\n            }, 500 ),\n            async loadData( ) {\n                const params = this.searchKeywordOnly ? { keyword: this.currentSearchParams.keyword } : { ...this.currentSearchParams };\n\n                if ( this.searchKeywordOnly && !this.currentSearchParams.keyword ) {\n                    return;\n                }\n                if ( !Object.keys( params ).length ) {\n                    return;\n                }\n                const search = {\n                    ...params,\n                    offset: 0,\n                    limit: 5\n                };\n\n                this.loading = true;\n                this.requestsInProgress = this.requestsInProgress + 1;\n                if ( this.searchKeywordOnly || !searchObjectUtilsHasCustomCityLocation( search ) ) {\n                    await this.loadResults( { search } );\n                } else {\n                    await this.loadResults( { search: searchObjectUtilsUpdateSearchWithCityLocationRange( search, searchConstants.DEFAULT.LOCATION.RANGE.DEFAULT ) } );\n                    if ( !this.events.length && !this.attractions.length && !this.venues.length ) {\n                        await this.loadResults( { search: searchObjectUtilsUpdateSearchWithCityLocationRange( search, searchConstants.DEFAULT.LOCATION.RANGE.FALLBACK ) } );\n                    }\n                }\n                this.firstLoad = true;\n                this.loading = false;\n                this.requestsInProgress = this.requestsInProgress - 1;\n            }\n        }\n    };\n</script>\n\n<style lang=\"scss\" scoped>\n    @import \"@scssVariables\";\n\n    .gst-search-list {\n        .v-list-item {\n            min-height: auto;\n        }\n    }\n\n    .search-event-modal__keyword .v-input__slot:hover {\n        fieldset {\n            border-radius: border-radius( 'm' ) !important;\n        }\n    }\n</style>\n"]}]}