{"remainingRequest":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cristiandan/Desktop/lifestyle-ui/src/core/shared/components/search/SearchDateDropdown.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/cristiandan/Desktop/lifestyle-ui/src/core/shared/components/search/SearchDateDropdown.vue","mtime":1645805363971},{"path":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/cache-loader/dist/cjs.js","mtime":1637061222564},{"path":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/babel-loader/lib/index.js","mtime":1637061222406},{"path":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/cache-loader/dist/cjs.js","mtime":1637061222564},{"path":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/vue-loader/lib/index.js","mtime":1637061260528}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGVuZE9mV2VlaywgaXNTdW5kYXkgfSBmcm9tICdkYXRlLWZucyc7CmltcG9ydCB0aHJvdHRsZSBmcm9tICdsb2Rhc2gvdGhyb3R0bGUnOwppbXBvcnQgSWNvbkRhdGUgZnJvbSAnQGNvcmUvc2hhcmVkL2Fzc2V0cy9pY29ucy9kYXRlLnN2Zyc7CmltcG9ydCBEYXRlUGlja2VyIGZyb20gJ0BzaGFyZWQvY29tcG9uZW50cy9kYXRlL0RhdGVQaWNrZXIudnVlJzsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdTZWFyY2hEYXRlRHJvcGRvd24nLAogICAgY29tcG9uZW50czogewogICAgICAgIERhdGVQaWNrZXIsCiAgICAgICAgSWNvbkRhdGUKICAgIH0sCiAgICBpMThuT3B0aW9uczogewogICAgICAgIG5hbWVzcGFjZXM6ICdzaGFyZWQnLAogICAgICAgIGtleVByZWZpeDogJ2NvbXBvbmVudHMuZGF0ZS5kYXRlUGlja2VyJwogICAgfSwKCiAgICBwcm9wczogewogICAgICAgIHZhbHVlOiB7CiAgICAgICAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgICAgICAgZGVmYXVsdDogKCApID0+IHsgcmV0dXJuIHsgc3RhcnREYXRlOiBudWxsLCBlbmREYXRlOiBudWxsIH07IH0KICAgICAgICB9LAogICAgICAgIGlucHV0U2VhcmNoQXR0cnM6IHsKICAgICAgICAgICAgdHlwZTogT2JqZWN0LAogICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiB7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICdzaW5nbGUtbGluZSc6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgc29sbzogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAnaGlkZS1kZXRhaWxzJzogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBmbGF0OiB0cnVlCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIGRhdGEoICkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGRhdGU6IHsKICAgICAgICAgICAgICAgIHN0YXJ0RGF0ZTogbnVsbCwKICAgICAgICAgICAgICAgIGVuZERhdGU6IG51bGwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaXNNZW51T3BlbjogZmFsc2UsCiAgICAgICAgICAgIGlzRm9jdXNlZDogZmFsc2UsCiAgICAgICAgICAgIGlzQ29uZmlybWVkOiBmYWxzZSwKICAgICAgICAgICAgbWVudVRhcmdldFBvc2l0aW9uWDogMCwKICAgICAgICAgICAgbWVudVRhcmdldFBvc2l0aW9uWTogMAogICAgICAgIH07CiAgICB9LAogICAgY29tcHV0ZWQ6IHsKICAgICAgICBmaWVsZFZhbHVlKCkgewogICAgICAgICAgICBjb25zdCBzYXR1cmRheSA9IHRoaXMuJG9wdGlvbnMuZmlsdGVycy5kYXRlKCBlbmRPZldlZWsoIG5ldyBEYXRlKCksIHsgd2Vla1N0YXJ0c09uOiAwIH0gKSApLAogICAgICAgICAgICAgICAgICBzdW5kYXkgPSB0aGlzLiRvcHRpb25zLmZpbHRlcnMuZGF0ZSggZW5kT2ZXZWVrKCBuZXcgRGF0ZSgpLCB7IHdlZWtTdGFydHNPbjogMSB9ICkgKSA7CiAgICAgICAgICAgIGxldCB2YWx1ZSA9IHRoaXMuJG9wdGlvbnMuZmlsdGVycy5wZXJpb2QoIHRoaXMuZGF0ZSApLAogICAgICAgICAgICAgICAgaXNXZWVrZW5kID0gZmFsc2U7CgogICAgICAgICAgICBpZiAoICFpc1N1bmRheSAoIG5ldyBEYXRlKCkgKSApIHsKICAgICAgICAgICAgICAgIGlzV2Vla2VuZCA9IHRoaXMuJG9wdGlvbnMuZmlsdGVycy5kYXRlKCB0aGlzLmRhdGUuc3RhcnREYXRlICkgPT09IHNhdHVyZGF5ICYmIHRoaXMuJG9wdGlvbnMuZmlsdGVycy5kYXRlKCB0aGlzLmRhdGUuZW5kRGF0ZSApID09IHN1bmRheTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGlzV2Vla2VuZCA9IHRoaXMuJG9wdGlvbnMuZmlsdGVycy5kYXRlKCAgdGhpcy5kYXRlLnN0YXJ0RGF0ZSApID09PSBzdW5kYXkgJiYgdGhpcy5kYXRlLmVuZERhdGUgPT09IG51bGw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBpc1dlZWtlbmQgPyB0aGlzLiR0KCAnbGFiZWxzLndlZWtlbmQnICk6IHZhbHVlOwogICAgICAgIH0sCiAgICB9LAogICAgd2F0Y2g6IHsKICAgICAgICAndmFsdWUnOiBmdW5jdGlvbiAoICkgewogICAgICAgICAgICB0aGlzLnNldERhdGVzRnJvbVByb3BWYWx1ZSgpOwogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgdG9nZ2xlTWVudSggKSB7CiAgICAgICAgICAgIHRoaXMuaXNNZW51T3BlbiA/IHRoaXMuY2xvc2VNZW51KCApIDogdGhpcy5vcGVuTWVudSggKTsKICAgICAgICB9LAogICAgICAgIGNsb3NlTWVudSggKSB7CiAgICAgICAgICAgIHRoaXMuaXNNZW51T3BlbiA9IGZhbHNlOwogICAgICAgIH0sCiAgICAgICAgb3Blbk1lbnUoICkgewogICAgICAgICAgICBjb25zdCBtZW51VGFyZ2V0UG9zaXRpb24gPSB0aGlzLiRyZWZzLmlucHV0U2VhcmNoLiRlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoICk7CgogICAgICAgICAgICB0aGlzLm1lbnVUYXJnZXRQb3NpdGlvblggPSBtZW51VGFyZ2V0UG9zaXRpb24ueDsKICAgICAgICAgICAgdGhpcy5tZW51VGFyZ2V0UG9zaXRpb25ZID0gbWVudVRhcmdldFBvc2l0aW9uLnkgKyBtZW51VGFyZ2V0UG9zaXRpb24uaGVpZ2h0OwogICAgICAgICAgICB0aGlzLmlzTWVudU9wZW4gPSB0cnVlOwogICAgICAgIH0sCiAgICAgICAgb25Db25maXJtKCB2YWx1ZSApIHsKICAgICAgICAgICAgdGhpcy5jbG9zZU1lbnUoKTsKICAgICAgICAgICAgdGhpcy4kZW1pdCggJ2lucHV0JywgdmFsdWUgKTsKICAgICAgICAgICAgdGhpcy5pc0NvbmZpcm1lZCA9IHRydWU7CiAgICAgICAgfSwKICAgICAgICBvbkNhbmNlbCgpIHsKICAgICAgICAgICAgdGhpcy5jbG9zZU1lbnUoKTsKICAgICAgICB9LAogICAgICAgIHNldERhdGVzRnJvbVByb3BWYWx1ZSggKSB7CiAgICAgICAgICAgIHRoaXMuZGF0ZSA9IHsKICAgICAgICAgICAgICAgIHN0YXJ0RGF0ZTogdGhpcy52YWx1ZS5zdGFydERhdGUgPwogICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUuc3RhcnREYXRlIDoKICAgICAgICAgICAgICAgICAgICBudWxsLAogICAgICAgICAgICAgICAgZW5kRGF0ZTogdGhpcy52YWx1ZS5lbmREYXRlID8KICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlLmVuZERhdGUgOgogICAgICAgICAgICAgICAgICAgIG51bGwKICAgICAgICAgICAgfTsKICAgICAgICB9LAogICAgICAgIG9uQmx1cklucHV0U2VhcmNoKCApIHsKICAgICAgICAgICAgdGhpcy5pc0ZvY3VzZWQgPSBmYWxzZTsKICAgICAgICB9LAogICAgICAgIG9uRm9jdXNJbnB1dFNlYXJjaCggKSB7CiAgICAgICAgICAgIHRoaXMuaXNGb2N1c2VkID0gdHJ1ZTsKICAgICAgICB9LAogICAgICAgIG9uVGFiS2V5RG8oKSB7CiAgICAgICAgICAgIHRoaXMuJGVtaXQoICd0YWIta2V5ZG93bicgKTsKICAgICAgICB9CiAgICB9LAogICAgY3JlYXRlZCggKSB7CiAgICAgICAgdGhpcy5zZXREYXRlc0Zyb21Qcm9wVmFsdWUoKTsKICAgIH0sCiAgICBtb3VudGVkKCApIHsKICAgICAgICB0aGlzLnRocm90dGxlTWVudUNsb3NlID0gdGhyb3R0bGUoICggKSA9PiB7CiAgICAgICAgICAgIHRoaXMuY2xvc2VNZW51KCk7CiAgICAgICAgfSwgMjAgKTsKCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICdyZXNpemUnLCB0aGlzLnRocm90dGxlTWVudUNsb3NlICk7CiAgICB9LAogICAgZGVzdHJveWVkKCApIHsKICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciggJ3Jlc2l6ZScsIHRoaXMudGhyb3R0bGVNZW51Q2xvc2UgKTsKICAgIH0KfTsK"},{"version":3,"sources":["SearchDateDropdown.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"SearchDateDropdown.vue","sourceRoot":"src/core/shared/components/search","sourcesContent":["<template>\n    <v-menu\n        ref=\"menu\"\n        v-model=\"isMenuOpen\"\n        offset-y\n        :position-x=\"menuTargetPositionX\"\n        :position-y=\"menuTargetPositionY\"\n        :close-on-content-click=\"false\"\n        bottom\n        allow-overflow\n        content-class=\"gst-search-date__picker\">\n        <template v-slot:activator=\"{ on }\">\n            <v-text-field\n                ref=\"inputSearch\"\n                :value=\"fieldValue\"\n                :placeholder=\"$t('placeholder')\"\n                class=\"mx-1 pt-0 mr-3 gst-search-input gst-search-date__input\"\n                v-bind=\"inputSearchAttrs\"\n                readonly\n                data-hj-allow\n                @click=\"toggleMenu\"\n                @focus=\"onFocusInputSearch\"\n                @blur=\"onBlurInputSearch\"\n                @keydown.tab=\"onTabKeyDo\">\n                <template slot=\"prepend-inner\" class=\"text-primary\">\n                    <IconDate\n                        class=\"gst-search-icon-svg\"\n                        :class=\"{\n                            'gst-search-icon-svg-focused': isFocused\n                        }\"\n                        @click=\"toggleMenu\" />\n                </template>\n            </v-text-field>\n            <v-btn class=\"d-none\" v-on=\"on\" />\n        </template>\n        <DatePicker\n            v-model=\"date\"\n            :modal=\"false\"\n            :is-confirmed=\"isConfirmed\"\n            @cancel=\"onCancel\"\n            @confirm=\"onConfirm\" />\n    </v-menu>\n</template>\n\n<script>\n    import { endOfWeek, isSunday } from 'date-fns';\n    import throttle from 'lodash/throttle';\n    import IconDate from '@core/shared/assets/icons/date.svg';\n    import DatePicker from '@shared/components/date/DatePicker.vue';\n\n    export default {\n        name: 'SearchDateDropdown',\n        components: {\n            DatePicker,\n            IconDate\n        },\n        i18nOptions: {\n            namespaces: 'shared',\n            keyPrefix: 'components.date.datePicker'\n        },\n\n        props: {\n            value: {\n                type: Object,\n                default: ( ) => { return { startDate: null, endDate: null }; }\n            },\n            inputSearchAttrs: {\n                type: Object,\n                default: () => {\n                    return {\n                        'single-line': true,\n                        solo: true,\n                        'hide-details': true,\n                        flat: true\n                    };\n                }\n            }\n        },\n        data( ) {\n            return {\n                date: {\n                    startDate: null,\n                    endDate: null\n                },\n                isMenuOpen: false,\n                isFocused: false,\n                isConfirmed: false,\n                menuTargetPositionX: 0,\n                menuTargetPositionY: 0\n            };\n        },\n        computed: {\n            fieldValue() {\n                const saturday = this.$options.filters.date( endOfWeek( new Date(), { weekStartsOn: 0 } ) ),\n                      sunday = this.$options.filters.date( endOfWeek( new Date(), { weekStartsOn: 1 } ) ) ;\n                let value = this.$options.filters.period( this.date ),\n                    isWeekend = false;\n\n                if ( !isSunday ( new Date() ) ) {\n                    isWeekend = this.$options.filters.date( this.date.startDate ) === saturday && this.$options.filters.date( this.date.endDate ) == sunday;\n                } else {\n                    isWeekend = this.$options.filters.date(  this.date.startDate ) === sunday && this.date.endDate === null;\n                }\n\n                return isWeekend ? this.$t( 'labels.weekend' ): value;\n            },\n        },\n        watch: {\n            'value': function ( ) {\n                this.setDatesFromPropValue();\n            }\n        },\n        methods: {\n            toggleMenu( ) {\n                this.isMenuOpen ? this.closeMenu( ) : this.openMenu( );\n            },\n            closeMenu( ) {\n                this.isMenuOpen = false;\n            },\n            openMenu( ) {\n                const menuTargetPosition = this.$refs.inputSearch.$el.getBoundingClientRect( );\n\n                this.menuTargetPositionX = menuTargetPosition.x;\n                this.menuTargetPositionY = menuTargetPosition.y + menuTargetPosition.height;\n                this.isMenuOpen = true;\n            },\n            onConfirm( value ) {\n                this.closeMenu();\n                this.$emit( 'input', value );\n                this.isConfirmed = true;\n            },\n            onCancel() {\n                this.closeMenu();\n            },\n            setDatesFromPropValue( ) {\n                this.date = {\n                    startDate: this.value.startDate ?\n                        this.value.startDate :\n                        null,\n                    endDate: this.value.endDate ?\n                        this.value.endDate :\n                        null\n                };\n            },\n            onBlurInputSearch( ) {\n                this.isFocused = false;\n            },\n            onFocusInputSearch( ) {\n                this.isFocused = true;\n            },\n            onTabKeyDo() {\n                this.$emit( 'tab-keydown' );\n            }\n        },\n        created( ) {\n            this.setDatesFromPropValue();\n        },\n        mounted( ) {\n            this.throttleMenuClose = throttle( ( ) => {\n                this.closeMenu();\n            }, 20 );\n\n            window.addEventListener( 'resize', this.throttleMenuClose );\n        },\n        destroyed( ) {\n            window.removeEventListener( 'resize', this.throttleMenuClose );\n        }\n    };\n</script>\n\n<style lang=\"scss\" scoped>\n    @import \"@scssVariables\";\n    @import \"@scssMixins\";\n\n    .gst-search-date__input {\n        font-size: font-size( 's' );\n    }\n\n    .gst-search-date__picker {\n        margin-top: 8px;\n        background-color: theme-color( 'white' );\n        border-radius: border-radius( 'm' ) !important;\n        max-width: 300px;\n    }\n\n    .gst-search-date__picker__list {\n        padding-top: 0;\n        padding-bottom: 0;\n        min-width: 280px;\n\n        .v-list-item__title {\n            font-size: $base-font-size !important;\n        }\n\n        .v-list-item__icon {\n            margin-right: 16px;\n        }\n    }\n\n    .gst-btn--cancel.v-btn::before {\n        background-color: transparent;\n    }\n\n    .gst-search-date-menu__item-icon {\n        .gst-svg-icon {\n            fill: theme-color( 'primary' );\n        }\n    }\n</style>\n"]}]}