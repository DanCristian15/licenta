{"remainingRequest":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cristiandan/Desktop/lifestyle-ui/src/core/shared/components/modals/LoginModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/cristiandan/Desktop/lifestyle-ui/src/core/shared/components/modals/LoginModal.vue","mtime":1649276200719},{"path":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/cache-loader/dist/cjs.js","mtime":1637061222564},{"path":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/babel-loader/lib/index.js","mtime":1637061222406},{"path":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/cache-loader/dist/cjs.js","mtime":1637061222564},{"path":"/Users/cristiandan/Desktop/lifestyle-ui/node_modules/vue-loader/lib/index.js","mtime":1637061260528}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHJlcXVpcmVkLCBlbWFpbCB9IGZyb20gJ3Z1ZWxpZGF0ZS9saWIvdmFsaWRhdG9ycyc7CmltcG9ydCB7IG1hcEFjdGlvbnMsIG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IEhlYWRlclZhcmlhbnQxIGZyb20gJ0Bjb3JlL3NoYXJlZC9jb21wb25lbnRzL21vZGFscy9sYXlvdXQvSGVhZGVyVmFyaWFudDEudnVlJzsKaW1wb3J0IENsb3NlTW9kYWxPblJvdXRlQ2hhbmdlTWl4aW4gZnJvbSAnQGNvcmUvbWl4aW5zL21vZGFscy9DbG9zZU1vZGFsT25Sb3V0ZUNoYW5nZSc7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAnTG9naW5Nb2RhbCcsCiAgICB0ZXN0SWRPcHRpb25zOiB7CiAgICAgICAga2V5UHJlZml4OiAnc2hhcmVkLmNvbXBvbmVudHMubW9kYWxzLmxvZ2luTW9kYWwnCiAgICB9LAogICAgaTE4bk9wdGlvbnM6IHsKICAgICAgICBuYW1lc3BhY2VzOiAnc2hhcmVkJywKICAgICAgICBrZXlQcmVmaXg6ICdjb21wb25lbnRzLm1vZGFscy5sb2dpbicsCiAgICB9LAogICAgY29tcG9uZW50czogewogICAgICAgIEhlYWRlclZhcmlhbnQxCiAgICB9LAogICAgbWl4aW5zOiBbIENsb3NlTW9kYWxPblJvdXRlQ2hhbmdlTWl4aW4gXSwKICAgIGRhdGE6IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGVtYWlsOiAnJywKICAgICAgICAgICAgc2VydmVyRXJyb3I6ICcnLAogICAgICAgICAgICBwYXNzd29yZDogJycKICAgICAgICB9OwogICAgfSwKICAgIHZhbGlkYXRpb25zKCkgewogICAgICAgIGNvbnN0IHJldCA9IHsKICAgICAgICAgICAgZW1haWw6IHsKICAgICAgICAgICAgICAgIHJlcXVpcmVkLAogICAgICAgICAgICAgICAgZW1haWwsCiAgICAgICAgICAgICAgICBzZXJ2ZXJGYWlsZWQgOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gIXRoaXMuc2VydmVyRXJyb3IubGVuZ3RoOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBwYXNzd29yZDogewogICAgICAgICAgICAgICAgcmVxdWlyZWQsCiAgICAgICAgICAgICAgICBzZXJ2ZXJGYWlsZWQgOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gIXRoaXMuc2VydmVyRXJyb3IubGVuZ3RoOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgIH07CgogICAgICAgIHJldHVybiByZXQ7CiAgICB9LAogICAgY29tcHV0ZWQ6IHsKICAgICAgICAuLi5tYXBHZXR0ZXJzKCB7CiAgICAgICAgICAgIGxvYWRpbmdQcm9maWxlOiAndXNlci9wcm9maWxlL2xvYWRpbmcnLAogICAgICAgICAgICBnZXRQcm9maWxlSGFzRXJyb3I6ICd1c2VyL3Byb2ZpbGUvaGFzRXJyb3InLAogICAgICAgICAgICBnZXRVc2VyczogJ3VzZXIvc2lnblVwL2dldFVzZXJzJwogICAgICAgIH0gKQogICAgfSwKICAgIHdhdGNoOiB7CiAgICAgICAgJ2VtYWlsJzogZnVuY3Rpb24gKCApIHsKICAgICAgICAgICAgdGhpcy5zZXJ2ZXJFcnJvciA9ICcnOwogICAgICAgIH0sCiAgICAgICAgJ3Bhc3N3b3JkJzogZnVuY3Rpb24gKCApIHsKICAgICAgICAgICAgdGhpcy5zZXJ2ZXJFcnJvciA9ICcnOwogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgLi4ubWFwQWN0aW9ucyggewogICAgICAgICAgICBjb21taXRTZXRMb2dnZWRVc2VyICAgICAgICAgOiAndXNlci9sb2dnZWRVc2VyL2NvbW1pdFNldExvZ2dlZFVzZXInLAogICAgICAgICAgICBjb21taXRTZXRJc0xvZ2dlZFRvVHJ1ZSAgICAgOiAndXNlci9sb2dnZWRVc2VyL2NvbW1pdFNldElzTG9nZ2VkVG9UcnVlJywKICAgICAgICAgICAgdXNlckxvZ2luICAgICAgICAgICAgICAgICAgIDogJ3VzZXIvbG9naW4nLAogICAgICAgICAgICBzaG93TG9hZGluZ092ZXJsYXkgICAgICAgICAgOiAnYXBwU3RhdGUvc2V0TG9hZGluZycsCiAgICAgICAgfSApLAogICAgICAgIGdvVG9TaWduVXBQYWdlKCkgewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCggeyBuYW1lOiAnc2lnblVwJyB9ICk7CiAgICAgICAgfSwKICAgICAgICByZXF1aXJlZEVycm9yKCB7IGZpZWxkIH0gKSB7CiAgICAgICAgICAgIGxldCBlcnJvcnMgPSBbXTsKICAgICAgICAgICAgaWYgKCAhdGhpcy4kdltgJHtmaWVsZH1gXS4kZGlydHkgKSByZXR1cm4gZXJyb3JzOwogICAgICAgICAgICAhdGhpcy4kdltgJHtmaWVsZH1gXS5yZXF1aXJlZCAgICYmIGVycm9ycy5wdXNoICggdGhpcy4kdCggJ19jb21tb246Zm9ybUVycm9ycy5yZXF1aXJlZEZpZWxkJywgeyBmaWVsZDogdGhpcy4kdCggYF9jb21tb246Zm9ybS5sYWJlbHMuJHtmaWVsZH1gICksIGludGVycG9sYXRpb24gOiB7IGVzY2FwZVZhbHVlOiBmYWxzZSB9IH0gKSApOwogICAgICAgICAgICByZXR1cm4gZXJyb3JzOwogICAgICAgIH0sCiAgICAgICAgZW1haWxFcnJvciggeyBmaWVsZCB9ICkgewogICAgICAgICAgICBsZXQgZXJyb3JzID0gW107CiAgICAgICAgICAgIGlmICggIXRoaXMuJHZbYCR7ZmllbGR9YF0uJGRpcnR5ICkgcmV0dXJuIGVycm9yczsKICAgICAgICAgICAgIXRoaXMuJHZbYCR7ZmllbGR9YF0uZW1haWwgICYmIGVycm9ycy5wdXNoKCB0aGlzLiR0KCAnX2NvbW1vbjpmb3JtRXJyb3JzLmVtYWlsJywgeyBmaWVsZDogdGhpcy4kdCggYF9jb21tb246Zm9ybS5sYWJlbHMuJHtmaWVsZH1gICksIGludGVycG9sYXRpb246IHsgZXNjYXBlVmFsdWU6IGZhbHNlIH0gfSApICk7CiAgICAgICAgICAgIHJldHVybiBlcnJvcnM7CiAgICAgICAgfSwKICAgICAgICBlbWFpbFNlcnZlckVycm9yKCApIHsKICAgICAgICAgICAgbGV0IGVycm9ycyA9IFtdOwogICAgICAgICAgICBpZiAoIHRoaXMuc2VydmVyRXJyb3IubGVuZ3RoICkgewogICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goIHRoaXMuc2VydmVyRXJyb3IgKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZXJyb3JzOwogICAgICAgIH0sCiAgICAgICAgdmFsaWRhdGUoICkgewogICAgICAgICAgICB0aGlzLiR2LiR0b3VjaCgpOwogICAgICAgICAgICBsZXQgdXNlcnMgPSB0aGlzLmdldFVzZXJzOwogICAgICAgICAgICBsZXQgbWF0Y2ggPSBmYWxzZTsKICAgICAgICAgICAgdXNlcnMuZm9yRWFjaCggdXNlciA9PiB7CiAgICAgICAgICAgICAgICBpZiAoIHVzZXIuZW1haWwgPT09IHRoaXMuZW1haWwgJiYgIHVzZXIucGFzc3dvcmQgPT09IHRoaXMucGFzc3dvcmQgKSB7CiAgICAgICAgICAgICAgICAgICAgbWF0Y2ggPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuY29tbWl0U2V0TG9nZ2VkVXNlciggeyBuYW1lOiB1c2VyLm5hbWUsIHBhc3N3b3JkOiB1c2VyLnBhc3N3b3JkLCB1c2VybmFtZTogdXNlci51c2VybmFtZSwgZW1haWw6IHVzZXIuZW1haWwgfSApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9ICk7CgogICAgICAgICAgICBpZiAoICFtYXRjaCApCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kdi5pbnZhbGlkOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICByZXR1cm4gIXRoaXMuJHYuaW52YWxpZDsKCgogICAgICAgIH0sCiAgICAgICAgYXN5bmMgb25Mb2dpblN1Ym1pdCggZXZlbnQgKSB7CiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbiggKTsKCiAgICAgICAgICAgIGlmICggdGhpcy52YWxpZGF0ZSgpICkgewogICAgICAgICAgICAgICAgdGhpcy5jb21taXRTZXRJc0xvZ2dlZFRvVHJ1ZSgpOwogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIHsgbmFtZTogJ2hvbWUnIH0gKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmdPdmVybGF5ICggZmFsc2UgKTsKICAgICAgICAgICAgICAgIHRoaXMuJHYuJHJlc2V0KCk7CiAgICAgICAgICAgICAgICB0aGlzLnNlcnZlckVycm9yID0gdGhpcy4kdCggJ21lc3NhZ2VzLm5vRW1haWwnICk7CiAgICAgICAgICAgICAgICB0aGlzLiR2LiR0b3VjaCgpOwogICAgICAgICAgICB9CgogICAgICAgIH0sCiAgICB9Cn07Cg=="},{"version":3,"sources":["LoginModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"LoginModal.vue","sourceRoot":"src/core/shared/components/modals","sourcesContent":["<template>\n    <v-card class=\"gst-login-modal d-flex flex-column\" color=\"text\">\n        <!-- TODO:  This is a test modal to test out login\n            This modal will be updated in another task\n         -->\n        <HeaderVariant1 class=\"mb-3\" title=\"Login\" @close=\"$emit('close')\" />\n        <div class=\"d-flex align-center ml-6 mb-2\">\n            <div>\n                If you don't have an account please sign up!\n            </div>\n\n            <button class=\"sign-up-button ml-2\" @click=\"goToSignUpPage\">\n                Sign up\n            </button>\n        </div>\n        <v-card-text class=\"flex-grow-0 content-max-width px-4 pb-2\" :style=\"{ color:'inherit'}\">\n            <form>\n                <v-text-field\n                    v-model=\"email\"\n                    :data-test-id=\"$testId('input.email')\"\n                    color=\"black\"\n                    class=\"gst-input--secondary gst-input\"\n                    :label=\"$t('_common:form.labels.email')\"\n                    :error-messages=\"[\n                        ...requiredError({ field: 'email'}),\n                        ...emailError({ field: 'email'}),\n                        ...emailServerError()\n                    ]\"\n                    required\n                    outlined />\n                <v-text-field\n                    v-model=\"password\"\n                    class=\"gst-input--secondary gst-input\"\n                    type=\"password\"\n                    color=\"black\"\n                    required\n                    outlined\n                    placeholder=\"Password\"\n                    :error-messages=\"[\n                        ...requiredError({ field: 'password' }),\n                        ...emailServerError()\n                    ]\" />\n                <v-btn\n                    center\n                    text\n                    outlined\n                    :data-test-id=\"$testId('button.submit')\"\n                    class=\"text-capitalize gst-login-btn float-right\"\n                    color=\"#ADACAC\"\n                    type=\"submit\"\n                    v-bind=\"$attrs\"\n                    @click.native=\"onLoginSubmit\">\n                    {{ $t('_common:buttons.login') }}\n                </v-btn>\n            </form>\n        </v-card-text>\n    </v-card>\n</template>\n<script>\n    import { required, email } from 'vuelidate/lib/validators';\n    import { mapActions, mapGetters } from 'vuex';\n    import HeaderVariant1 from '@core/shared/components/modals/layout/HeaderVariant1.vue';\n    import CloseModalOnRouteChangeMixin from '@core/mixins/modals/CloseModalOnRouteChange';\n\n    export default {\n        name: 'LoginModal',\n        testIdOptions: {\n            keyPrefix: 'shared.components.modals.loginModal'\n        },\n        i18nOptions: {\n            namespaces: 'shared',\n            keyPrefix: 'components.modals.login',\n        },\n        components: {\n            HeaderVariant1\n        },\n        mixins: [ CloseModalOnRouteChangeMixin ],\n        data: function() {\n            return {\n                email: '',\n                serverError: '',\n                password: ''\n            };\n        },\n        validations() {\n            const ret = {\n                email: {\n                    required,\n                    email,\n                    serverFailed : function() {\n                        return !this.serverError.length;\n                    }\n                },\n                password: {\n                    required,\n                    serverFailed : function() {\n                        return !this.serverError.length;\n                    }\n                },\n            };\n\n            return ret;\n        },\n        computed: {\n            ...mapGetters( {\n                loadingProfile: 'user/profile/loading',\n                getProfileHasError: 'user/profile/hasError',\n                getUsers: 'user/signUp/getUsers'\n            } )\n        },\n        watch: {\n            'email': function ( ) {\n                this.serverError = '';\n            },\n            'password': function ( ) {\n                this.serverError = '';\n            }\n        },\n        methods: {\n            ...mapActions( {\n                commitSetLoggedUser         : 'user/loggedUser/commitSetLoggedUser',\n                commitSetIsLoggedToTrue     : 'user/loggedUser/commitSetIsLoggedToTrue',\n                userLogin                   : 'user/login',\n                showLoadingOverlay          : 'appState/setLoading',\n            } ),\n            goToSignUpPage() {\n                this.$router.push( { name: 'signUp' } );\n            },\n            requiredError( { field } ) {\n                let errors = [];\n                if ( !this.$v[`${field}`].$dirty ) return errors;\n                !this.$v[`${field}`].required   && errors.push ( this.$t( '_common:formErrors.requiredField', { field: this.$t( `_common:form.labels.${field}` ), interpolation : { escapeValue: false } } ) );\n                return errors;\n            },\n            emailError( { field } ) {\n                let errors = [];\n                if ( !this.$v[`${field}`].$dirty ) return errors;\n                !this.$v[`${field}`].email  && errors.push( this.$t( '_common:formErrors.email', { field: this.$t( `_common:form.labels.${field}` ), interpolation: { escapeValue: false } } ) );\n                return errors;\n            },\n            emailServerError( ) {\n                let errors = [];\n                if ( this.serverError.length ) {\n                    errors.push( this.serverError );\n                }\n                return errors;\n            },\n            validate( ) {\n                this.$v.$touch();\n                let users = this.getUsers;\n                let match = false;\n                users.forEach( user => {\n                    if ( user.email === this.email &&  user.password === this.password ) {\n                        match = true;\n                        this.commitSetLoggedUser( { name: user.name, password: user.password, username: user.username, email: user.email } );\n                    }\n                } );\n\n                if ( !match )\n                    return this.$v.invalid;\n                else\n                    return !this.$v.invalid;\n\n\n            },\n            async onLoginSubmit( event ) {\n                event.preventDefault();\n                event.stopPropagation( );\n\n                if ( this.validate() ) {\n                    this.commitSetIsLoggedToTrue();\n                    this.$router.push( { name: 'home' } );\n                } else {\n                    this.showLoadingOverlay ( false );\n                    this.$v.$reset();\n                    this.serverError = this.$t( 'messages.noEmail' );\n                    this.$v.$touch();\n                }\n\n            },\n        }\n    };\n</script>\n<style lang=\"scss\" scoped>\n    @import \"@scssVariables\";\n\n    .gst-login-modal__toolbar {\n        border-bottom: 1px solid theme-color( 'quinary' );\n    }\n\n    .gst-login-modal__title {\n        font-weight: font-weight( 'medium' );\n    }\n\n    .gst-login-btn.v-btn.v-btn--outlined {\n        font-weight: font-weight( 'medium' );\n        border-radius: border-radius( 'm' ) !important;\n        min-height: 44px;\n\n        &.v-btn--disabled {\n            color: theme-color( 'primary' ) !important;\n            border-color: theme-color( 'primary' );\n            opacity: 0.4;\n        }\n    }\n\n    .gst-login-btn.v-btn.v-btn--outlined:not([disabled]) {\n        border-color: #ADACAC;\n    }\n\n    .sign-up-button {\n        height: 30px;\n        width: 70px;\n        background-color: #ADACAC;\n        border-radius: border-radius( 'm' ) !important;\n    }\n</style>\n\n<style lang=\"scss\">\n    @import \"@scssVariables\";\n\n    .gst-login-modal__icon-close .gst-svg-icon {\n        fill: theme-color( 'tertiary' );\n    }\n\n    .gst-login-modal__header .v-toolbar__content {\n        justify-content: end;\n    }\n\n    .gst-login-modal {\n        .gst-login-modal__close.v-btn {\n            min-width: auto;\n        }\n    }\n</style>\n"]}]}